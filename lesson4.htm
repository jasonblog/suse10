<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>柏青哥的 SuSE Linux -- 系統管理工作</title>
<style type="text/css">
<!--
a {
	text-decoration: none;
}
-->
</style>
</head>

<body background="sumtextb.jpg" tppabs="http://www.suse.url.tw/sumtextb.jpg" link="#000099" vlink="#000099" alink="#660066" leftmargin="40">
<font size="+1"> <a href="index-1.htm" tppabs="http://www.suse.url.tw/sles10/index.htm" target="_blank"><img src="first.GIF" tppabs="http://www.suse.url.tw/first.GIF" width="40" height="40" border="0" align="middle"></a>　</font> 
　作者：陳柏菁 　E-mail：pachingko@ms96.url.com.tw<strong><font size="+1">　</font></strong> 
<table width="100%" border="0">
  <tr> 
    <td nowrap> <div align="center"><strong><font size="7">第四章　系 統 管 理 工 作</font></strong></div></td>
  </tr>
</table>
<font color="#660066"><br>
<font color="#000000" size="+1"><strong><font color="#000099">索引：</font></strong></font><font color="#000000"><br>
</font></font> 
<table width="100%" border="0">
  <tr> 
    <td colspan="3" align="center" valign="top" nowrap><div align="left"><font color="#000099"><strong>4.1</strong> 
        <a href="#1"><strong>使用者帳號及群組管理</strong></a> </font></div></td>
  </tr>
  <tr> 
    <td width="3%" align="center" valign="top" nowrap><font color="#000099">&nbsp;</font></td>
    <td width="6%" align="center" valign="top" nowrap><font color="#000099">4.1.1</font></td>
    <td width="91%"><font color="#000099"><a href="#2">帳號密碼相關檔案</a> ---</font></td>
  </tr>
  <tr> 
    <td align="center" valign="top" nowrap><font color="#000099">&nbsp;</font></td>
    <td align="center" valign="top" nowrap><font color="#000099">&nbsp;</font></td>
    <td><font color="#000099"><a href="#3">/etc/passwd</a>、<a href="#4">/etc/shadow</a>、<a href="#6">/etc/group</a>、<a href="#7">/etc/gshadow</a>、<a href="#5">pwunconv 
      及 pwconv 指令</a></font></td>
  </tr>
  <tr> 
    <td align="center" valign="top" nowrap><font color="#000099">&nbsp;</font></td>
    <td align="center" valign="top" nowrap><font color="#000099">4.1.2</font></td>
    <td><font color="#000099"><a href="#8">使用者與群組的管理指令</a> ---</font></td>
  </tr>
  <tr> 
    <td align="center" valign="top" nowrap><font color="#000099">&nbsp;</font></td>
    <td align="center" valign="top" nowrap><font color="#000099">&nbsp;</font></td>
    <td><font color="#000099"><a href="#9">useradd</a>、<a href="#10">userdel</a>、<a href="#11">usermod</a>、<a href="#12">groupadd</a>、<a href="#13">groupmod</a>、<a href="#14">groupdel</a>、<a href="#55">id 
      及 groups</a>、<a href="#15">passwd</a>、<a href="#16">gpasswd</a>、<a href="#17">chage</a></font></td>
  </tr>
  <tr> 
    <td height="19" colspan="3" align="center" valign="top" nowrap> <div align="left"><font color="#000099"><strong>4.2</strong> 
        <a href="#18"><strong>行程與工作管理</strong></a> </font></div></td>
  </tr>
  <tr> 
    <td align="center" valign="top" nowrap><font color="#000099">&nbsp;</font></td>
    <td align="center" valign="top" nowrap><font color="#000099">4.2.1</font></td>
    <td><font color="#000099"><a href="#19">子行程的概念及 Linux 的多工環境</a></font></td>
  </tr>
  <tr> 
    <td align="center" valign="top" nowrap><font color="#000099">&nbsp;</font></td>
    <td align="center" valign="top" nowrap><font color="#000099">4.2.2</font></td>
    <td><font color="#000099"><a href="#21">行程監控指令</a> --- <a href="#22">ps</a>、<a href="#23">top</a>、<a href="#24">pstree</a></font></td>
  </tr>
  <tr> 
    <td align="center" valign="top" nowrap><font color="#000099">&nbsp;</font></td>
    <td align="center" valign="top" nowrap><font color="#000099">4.2.3</font></td>
    <td><font color="#000099"><a href="#25">設定行程優先權</a> --- <a href="#26">nice</a>、<a href="#27">renice</a></font></td>
  </tr>
  <tr> 
    <td align="center" valign="top" nowrap><font color="#000099">&nbsp;</font></td>
    <td align="center" valign="top" nowrap><font color="#000099">4.2.4</font></td>
    <td><font color="#000099"><a href="#28">工作管理 (Job Control)</a> --- jobs、fg、bg 
      指令介紹</font></td>
  </tr>
  <tr> 
    <td align="center" valign="top" nowrap><font color="#000099">&nbsp;</font></td>
    <td align="center" valign="top" nowrap><font color="#000099">4.2.5</font></td>
    <td><font color="#000099"><a href="#29">kill 指令、訊號 (Signals) </a></font></td>
  </tr>
  <tr> 
    <td colspan="3" align="center" valign="top" nowrap><div align="left"><font color="#000099"><strong>4.3</strong> 
        <a href="#32"><strong>執行基本檔案管理</strong></a> </font></div></td>
  </tr>
  <tr> 
    <td align="center" valign="top" nowrap><font color="#000099">&nbsp;</font></td>
    <td align="center" valign="top" nowrap><font color="#000099">4.3.1</font></td>
    <td><font color="#000099"><a href="#33">檔案屬性的介紹</a></font></td>
  </tr>
  <tr> 
    <td align="center" valign="top" nowrap><font color="#000099">&nbsp;</font></td>
    <td align="center" valign="top" nowrap><font color="#000099">4.3.2</font></td>
    <td><font color="#000099"><a href="#34">基本檔案管理指令</a> --- <a href="#35">cp</a>、<a href="#36">mv</a>、<a href="#37">mkdir</a>、<a href="#38">rmdir</a>、<a href="#39">rm</a>、<a href="#40">touch</a></font></td>
  </tr>
  <tr> 
    <td align="center" valign="top" nowrap><font color="#000099">&nbsp;</font></td>
    <td align="center" valign="top" nowrap><font color="#000099">4.3.3</font></td>
    <td><font color="#000099"><a href="#41">檔案權限及擁有權的變更</a> --- <a href="#42">chmod</a>、<a href="#43">chown</a>、<a href="#44">chgrp</a>、<a href="#60">umask</a></font></td>
  </tr>
  <tr>
    <td align="center" valign="top" nowrap>&nbsp;</td>
    <td align="center" valign="top" nowrap><font color="#000099">4.3.4</font></td>
    <td><font color="#000099"><a href="#61">綜合範例練習</a> ：<a href="#45">手動新增帳號</a>及<a href="#46"> 
      newgrp 指令</a>的使用</font></td>
  </tr>
  <tr> 
    <td align="center" valign="top" nowrap><font color="#000099">&nbsp;</font></td>
    <td align="center" valign="top" nowrap><font color="#000099">4.3.5</font></td>
    <td><font color="#000099"><a href="#47">權限特殊位元的設定</a> --- SUID、SGID、Sticky 
      bit</font></td>
  </tr>
  <tr> 
    <td colspan="3" align="center" valign="top" nowrap><div align="left"><font color="#000099"><strong>4.4</strong> 
        <a href="#49"><strong>ACL 存取控制表</strong></a> </font></div></td>
  </tr>
  <tr> 
    <td align="center" valign="top" nowrap><font color="#000099">&nbsp;</font></td>
    <td align="center" valign="top" nowrap><font color="#000099">4.4.1</font></td>
    <td><font color="#000099"><a href="#50">ACL 的功用</a></font></td>
  </tr>
  <tr> 
    <td height="18" align="center" valign="top" nowrap><font color="#000099">&nbsp;</font></td>
    <td align="center" valign="top" nowrap><font color="#000099">4.4.2</font></td>
    <td><font color="#000099"><a href="#51">設定及檢視檔案目錄的 ACL</a> --- <a href="#52">setfacl</a>、<a href="#53">getfacl</a>、<a href="#70">ACL 
      的設定範例 </a></font></td>
  </tr>
</table>
<br>
<hr>
<br>
<font color="#660066"><font color="#000000"> 　本章主要是針對三大項的管理工作來跟各位做個說明，包括帳號管理、行程與工作管理及基本的檔案管理，而這些管理工作也都是大家在初探 
Linux 的過程裡，必須要學會的基本功夫。　</font><font color="#0000FF"><strong><br>
</strong></font></font><font color="#0000FF"><strong><br>
<font size="+1"><a name="1"></a><font size="6">4.1 使用者帳號及群組管理</font></font></strong></font><font size="+1"><br>
</font><font face="華康細圓體(P)"><br>
</font><font size="3">　對系統管理者來說，帳號管理非常的重要，因為您必須控管哪些帳號允許登入系統，哪些帳號不能登入系統但可以使用系統所提供的服務 
﹔另外與使用者有著緊密關係的密碼相關設定，也是屬於帳號管理裡頭相當重要的一環。</font>不過在您學習帳號管理的同時，可不要忽略了對群組的認識，尤其當您學會了權限管理的技巧後，應該更能體會到兩者之間的關係其實是密不可分的。<br>
　<br>
<strong><font size="+1"><a name="2"></a><font size="5">4.1.1 使用者帳號與群組相關檔案</font></font></strong><font size="+1"><br>
<br>
　</font>當管理者藉由指令來幫一般使用者建立帳號後，這個帳號資料會寫入哪些相關檔案 ? 又此帳號與群組的關聯性為何 ? 而這些問題您都必須要清楚，否則將來在維護您使用者帳號及群組時，可能會產生很多問題噢。<font size="+1"><br>
<br>
<font color="#000000"><strong><a name="3"></a></strong></font><font size="+1"><strong><img src="1775.gif" tppabs="http://www.suse.url.tw/picture/1775.gif" width="18" height="18"></strong></font></font> 
<font size="+1"><font color="#000000" size="4"><strong>檔案 /etc/passwd</strong></font></font> 
<br>
<br>
　此乃有關於使用者帳號相關資訊的一個檔案，其大致內容如下：<br>
<br>
<table width="100%" border="0">
  <tr> 
    <td bgcolor="#000000"><font color="#FFFFFF">barry@suse:~&gt;</font><font color="#FFFF00"> 
      <strong>cat /etc/passwd</strong><br>
      root:x:0:0:root:/root:/bin/bash</font><font color="#FFFF00">&nbsp;</font><font color="#FFFFFF"><br>
      bin:x:1:1:bin:/bin:/bin/bash<br>
      daemon:x:2:2:Daemon:/sbin:/bin/bash<br>
      mail:x:8:12:Mailer daemon:/var/spool/clientmqueue:/bin/false<br>
      　<font size="2">：略</font>　　　　　　　<font size="2">：略</font><br>
      wwwrun:x:30:8:WWW daemon apache:/var/lib/wwwrun:/bin/false<br>
      ftp:x:40:49:FTP account:/srv/ftp:/bin/bash<br>
      nobody:x:65534:65533:nobody:/var/lib/nobody:/bin/bash<br>
      sshd:x:71:65:SSH daemon:/var/lib/sshd:/bin/false<br>
      named:x:44:44:Name server daemon:/var/lib/named:/bin/false<br>
      <font color="#FFFF00">barry:x:1000:100:barry chen:/home/barry:/bin/bash<br>
      mary:x:1001:100:mary wang:/home/mary:/bin/bash </font></font></td>
  </tr>
</table>
<br>
　每一個帳號佔用一行，每一行有七個欄位，每個欄位之間用「:」做區隔。至於相關欄位說明如下：<br>
<br>
<table width="65%">
  <tr> 
    <td height="34" nowrap bgcolor="#CCCCCC"><strong><font face="細明體">　</font></strong><font face="細明體">barry 
      ： x ：1000：100：barry chen：/home/barry：/bin/bash<br>
      　 帳號　 密碼　UID　GID　　 備註　　　　家目錄　　　 shell</font></td>
  </tr>
</table>
<br>
<table width="100%" border="0">
  <tr> 
    <td width="2%">&nbsp;</td>
    <td width="3%" align="center"><img src="icon.jpg" tppabs="http://www.suse.url.tw/picture/icon.jpg" width="11" height="11"></td>
    <td width="95%"><font color="#006600"><strong><font color="#000099">帳號</font></strong></font><font color="#000099"><strong>：</strong></font></td>
  </tr>
  <tr> 
    <td>&nbsp;</td>
    <td align="center">&nbsp;</td>
    <td>使用者的帳號名稱是唯一的、不可重複的，且有區分大小寫。帳號名稱需為字母、數字、「_」、「-」及「.」的組合，且名稱的開頭必須是字母或「_」，名稱中間亦不能留有空白字元。這個命名規則適用於以 
      useradd 指令或利用 YaST 方式來新增的帳號，但如果您是使用手動編輯的方式，就不受這裡的規範了。再來看看上面 /etc/passwd 
      所列的內容裡，除了 barry、mary 及 root 是屬於一般帳號 ( Regular users ) 外，其餘都是一些應用程式帳號 ( System 
      users )，那為何要有這些應用程式帳號呢 ? 大家都知道系統中往往有很多程式需要被執行，而在執行過程，為了系統安全的考量，常常希望能用非 root 
      的身分 ( non-root id ) 來執行這些程式，這就是為何要有 System users 的原因了。</td>
  </tr>
  <tr> 
    <td>&nbsp;</td>
    <td align="center">&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr> 
    <td>&nbsp;</td>
    <td align="center"><img src="icon.jpg" tppabs="http://www.suse.url.tw/picture/icon.jpg" width="11" height="11"></td>
    <td><font color="#006600"><strong><font color="#000099">密碼</font></strong></font><font color="#000099"><strong>：</strong></font></td>
  </tr>
  <tr> 
    <td>&nbsp;</td>
    <td align="center">&nbsp;</td>
    <td>您看到的密碼欄位為 x，這表示編碼後的密碼會被很安全的放在 /etc/shadow 內保護著，因為 /etc/shadow 這個檔案，對一般使用者而言，是不具任何存取權限的。</td>
  </tr>
  <tr> 
    <td>&nbsp;</td>
    <td align="center">&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr> 
    <td>&nbsp;</td>
    <td align="center"><img src="icon.jpg" tppabs="http://www.suse.url.tw/picture/icon.jpg" width="11" height="11"></td>
    <td><font color="#006600"><strong><font color="#000099">UID</font></strong></font><font color="#000099"><strong> 
      (User IDentifier)：</strong></font></td>
  </tr>
  <tr> 
    <td>&nbsp;</td>
    <td align="center">&nbsp;</td>
    <td>使用者的身分識別碼。 在 Linux 系統上，使用者的執行權限，是以 ID 作為判定的依據，這點請您要牢記。SuSE 裡頭，一般使用者的 UID，預設是從 
      1000 開始分配的，而 500 以下則是提供給系統帳號來使用。如果 UID是 0 的話，那就是 root 了。</td>
  </tr>
  <tr> 
    <td>&nbsp;</td>
    <td align="center">&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr> 
    <td>&nbsp;</td>
    <td align="center"><img src="icon.jpg" tppabs="http://www.suse.url.tw/picture/icon.jpg" width="11" height="11"></td>
    <td><font color="#006600"><strong><font color="#000099">GID</font></strong></font><font color="#000099"><strong> 
      (Group IDentifier)：</strong></font></td>
  </tr>
  <tr> 
    <td>&nbsp;</td>
    <td align="center">&nbsp;</td>
    <td>使用者的主要群組 ( primary group ) 或稱為預設群組 ( default group ) 的識別碼。GID 所對應的群組名稱，可以在 
      /etc/group 檔案中找到。另外每個使用者都只能有一個主要群組，而當使用者登入系統成功後，就能取得與主要群組相同的存取權限。<br>
      GID 預設也是從 1000 開始分配，GID 為 0 者，是 root 群組。 </td>
  </tr>
  <tr> 
    <td>&nbsp;</td>
    <td align="center">&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr> 
    <td>&nbsp;</td>
    <td align="center"><img src="icon.jpg" tppabs="http://www.suse.url.tw/picture/icon.jpg" width="11" height="11"></td>
    <td><font color="#006600"><strong><font color="#000099">備註</font></strong></font><font color="#000099"><strong>： 
      </strong></font></td>
  </tr>
  <tr> 
    <td>&nbsp;</td>
    <td align="center">&nbsp;</td>
    <td>這個欄位只是對於帳號的一些輔助說明而已<font color="#000000">，比如使用者的全名或者辦公室分機號碼等等的資訊。</font></td>
  </tr>
  <tr> 
    <td>&nbsp;</td>
    <td align="center">&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr> 
    <td>&nbsp;</td>
    <td align="center"><img src="icon.jpg" tppabs="http://www.suse.url.tw/picture/icon.jpg" width="11" height="11"></td>
    <td><font color="#000000"><font color="#006600"><strong><font color="#000099">家目錄</font></strong></font><font color="#000099"><strong>：</strong></font></font></td>
  </tr>
  <tr> 
    <td>&nbsp;</td>
    <td align="center">&nbsp;</td>
    <td><font color="#000000">指出使用者的家目錄在哪裡囉。一般使用者的家目錄都在 /home 底下<font color="#000000">，比如使用者 
      barry 及 michael 的家目錄即為 /home/barry、/home/michae l﹔至於 root 的家目錄則為 /root 。</font></font></td>
  </tr>
  <tr> 
    <td>&nbsp;</td>
    <td align="center">&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr> 
    <td>&nbsp;</td>
    <td align="center"><img src="icon.jpg" tppabs="http://www.suse.url.tw/picture/icon.jpg" width="11" height="11"></td>
    <td><font color="#000000"><font color="#000000"><font color="#006600"><strong><font color="#000099">shell</font></strong></font><font color="#000099"><strong>：</strong></font></font></font></td>
  </tr>
  <tr> 
    <td>&nbsp;</td>
    <td align="center">&nbsp;</td>
    <td><p><font color="#000000"><font color="#000000">使用者登入系統成功後，預設所使用的 shell，以這裡為例就是 
        /bin/bash。或許您會注意到有很多的系統帳號在這個欄位是使用 /bin/false 程式，可想而知，這些帳號平日是無法登入系統的。所以如果針對某些 
        Regular user，您只想提供一些服務給他們 (如收發 mail)，並不希望讓這些帳號來登入系統時，也可以藉由修改 shell來達到您的目的。</font></font> 
      </p>
      <blockquote> 
        <p><font color="#000000"><font color="#000000"><strong><font color="#000099">Tips</font></strong><font color="#000099">：<font size="2">如只想允許 
          root 能登入，其他使用者全部拒絕，那麼可以在 /etc 底下建立一個 nologin 的空檔案：&quot;touch /etc/nologin&quot;。</font></font></font></font> 
        </p>
      </blockquote></td>
  </tr>
</table>
<br>
<font color="#FF0000"> <font color="#000000">　我們可以利用 <font color="#0000FF">finger</font><strong> 
</strong>指令，來查詢使用者在 /etc/passwd 裡的部分資料，如登入帳號、註解欄位、家目錄及 shell：</font><br>
<br>
</font> 
<table width="100%" border="0" bgcolor="#000000">
  <tr> 
    <td><font color="#FFFFFF">suse:~ #<font color="#FFFF00"><strong> finger barry<br>
      </strong></font><font face="細明體">Login: barry 　　　　　　　　Name:michael chen<br>
      Directory: /home/barry 　　　Shell: /bin/bash<br>
      On since Sat Dec 9 14:34 (CST) on tty3, idle 2:16<br>
      Last login Sat Dec 9 23:14 (CST) on pts/4 from 192.168.1.226<br>
      No Mail.<br>
      No Plan.</font></font></td>
  </tr>
</table>
<br>
　如果只是單純的使用 finger 指令，其後未接任何的引數，則會顯示目前登入系統的使用者訊息，自己練習看看。<br>
<br>
<font color="#FF0000"><strong><font color="#000000" size="+1"><a name="4"></a></font><font size="+1"><font size="+1"><strong><img src="1775.gif" tppabs="http://www.suse.url.tw/picture/1775.gif" width="18" height="18"></strong></font></font><font color="#000000" size="+1"> 
檔案 /etc/shadow</font></strong></font><br>
<br>
　這就是俗稱的影子檔，主要是用來存放使用者編碼後的密碼，以及密碼的相關訊息。至於為何要將加密後的密碼放這裡呢 ? 因為 /etc/shadow 這個檔案對其他人而言，是不具任何存取權限的，所以一般使用者如想看這個檔案的內容，簡直是門兒都沒有。不過 
/etc/passwd 就不一樣了，由於此檔每個人都可以瀏覽裡面的內容，所以將編碼後的密碼放這裡，不是很危險嗎 ? 也正因為如此，我們才需要將編碼後的密碼放置在一個比較安全的地方，那就是 
/etc/shadow。<br>
<br>
　雖然加密後的密碼已經安置在很安全的地方了，但這並不代表密碼就可以隨便做設定。在設定使用者密碼時，尤其是 root 密碼，盡可能的使用複雜一點的字元組合，比如將大小寫字母、數字及其他特殊字元混雜在一起，且最少八個字元，並且要定期的更換密碼，這樣對系統安全會比較有保障。<br>
<br>
　接著就來看看 shadow 檔案的內容：<br>
<br>
<table width="100%" border="0">
  <tr> 
    <td height="57" bgcolor="#000000"><font color="#FFFFFF">suse:~ # <font color="#FFFF00"><strong>cat 
      /etc/shadow</strong></font><br>
      <font face="細明體">barry:$2a$10$B/Z.RLjzJgwE6LuYD9rZBOwVrb1P:13461:0:99999:7:::<br>
      mary:$2a$10$8EmWXLsDMC3PUkMWV4youuXp</font><font color="#FFFFFF"><font face="細明體">sDM<font color="#FFFFFF">m</font></font></font><font face="細明體">:13541:3:60:7:10:13694: 
      </font></font></td>
  </tr>
</table>
<br>
　一樣是一個帳號佔用一行，每一行有九個欄位，請參考以下由左至右之各欄位說明：<br>
<br>
<table width="100%" border="0">
  <tr> 
    <td width="2%">&nbsp;</td>
    <td width="3%" align="center"><img src="icon.jpg" tppabs="http://www.suse.url.tw/picture/icon.jpg" width="11" height="11"></td>
    <td width="95%"><font color="#000000"><strong><font color="#000099">帳號：</font></strong></font></td>
  </tr>
  <tr> 
    <td>&nbsp;</td>
    <td align="center">&nbsp;</td>
    <td><font color="#000000">這裡的帳號名稱與 /etc/passwd 裡頭的帳號是一樣的。</font></td>
  </tr>
  <tr> 
    <td>&nbsp;</td>
    <td align="center">&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr> 
    <td>&nbsp;</td>
    <td align="center"><img src="icon.jpg" tppabs="http://www.suse.url.tw/picture/icon.jpg" width="11" height="11"></td>
    <td><font color="#000000"><strong><font color="#000099">密碼：</font></strong></font></td>
  </tr>
  <tr> 
    <td>&nbsp;</td>
    <td align="center">&nbsp;</td>
    <td><font color="#000000">這是編碼過後的密碼。一般常見到的密碼加密類型有<font color="#000000"> DES、MD5 
      及 Blowfish 等。 </font></font></td>
  </tr>
  <tr> 
    <td>&nbsp;</td>
    <td align="center">&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr> 
    <td>&nbsp;</td>
    <td align="center"><img src="icon.jpg" tppabs="http://www.suse.url.tw/picture/icon.jpg" width="11" height="11"></td>
    <td><font color="#000000"><strong><font color="#000099">最後一次變更密碼的時間：</font></strong></font></td>
  </tr>
  <tr> 
    <td>&nbsp;</td>
    <td align="center">&nbsp;</td>
    <td><font color="#000000">這裡所顯示的是最後一次變更密碼的日期，至 1970 年 1 月 1 號的天數。</font></td>
  </tr>
  <tr> 
    <td>&nbsp;</td>
    <td align="center">&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr> 
    <td>&nbsp;</td>
    <td align="center"><img src="icon.jpg" tppabs="http://www.suse.url.tw/picture/icon.jpg" width="11" height="11"></td>
    <td><font color="#006600"><strong><font color="#000099">變更密碼的最少天數</font></strong></font><font color="#000099"><strong>：</strong></font></td>
  </tr>
  <tr> 
    <td>&nbsp;</td>
    <td align="center">&nbsp;</td>
    <td>密碼修改過後 ，最少要經過幾天才能再變更密碼。</td>
  </tr>
  <tr> 
    <td>&nbsp;</td>
    <td align="center">&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr> 
    <td>&nbsp;</td>
    <td align="center"><img src="icon.jpg" tppabs="http://www.suse.url.tw/picture/icon.jpg" width="11" height="11"></td>
    <td><font color="#006600"><strong><font color="#000099">密碼最大期限的天數</font></strong></font><font color="#000099"><strong>：</strong></font></td>
  </tr>
  <tr> 
    <td>&nbsp;</td>
    <td align="center">&nbsp;</td>
    <td>密碼修改過後 ，在幾天內必須再做一次變更密碼的動作。</td>
  </tr>
  <tr> 
    <td>&nbsp;</td>
    <td align="center">&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr> 
    <td>&nbsp;</td>
    <td align="center"><img src="icon.jpg" tppabs="http://www.suse.url.tw/picture/icon.jpg" width="11" height="11"></td>
    <td><font color="#006600"><strong><font color="#000099">警告天數</font></strong></font><font color="#000099"><strong>：</strong></font></td>
  </tr>
  <tr> 
    <td>&nbsp;</td>
    <td align="center">&nbsp;</td>
    <td><font color="#000000">在密碼期限到期</font>日的前幾天，會提出警告訊息，好用來提醒使用者要趕快變更密碼。</td>
  </tr>
  <tr> 
    <td>&nbsp;</td>
    <td align="center">&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr> 
    <td>&nbsp;</td>
    <td align="center"><img src="icon.jpg" tppabs="http://www.suse.url.tw/picture/icon.jpg" width="11" height="11"></td>
    <td><font color="#006600"><strong><font color="#000099">密碼寬限天數</font></strong></font><font color="#000099"><strong>：</strong></font></td>
  </tr>
  <tr> 
    <td>&nbsp;</td>
    <td align="center">&nbsp;</td>
    <td>在密碼期限到期後，還能夠寬限的天數。當使用者在寬限天數內登入系統時，會要求您做變更密碼的動作，變更成功後才可登入系統 ﹔那如果您一直到寬限天數之後才登入系統，則連要變更密碼的機會都沒有，因為系統會直接拒絕您登入，此時就只能跟管理員做反映了。</td>
  </tr>
  <tr> 
    <td>&nbsp;</td>
    <td align="center">&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr> 
    <td>&nbsp;</td>
    <td align="center"><img src="icon.jpg" tppabs="http://www.suse.url.tw/picture/icon.jpg" width="11" height="11"></td>
    <td><font color="#000000"><strong><font color="#000099">帳號期限：</font></strong></font></td>
  </tr>
  <tr> 
    <td>&nbsp;</td>
    <td align="center">&nbsp;</td>
    <td><font color="#000000">這裡所顯示的是帳號期限的日期，至<strong> </strong> 1970 年 1 月 1 
      號的天數。</font></td>
  </tr>
  <tr> 
    <td>&nbsp;</td>
    <td align="center">&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr> 
    <td>&nbsp;</td>
    <td align="center"><img src="icon.jpg" tppabs="http://www.suse.url.tw/picture/icon.jpg" width="11" height="11"></td>
    <td><font color="#006600"><strong><font color="#000099">保留欄位</font></strong></font><font color="#000099"><strong>：</strong></font></td>
  </tr>
  <tr> 
    <td>&nbsp;</td>
    <td align="center">&nbsp;</td>
    <td>目前未使用到。</td>
  </tr>
</table>
<br>
<font color="#0000FF"><font color="#000000">　在前面有提過說，可以藉由修改 /etc/passwd 的 shell 
欄位，來讓使用者暫時無法登入系統<font color="#000000">，其實您也可以在 /etc/shadow 內動手腳，因為只要把 shadow 檔的密碼欄位做個修改，就可以達到同樣的目的。至於修改的方式，就是在那一長串密碼的最前頭加上個「*」或<font color="#0000FF"><font color="#000000">「</font></font>!</font><font color="#0000FF"><font color="#000000"><font color="#000000">」</font></font></font><font color="#000000"> 
，當然您要使用其他字元也可以，不過這樣容易與原本編碼後的密碼混在一起就是了，而等您將來要恢復這個使用者登入時，再把這個特殊字元去掉即可。</font><br>
<br>
　</font><font color="#0000FF"><font color="#000000"><font size="+1"><strong><em><a name="5"></a></em></strong></font></font></font><font color="#000000">介紹完 
/etc/passwd 及 /etc/shadow 之後，再來看兩個與它們有關的指令：<br>
<br>
</font></font> 
<table width="100%" border="0">
  <tr>
    <td width="3%" align="center" valign="top" nowrap>&nbsp;</td>
    <td width="3%" align="center" valign="top" nowrap><font size="4">˙</font></td>
    <td width="97%"><strong>pwunconv：<br>
      </strong>執行這個指令後，會把編碼後的密碼從 /etc/shadow 內移至 /etc/passwd 的密碼欄位，並在完成這個動作後，將 
      shadow 檔案移除。 </td>
  </tr>
  <tr>
    <td align="center" valign="top" nowrap>&nbsp;</td>
    <td align="center" valign="top" nowrap><font color="#000000" size="4">˙</font></td>
    <td><strong>pwconv：</strong><br>
      可根據 /etc/passwd 檔案內容來安裝或更新 /etc/shadow ﹔當 /etc/shadow 不存在時，pwconv 可將其建立起來，並且把編碼後的密碼從 
      /etc/passwd 移至 /etc/shadow ﹔當 /etc/shadow 存在時，pwconv 就根據 /etc/passwd 來更新 
      /etc/shadow。</td>
  </tr>
</table>
<font color="#0000FF"><font color="#000000"><br>
　</font><font color="#0000FF"><font color="#000000">現在做個實驗，先輸入 pwunconv 指令，然後看看 
/etc/passwd 的密碼欄位跟先前有什麼不同 ? <br>
</font><br>
</font> </font>
<table width="100%" border="0">
  <tr> 
    <td bgcolor="#000000"><font color="#FFFFFF">suse:~ # <font color="#FFFF00"><strong>pwunconv</strong></font><br>
      suse:~ # <font color="#FFFF00"><strong>cat /etc/passwd</strong></font><br>
      <font face="細明體">barry:$2a$10$B/Z.RLjzJgwE6LuYD9rZBOwVrb1P:1000:100::/home/barry:/bin/bash<br>
      mary:$2a$10$8EmWXLsDMC3PUkMWV4youuXp<font color="#FFFFFF">sDM<font color="#FFFFFF">m</font></font>:1002:100::/home/mary:/bin/bash</font><br>
      </font> <font color="#FFFFFF"> <br>
      suse:~ #<strong> <font color="#FFFF00">cat /etc/shadow</font></strong><br>
      <font face="細明體">cat: /etc/shadow: No such file or directory</font></font></td>
  </tr>
</table>
<p> 　很明顯可以看出編碼後的密碼已經被轉換到 passwd 檔案內了，且 shadow 檔案也被移除了。若想要恢復先前的設定，執行 pwconv 即可<br>
  <br>
  <font color="#FF0000"> <font color="#000000"><strong><font size="+1"><a name="6"></a></font><font color="#0000FF"><font color="#000000"><img src="1775.gif" tppabs="http://www.suse.url.tw/picture/1775.gif" width="18" height="18"></font></font></strong></font> 
  </font><font size="+1"><strong>檔案 /etc/group</strong></font><br>
  <br>
  　這是關於群組相關訊息的檔案，格式很簡單，只有四個欄位： </p>
<table width="100%" border="0">
  <tr> 
    <td bgcolor="#000000"><font color="#FFFFFF">suse:~ # <font color="#FFFF00"><strong>cat 
      /etc/group</strong></font><br>
      <font face="細明體">root:x:0:<br>
      www:x:8: <br>
      nogroup:x:65534:nobody <br>
      users:x:100:</font></font></td>
  </tr>
</table>
<br>
　以下針對這幾個欄位做說明：<br>
<br>
<table width="100%" border="0">
  <tr> 
    <td width="2%">&nbsp;</td>
    <td width="3%" align="center"><img src="icon.jpg" tppabs="http://www.suse.url.tw/picture/icon.jpg" width="11" height="11"></td>
    <td width="95%"><font color="#000099"><strong>群組名稱：</strong></font></td>
  </tr>
  <tr> 
    <td>&nbsp;</td>
    <td align="center">&nbsp;</td>
    <td>分為一般群組與系統群組。 </td>
  </tr>
  <tr> 
    <td>&nbsp;</td>
    <td align="center">&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr> 
    <td>&nbsp;</td>
    <td align="center"><img src="icon.jpg" tppabs="http://www.suse.url.tw/picture/icon.jpg" width="11" height="11"></td>
    <td><font color="#006600"><strong><font color="#000099">群組密碼</font></strong></font><font color="#000099"><strong>：</strong></font></td>
  </tr>
  <tr> 
    <td>&nbsp;</td>
    <td align="center">&nbsp;</td>
    <td>平常我們是不會對群組設立密碼的，因為設定群組密碼的目的，只是用來讓非群組成員的使用者能以此群組作為其有效群組，以取得與此群組相同的存取權限。而這種做法對管理者來說，會牽扯到密碼管理的問題，比較麻煩就是了，所以平常很少會對群組設定密碼。如想讓使用者擁有此群組的存取權限時，就直接將該使用者加入此群組即可。 
    </td>
  </tr>
  <tr> 
    <td>&nbsp;</td>
    <td align="center">&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr> 
    <td>&nbsp;</td>
    <td align="center"><img src="icon.jpg" tppabs="http://www.suse.url.tw/picture/icon.jpg" width="11" height="11"></td>
    <td><font color="#006600"><strong><font color="#000099">GID</font></strong></font><font color="#000099"><strong>：</strong></font></td>
  </tr>
  <tr> 
    <td>&nbsp;</td>
    <td align="center">&nbsp;</td>
    <td>群組識別碼。從這裡可以看出每個群組所對應的 GID 為何，比如 root 群組的 GID 為 0，users 群組的 GID 為 100。</td>
  </tr>
  <tr> 
    <td>&nbsp;</td>
    <td align="center">&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr> 
    <td>&nbsp;</td>
    <td align="center"><img src="icon.jpg" tppabs="http://www.suse.url.tw/picture/icon.jpg" width="11" height="11"></td>
    <td><font color="#000000"><strong><font color="#000099"><strong>群</strong>組成員名單：</font></strong></font></td>
  </tr>
  <tr> 
    <td>&nbsp;</td>
    <td align="center">&nbsp;</td>
    <td>當您想讓某些使用者能擁有與此群組相同的存取權限時，就可以將這些使用者名單設定在這裡，而這個群組也被稱為這些使用者的次要群組 (附屬群組)。使用者只能有一個主要群組，但可以同時是好幾個次要群組的成員。</td>
  </tr>
</table>
<font color="#FF0000"><br>
<font color="#000000" size="+1"><strong><a name="7"></a></strong></font><font color="#0000FF"><font color="#000000"><img src="1775.gif" tppabs="http://www.suse.url.tw/picture/1775.gif" width="18" height="18"></font></font><font color="#000000" size="+1"><strong> 
檔案 /etc/gshadow</strong></font></font><br>
<br>
　傳統存放編碼後的群組密碼的地方。不過這個檔案不被系統所支援，所以萬一您有建立群組密碼時，那這個編碼後的密碼將會直接安置在 /etc/group 的密碼欄位上。<br>
<br>
<strong><font size="+1"><a name="8"></a><font size="5">4.1.2 使用者與群組的管理指令</font></font><font size="5"><br>
</font></strong><br>
　這裡的重點會放在使用者帳號密碼管理的上頭。不過一開始，您得要先學會如何去新增帳號，而在新增帳號時，又有哪些相關聯的檔案您需注意的 ? 所以接著就先來看看與帳號相關的檔案說明： 
<br>
<br>
<table width="100%" border="1">
  <tr bgcolor="#CCCCCC"> 
    <td align="center" nowrap><font color="#000099"><strong>帳號相關檔案</strong></font></td>
    <td><font color="#000099"><strong>關　聯　性</strong></font></td>
  </tr>
  <tr> 
    <td width="17%" align="center" nowrap><font color="#000099"><strong>/etc/passwd</strong></font></td>
    <td width="83%"><font color="#000099">新增帳號時，會將使用者帳號的相關資訊寫入這個檔案。</font></td>
  </tr>
  <tr> 
    <td align="center" nowrap><font color="#000099"><strong>/etc/shadow</strong></font></td>
    <td><font color="#000099">另外會把 /etc/passwd 裡的帳號資訊，同步於 /etc/shadow 內。而當您在建立使用者密碼時，就會將編碼後的密碼存放在這個地方。</font></td>
  </tr>
  <tr> 
    <td align="center" nowrap><font color="#000099"><strong>/etc/group</strong></font></td>
    <td><font color="#000099">在 SuSE 裡頭新增帳號時，該帳號的主要群組皆為 users ﹔但如您是使用 RedHat 的話，則會在這個檔案內多增加一筆群組資訊出來，此群組名稱並取名與使用者名稱相同，這就是該使用者的主要群組。</font></td>
  </tr>
  <tr> 
    <td align="center" nowrap><font color="#000099"><strong>/home/username</strong></font></td>
    <td><font color="#000099">新增帳號時，會將使用者的家目錄建立於 /home 底下，家目錄名稱預設也取名與使用者名稱相同。</font></td>
  </tr>
  <tr> 
    <td align="center" nowrap><font color="#000099"><strong>/etc/skel</strong></font></td>
    <td><font color="#000099">在使用者家目錄建立起來後，會把 /etc/skel 目錄內容複製一份到使用者個人家目錄下。</font></td>
  </tr>
  <tr> 
    <td align="center" nowrap><font color="#000099"><strong>/etc/default/useradd</strong></font></td>
    <td><font color="#000099">這個檔案所設定的，是在新增帳號時，套用於使用者身上的預設值，其內容大致如下：</font><br> 
      <table width="100%" border="0" bordercolor="#CCCCCC" bgcolor="#CCCCCC">
        <tr> 
          <td width="28%" valign="top" nowrap><font color="#000000">GROUP=100</font></td>
          <td width="72%"><font color="#000000" size="2">使用者的主要群組。</font></td>
        </tr>
        <tr> 
          <td valign="top" nowrap><font color="#000000">HOME=/home</font></td>
          <td><font color="#000000" size="2">使用者家目錄所存放的位置。</font></td>
        </tr>
        <tr> 
          <td valign="top" nowrap><font color="#000000">INACTIVE=-1</font></td>
          <td><font color="#000000" size="2">密碼寬限天數的設定。</font></td>
        </tr>
        <tr> 
          <td valign="top" nowrap><font color="#000000">EXPIRE=</font></td>
          <td><font color="#000000" size="2">帳號期限。</font></td>
        </tr>
        <tr> 
          <td valign="top" nowrap><font color="#000000">SHELL=/bin/bash</font></td>
          <td><font color="#000000" size="2">使用者預設所使用的 shell。</font></td>
        </tr>
        <tr> 
          <td valign="top" nowrap><font color="#000000">SKEL=/etc/skel</font></td>
          <td><font color="#000000" size="2">複製此目錄內容至個人家目錄中。</font></td>
        </tr>
        <tr> 
          <td valign="top" nowrap><font color="#000000">GROUPS=dialout,video</font></td>
          <td nowrap><font color="#000000" size="2">將使用者加入這些次要群組之中。</font></td>
        </tr>
      </table></td>
  </tr>
  <tr> 
    <td align="center" nowrap><font color="#000099"><strong>/etc/login.defs</strong></font></td>
    <td><font color="#000099">這個檔案與上面檔案差不多意思，只不過套用在使用者身上的預設值不同罷了 ﹔除此之外，也包括一些與使用者登入有關的設定參數：</font><br> 
      <table width="100%" border="0" bgcolor="#CCCCCC">
        <tr> 
          <td width="28%"><font color="#000000" face="細明體">DEFAULT_HOME　　yes</font></td>
          <td width="72%"><font color="#000000" size="2">使用者家目錄不存在時，是否允許登入。</font></td>
        </tr>
        <tr> 
          <td><font color="#000000" face="細明體">FAIL_DELAY　　　3</font></td>
          <td><font color="#000000" size="2">登入失敗後，延遲三秒才允許再次登入。</font></td>
        </tr>
        <tr> 
          <td nowrap><font color="#000000" face="細明體">PASS_MAX_DAYS　 99999</font></td>
          <td nowrap><font color="#000000" size="2">密碼最大期限是幾天。此處預設是密碼永久有效<font face="細明體">。</font></font></td>
        </tr>
        <tr> 
          <td><font color="#000000" face="細明體">PASS_MIN_DAYS　 0</font></td>
          <td><font color="#000000" size="2">密碼異動後，最少需經幾天才能再修改。</font></td>
        </tr>
        <tr> 
          <td><font color="#000000" face="細明體">PASS_WARN_AGE　 7</font></td>
          <td><font color="#000000" size="2">密碼警告天數。</font></td>
        </tr>
        <tr> 
          <td><font color="#000000" face="細明體">SYSTEM_UID_MIN　100</font></td>
          <td><font color="#000000" size="2">新增系統帳號時的最小 UID 為 100。</font></td>
        </tr>
        <tr> 
          <td nowrap><font color="#000000" face="細明體">SYSTEM_UID_MAX　499</font></td>
          <td nowrap><font color="#000000" size="2">新增系統帳號時的最大 UID 為 499。</font></td>
        </tr>
        <tr> 
          <td><font color="#000000" face="細明體">UID_MIN　　1000</font></td>
          <td><font color="#000000" size="2">新增一般使用者帳號時的最小 UID 為 1000。</font></td>
        </tr>
        <tr> 
          <td><font color="#000000" face="細明體">UID_MAX　　60000</font></td>
          <td><font color="#000000" size="2">新增一般使用者帳號時的最大 UID 為 60000。</font></td>
        </tr>
        <tr> 
          <td><font color="#000000" face="細明體">GID_MIN　　1000</font></td>
          <td><font color="#000000" size="2">新增一般群組時的最小 GID 為 1000。</font></td>
        </tr>
        <tr> 
          <td><font color="#000000" face="細明體">GID_MAX　　60000</font></td>
          <td><font color="#000000" size="2">新增一般群組時的最大 GID 為 60000。</font></td>
        </tr>
        <tr> 
          <td><font color="#000000" face="細明體">UMASK　　　022</font></td>
          <td><font color="#000000" size="2">使用者家目錄的預設權限為 755 (777-022)。</font></td>
        </tr>
      </table></td>
  </tr>
</table>
<br>
　以上的這些關聯性檔案都清楚之後，底下就要開始介紹使用者與群組管理的相關指令了。<br>
<br>
<strong><font size="+1"><a name="9"></a></font><font color="#FF0000"><font color="#0000FF"><font color="#000000"><img src="1775.gif" tppabs="http://www.suse.url.tw/picture/1775.gif" width="18" height="18"></font></font></font><font size="4"> 
指令 useradd</font></strong><br>
<br>
　新增使用者帳號的指令。另外也可以在新增帳號的同時，更新套用在使用者身上的預設值。<br>
<br>
<strong>指令語法</strong>：<br>
<table width="100%" bgcolor="#CCCCCC">
  <tr> 
    <td height="40"><strong>useradd [-c comment] [-d homedir] [-e expire] [-G 
      group,...] [-g gid] <br>
      　　　 [-m [-k skeldir]][-o] [-u uid] [-r] [-s shell] account</strong></td>
  </tr>
</table>
<br>
<strong>簡單範例</strong>：<br>
<table width="100%" border="0">
  <tr> 
    <td bgcolor="#000000"><font color="#FFFFFF">suse:~ # <font color="#FFFF00"><strong>useradd 
      -m tina</strong></font><br>
      suse:~ # <font color="#FFFF00"> <strong>passwd tina</strong></font><br>
      Changing password for tina.<br>
      New password:<br>
      Retype new password:<br>
      Password changed.<br>
      suse:~ # </font></td>
  </tr>
</table>
<br>
　這樣很輕易的就建立起一個有家目錄的使用者帳號了。如果您想在新增帳號的同時，改變一些套用在使用者身上的預設值，比如主要群組 ID、UID、帳號期限等等，那就要搭配一些參數來達成您的目的。<br>
<br>
<strong>參數說明</strong>：<br>
<table width="100%" border="1">
  <tr> 
    <td align="center" nowrap><font color="#000099"><strong>-m</strong></font></td>
    <td><font color="#000099">同於 --create-home ﹔新增帳號時，建立使用者的家目錄。<br>
      未使用此參數，該使用者將來登入後，便無家目錄可用。<br>
      </font> <table width="70%" border="0" bgcolor="#CCCCCC">
        <tr> 
          <td height="25" bgcolor="#CCCCCC"><font color="#000000">suse:~ # <strong>useradd 
            -m user1</strong></font></td>
        </tr>
      </table> </td>
  </tr>
  <tr> 
    <td width="7%" align="center" nowrap><font color="#000099"><strong>-d</strong></font></td>
    <td width="93%"><font color="#000099">同於 --home ﹔指定使用者的家目錄。<br>
      未使用此參數，則根據 /etc/default/useradd 來指定。</font><br> <table width="70%" border="0" bgcolor="#CCCCCC">
        <tr> 
          <td height="25" bgcolor="#CCCCCC"><font color="#000000">suse:~ # <strong>useradd 
            -d /homedir/user2 -m user2</strong></font></td>
        </tr>
      </table></td>
  </tr>
  <tr> 
    <td align="center" nowrap><font color="#000099"><strong>-g</strong></font></td>
    <td><font color="#000099">同於 --gid ﹔指定使用者的主要群組。參數之後可接群組名稱或 GID ( 已存在於 /etc/group 
      之中 )。<br>
      未使用此參數，則根據 /etc/default/useradd 來指定。</font><br> <table width="70%" border="0">
        <tr> 
          <td height="39" bgcolor="#CCCCCC"><font color="#000000">suse:~ # <strong>useradd 
            -g 1500 -m user3</strong><br>
            suse:~ # <strong>useradd -g groupname -m user3</strong></font></td>
        </tr>
      </table></td>
  </tr>
  <tr> 
    <td align="center" nowrap><font color="#000099"><strong>-G</strong></font></td>
    <td><font color="#000099">同於 --groups ﹔指定使用者的次要群組 ( 附屬群組 )。參數之後可指定多個群組名稱或 
      GID，之間用逗號隔開即可。<br>
      未使用此參數，則套用 /etc/default/useradd 的設定。</font><br> <table width="70%" border="0">
        <tr> 
          <td height="39" bgcolor="#CCCCCC"><font color="#000000">suse:~ # <strong>useradd 
            -G group01,group02 -m user4</strong><br>
            suse:~ # <strong>useradd -G 2000,3000 -m user4</strong></font></td>
        </tr>
      </table></td>
  </tr>
  <tr> 
    <td align="center" nowrap><font color="#000099"><strong>-s</strong></font></td>
    <td><font color="#000099">同於 --shell ﹔指定使用者登入後所使用的 shell (login shell)。<br>
      未使用此參數，則 regular users 預設為 /bin/bash ( 根據 /etc/default/useradd )，system 
      users 預設為 /bin/false。 </font><br> <table width="70%" border="0">
        <tr> 
          <td height="22" bgcolor="#CCCCCC"><font color="#000000">suse:~ # <strong>useradd 
            -s /bin/sh -m user5</strong></font></td>
        </tr>
      </table></td>
  </tr>
  <tr> 
    <td align="center" nowrap><font color="#000099"><strong>-e</strong></font></td>
    <td><font color="#000099">同於 --expire ﹔設定帳號的有效期限。<br>
      未使用此參數，則套用 /etc/default/useradd 的設定，即帳號是永久有效的。</font><br> <table width="70%" border="0">
        <tr> 
          <td bgcolor="#CCCCCC"><font color="#000000">suse:~ # <strong>useradd 
            -e 2007-12-31 -m user6</strong></font></td>
        </tr>
      </table></td>
  </tr>
  <tr> 
    <td align="center" nowrap><font color="#000099"><strong> -c</strong></font></td>
    <td><font color="#000099">同於 --comment ﹔對該帳號的註解說明。</font><br> <table width="70%" border="0">
        <tr> 
          <td height="22" bgcolor="#CCCCCC"><font color="#000000">suse:~ # <strong>useradd 
            -c &quot;barry chen&quot; -m user7</strong></font></td>
        </tr>
      </table></td>
  </tr>
  <tr> 
    <td align="center" nowrap><font color="#000099"><strong>-u</strong></font></td>
    <td><font color="#000099">同於 --uid ﹔指定使用者 ID，指定前，最好先確認目前沒有任何帳號使用這個 ID number。<br>
      未使用此參數，則套用 /etc/login.defs 所設定的範圍 ( 1000~60000)。</font><br> <table width="70%" border="0">
        <tr> 
          <td height="22" bgcolor="#CCCCCC"><font color="#000000">suse:~ # <strong>useradd 
            -u 2020 -m user8</strong></font></td>
        </tr>
      </table></td>
  </tr>
  <tr> 
    <td align="center" nowrap><font color="#000099"><strong>-o</strong></font></td>
    <td><font color="#000099">同於 --non-unique ﹔這個參數可允許您幫使用者建立一個重複的 ID。<br>
      </font> <table width="70%" border="0">
        <tr> 
          <td height="22" bgcolor="#CCCCCC"><font color="#000000">suse:~ # <strong>useradd 
            -ou 2020 -m user9</strong></font></td>
        </tr>
      </table></td>
  </tr>
  <tr> 
    <td align="center" nowrap><font color="#000099"><strong>-r</strong></font></td>
    <td><font color="#000099">同於 --system ﹔建立系統帳號 (system account) 時需使用的參數。<br>
      另外系統帳號的 ID 是套用 /etc/login.defs 所設定的範圍 ( 100~499 )。</font><br> <table width="70%" border="0">
        <tr> 
          <td height="23" bgcolor="#CCCCCC"><font color="#000000">suse:~ # <strong>useradd 
            -rg sysgroup sysuser</strong></font></td>
        </tr>
      </table></td>
  </tr>
  <tr> 
    <td align="center" nowrap><font color="#000099"><strong>-k</strong></font></td>
    <td><font color="#000099">同於 --skel ﹔指定另一個目錄來替代原本的 /etc/skel。</font><br> <table width="70%" border="0">
        <tr> 
          <td height="23" bgcolor="#CCCCCC"><font color="#000000">suse:~# <strong>useradd 
            -k /etc/skeltest -m user10</strong></font></td>
        </tr>
      </table></td>
  </tr>
</table>
<strong><br>
</strong>　當您成功建立起使用者帳號後，記得用 passwd 指令替使用者建立密碼：<br>
<br>
<table width="100%" border="0">
  <tr> 
    <td bgcolor="#000000"><font color="#FFFFFF">suse:~ #<font color="#FFFF00"><strong> 
      passwd barry</strong></font><br>
      Changing password for tina.<br>
      New password:<br>
      Retype new password:<br>
      Password changed.<br>
      suse:~ # </font></td>
  </tr>
</table>
<br>
　舉個範例來練習好了，比方管理者現在要新增一使用者 tom，其全名為 michael chen，並指定其家目錄位置是在 /homedir 之中，UID 是 
2000，預設所使用的 shell 為 ksh，帳號期限為 2007-12-31： <br>
<br>
<table width="100%" border="0">
  <tr> 
    <td bgcolor="#000000"><font color="#FFFFFF">suse:~ #<font color="#FFFF00"> 
      <strong>useradd -c &quot;michael chen&quot; -d /homedir/tom -u 2000 -s /bin/ksh 
      \</strong></font><br>
      &gt;<font color="#FFFF00"><strong> -e 2007-12-31 -m tom</strong></font><br>
      <br>
      suse:~ # <font color="#FFFF00"><strong>passwd tom</strong></font><br>
      Changing password for tom. <br>
      New password:<br>
      Retype new password:<br>
      Password changed.<br>
      suse:~ # </font></td>
  </tr>
</table>
<br>
　完成後，趕快從另一個終端機用 tom 來登入系統，看看能否成功。<br>
<br>
<strong><font size="+1"><a name="10"></a></font><font color="#FF0000"><font color="#0000FF"><font color="#000000"><img src="1775.gif" tppabs="http://www.suse.url.tw/picture/1775.gif" width="18" height="18"></font></font></font> 
<font size="4">指令 </font><font size="+1">userdel</font></strong><br>
<br>
　刪除使用者帳號的指令。如果您要連同使用者的家目錄一併刪除，可加上 <font color="#0000FF">-r</font><strong> </strong>(--remove-home) 
參數。<br>
<br>
<strong>範例說明</strong>：<br>
<table width="100%" border="0">
  <tr> 
    <td bgcolor="#000000"><font color="#FFFFFF">suse:~ # <font color="#FFFF00"><strong>userdel 
      tina</strong></font><br>
      suse:~ #<strong> <font color="#FFFF00">ls /home</font></strong><br>
      <font color="#0099FF">barry　tom　tina<br>
      <font color="#00FFFF"># </font></font><font color="#00FFFF" size="2">tina 
      家目錄並沒有移除</font> <br>
      <br>
      suse:~ #<font color="#FFFF00"> <strong>userdel -r tom</strong><br>
      </font><font color="#FFFFFF">suse:~ #<strong> <font color="#FFFF00">ls /home</font></strong></font><br>
      <font color="#0099FF">barry　tina</font> <font color="#FFFFFF"><br>
      <font color="#0099FF"> <font color="#00FFFF"># 
      </font></font></font><font color="#00FFFF" size="2">tom 
      家目錄已被一併移除。</font></font></td>
  </tr>
</table>
<br>
<font color="#000000"><strong><font size="+1"><a name="11"></a></font><font color="#FF0000"><font color="#0000FF"><font color="#000000"><img src="1775.gif" tppabs="http://www.suse.url.tw/picture/1775.gif" width="18" height="18"></font></font></font></strong></font><font size="+1"><strong> 
<font size="4">指令</font> usermod</strong></font><br>
<br>
　修改使用者帳號的指令。<br>
<br>
<strong>指令語法</strong>：<br>
<table width="100%" bgcolor="#CCCCCC">
  <tr> 
    <td height="40"><strong>usermod [-c comment] [-d homedir] [-e expire] [-G 
      group,...] [-g gid] <br>
      　　　　[-m] [-o] [-L] [-U] [-u uid] [-s shell] account<br>
      usermod -l newaccount account</strong></td>
  </tr>
</table>
<br>
<strong>參數說明</strong>：<br>
<table width="100%" border="1">
  <tr> 
    <td width="7%" align="center" valign="middle"><font color="#000099">-c</font></td>
    <td width="93%"><font color="#000099">同於 --comment ﹔修改帳號的註解說明。</font></td>
  </tr>
  <tr> 
    <td align="center" valign="middle"><font color="#000099">-d</font></td>
    <td><font color="#000099">同於 --home ﹔修改使用者的家目錄。</font></td>
  </tr>
  <tr> 
    <td align="center" valign="middle"><font color="#000099">-e</font></td>
    <td><font color="#000099">同於 --expire ﹔修改帳號期限。</font></td>
  </tr>
  <tr> 
    <td align="center" valign="middle"><font color="#000099">-G</font></td>
    <td><font color="#000099">同於 --groups ﹔修改使用者的次要群組。</font></td>
  </tr>
  <tr> 
    <td align="center" valign="middle"><font color="#000099">-g</font></td>
    <td><font color="#000099">同於 --gid ﹔修改使用者的主要群組。</font></td>
  </tr>
  <tr> 
    <td align="center" valign="middle"><font color="#000099">-l</font></td>
    <td><font color="#000099">同於 --login ﹔修改使用者的帳號名稱。</font></td>
  </tr>
  <tr> 
    <td align="center" valign="middle"><font color="#000099">-m</font></td>
    <td><font color="#000099">同於 --move_home ﹔將使用者原本的家目錄移動至 -d 參數所指定之新的家目錄。</font></td>
  </tr>
  <tr> 
    <td align="center" valign="middle"><font color="#000099">-o</font></td>
    <td><font color="#000099"> 同於 --non-unique ﹔允許將使用者 ID 修改成重複的 ID。</font></td>
  </tr>
  <tr> 
    <td align="center" valign="middle"><font color="#000099">-s</font></td>
    <td><font color="#000099">同於 --shell ﹔修改使用者的 login shell。</font></td>
  </tr>
  <tr> 
    <td align="center" valign="middle"><font color="#000099">-u</font></td>
    <td><font color="#000099">同於 --uid ﹔修改使用者的 UID。</font></td>
  </tr>
  <tr> 
    <td align="center" valign="middle"><font color="#000099">-L</font></td>
    <td><font color="#000099">同於 --lock ﹔鎖住使用者帳號，使其暫時無法登入。此時 shadow 檔中的密碼欄位前面會多個 
      &quot;!&quot;。</font></td>
  </tr>
  <tr> 
    <td align="center" valign="middle"><font color="#000099">-U</font></td>
    <td><font color="#000099"> 同於 --unlock ﹔解除被鎖住的使用者帳號。此時 shadow 檔案中密碼欄位前的 &quot;!&quot; 
      會被移除。</font></td>
  </tr>
</table>
<br>
<strong>範例說明</strong>：<br>
<table width="100%" border="0">
  <tr> 
    <td bgcolor="#000000"><font color="#FFFFFF">suse:~ # <font color="#FFFF00"><strong>usermod 
      -l michael tom</strong></font><br>
      <font color="#00FFFF"># </font><font color="#00FFFF" size="2">將 tom 的 username 
      修改成 michael。</font><br>
      <br>
      suse:~ # <font color="#FFFF00"><strong>usermod -G root barry</strong></font><br>
      <font color="#00FFFF"># </font><font color="#00FFFF" size="2">將 barry 加入 
      root 群組中。完成後請到 /etc/group 裡檢查一下，看看 root 群組</font><br>
      <font color="#00FFFF"># </font><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#00FFFF" size="2">的第四欄位</font></font><font color="#00FFFF" size="2">有沒有</font></font><font color="#00FFFF" size="2">多個 
      barry。</font></font><font color="#00FFFF" size="2">當然您也可以使用 vi 來編輯 /etc/group，直接將 
      </font><br>
      <font color="#00FFFF"># </font> <font color="#FFFFFF"><font color="#FFFFFF"><font color="#00FFFF" size="2">barry 
      加入即可。</font></font><font color="#00FFFF" size="2">當使用指令的方式來修改</font></font><font color="#00FFFF" size="2">時，如原本 
      barry 為多個次要群組成員，<br>
      </font><font color="#FFFFFF"><font color="#00FFFF"># </font> </font><font color="#FFFFFF"><font color="#00FFFF" size="2">此時就會被修改成</font></font><font color="#00FFFF" size="2">只有 
      root 這麼一個次要群組而已。</font><br>
      </font> <font color="#FFFFFF"><br>
      suse:~ # <font color="#FFFF00"><strong>usermod -g grp -u 5500 -e 2007-10-31 
      barry</strong></font><br>
      <font color="#00FFFF"># </font> <font color="#00FFFF" size="2">將使用者 barry 
      的主要群組改成 grp，UID 改成 5500，帳號期限改成 2007 年十月三十一日。</font><br>
      <br>
      suse:~ # <font color="#FFFF00"><strong>usermod -d /newhome/barry -m barry</strong></font><br>
      <font color="#00FFFF"># </font><font color="#00FFFF" size="2">修改 barry 家目錄為 
      /newhome/barry，並從原本的 /home/barry 移動至 /newhome/barry。 <br>
      <br>
      </font><font color="#FFFFFF">suse:~ # <font color="#FFFF00"><strong>usermod 
      -L user1<br>
      </strong></font><font color="#FFFFFF"><font color="#00FFFF"># </font></font><font color="#00FFFF" size="2">將 
      user1 的帳號鎖住。</font><br>
      <font color="#FFFF00"><strong><br>
      </strong></font><font color="#FFFFFF"><font color="#FFFFFF">suse:~ # <font color="#FFFF00"><strong>usermod 
      -U user1</strong></font></font></font><font color="#FFFF00"><strong> <br>
      </strong></font><font color="#FFFFFF"><font color="#00FFFF"># </font><font color="#00FFFF" size="2">解除被鎖住的 
      user1 帳號。</font></font></font></font></td>
  </tr>
</table>
<font color="#FF0000"><br>
<font color="#000000"><strong><font size="+1"><a name="12"></a></font><font color="#000000"><strong><font color="#FF0000"><font color="#0000FF"><font color="#000000"><img src="1775.gif" tppabs="http://www.suse.url.tw/picture/1775.gif" width="18" height="18"></font></font></font></strong></font></strong></font></font><font size="+1"><strong> 
指令 groupadd</strong></font><br>
<br>
　這是新增群組的指令。<br>
<br>
<strong>指令語法</strong>：<br>
<table width="100%" border="0" bordercolor="#CCCCCC" bgcolor="#CCCCCC">
  <tr> 
    <td height="23"><strong>groupadd [-g gid [-o]] [-r] groupname</strong></td>
  </tr>
</table>
<br>
<strong>參數說明</strong>：<br>
<table width="100%" border="1">
  <tr> 
    <td width="6%" align="center" valign="middle" nowrap><font color="#000099">-g</font></td>
    <td width="94%" nowrap><font color="#000099">同於 --gid ﹔指定群組 ID。<br>
      未使用此參數，則套用 /etc/login.defs 所設定的範圍 ( 1000~60000 )。</font></td>
  </tr>
  <tr> 
    <td align="center" valign="middle" nowrap><font color="#000099">-o</font></td>
    <td><font color="#000099"> 同於 --non-unique ﹔允許使用重複的 GID。</font></td>
  </tr>
  <tr> 
    <td align="center" valign="middle" nowrap><font color="#000099">-r</font></td>
    <td><font color="#000099">同於 --system ﹔建立系統的群組。<br>
      未使用此參數，則套用 /etc/login.defs 所設定的範圍 ( 100~499 )。 </font></td>
  </tr>
</table>
<br>
<strong>範例說明</strong>：<br>
<table width="100%" border="0">
  <tr> 
    <td bgcolor="#000000"><font color="#FFFFFF">suse:~ #<font color="#FFFF00"> 
      <strong>groupadd group01</strong></font><br>
      <font color="#00FFFF"># </font><font color="#00FFFF" size="2">新增 group01 
      群組。</font><br>
      <br>
      suse:~ # <font color="#FFFF00"><strong>groupadd -g 3000 group02</strong></font><br>
      <font color="#00FFFF"># </font> <font color="#00FFFF" size="2">新增第二個群組 group02，其 
      GID 指定為 3000。</font><br>
      <br>
      suse:~ #<font color="#FFFF00"> <strong>cat /etc/group</strong></font> <strong><font color="#FFFF00">| 
      grep group</font></strong><br>
      <font face="細明體">group01:!:1000:<br>
      group02:!:3000: </font></font></td>
  </tr>
</table>
<font color="#FF0000"><br>
<font color="#000000" size="+1"><strong><a name="13"></a><font color="#FF0000"><font color="#000000"><strong><font color="#000000"><strong><font color="#FF0000"><font color="#0000FF"><font color="#000000"><img src="1775.gif" tppabs="http://www.suse.url.tw/picture/1775.gif" width="18" height="18"></font></font></font></strong></font></strong></font></font> 
指令</strong></font> <font color="#000000" size="+1"><strong>groupmod</strong></font></font><br>
<br>
　修改群組紀錄的指令。<br>
<br>
<strong>指令語法</strong>：<br>
<table width="100%" border="0" bordercolor="#CCCCCC" bgcolor="#CCCCCC">
  <tr> 
    <td height="23"><strong><font face="細明體">groupmod [-g gid [-o]] [-A user] 
      group</font></strong></td>
  </tr>
</table>
<br>
<strong>參數說明</strong>：<br>
<table width="100%" border="1">
  <tr> 
    <td width="6%" align="center" valign="middle" nowrap><font color="#000099">-g</font></td>
    <td width="94%" nowrap><font color="#000099">同於 --gid ﹔修改群組 ID。</font></td>
  </tr>
  <tr> 
    <td align="center" valign="middle" nowrap><font color="#000099">-o</font></td>
    <td><font color="#000099"> 同於 --non-unique ﹔允許修改成重複的 GID。</font></td>
  </tr>
  <tr> 
    <td align="center" valign="middle" nowrap><font color="#000099">-A</font></td>
    <td><font color="#000099">同於 --add-user ﹔將使用者帳號加入群組之中。</font></td>
  </tr>
</table>
<br>
<strong>範例說明</strong>：(延續上個設定範例)<br>
<table width="100%" border="0">
  <tr> 
    <td bgcolor="#000000"><p><font color="#FFFFFF">suse:~ #<strong> <font color="#FFFF00">groupmod 
        -g 5000 group01</font></strong><br>
        <font color="#00FFFF"># </font><font color="#00FFFF" size="2">將 
        group01 的 GID 修改成 5000。</font><font color="#00FFFF"><br>
        </font><br>
        suse:~ # <font color="#FFFF00"><strong>cat /etc/group</strong></font></font> 
        <strong><font color="#FFFF00">| grep group</font></strong><font color="#FFFFFF"><br>
        <font face="細明體">group01:!:5000:<br>
        group02:!:3000:</font><br>
        <font color="#00FFFF"># </font><font color="#00FFFF" size="2">修改後的結果。</font><br>
        <br>
        suse:~ #<strong> <font color="#FFFF00">groupmod -A barry,mary group01<br>
        </font></strong><font color="#FFFFFF"><font color="#00FFFF"># </font><font color="#FFFF00"><font color="#00FFFF" size="2">把使用者&nbsp;barry 
        及 mary</font></font></font><font color="#00FFFF" size="2"> 加入 group01 
        群組中。</font><font color="#FFFF00"><br>
        <br>
        <font color="#FFFFFF">suse:~ #</font><strong> cat /etc/group | grep group01</strong><br>
        <font color="#FFFFFF">group01 : ! : 5000 : <font color="#FFFF00">barry,mary</font></font> 
        <br>
        </font><font color="#FFFFFF"><font color="#00FFFF"># </font></font><font color="#00FFFF" size="2">瞧，最後面多了兩個 
        user 了。</font></font><font color="#00FFFF"><br>
        <br>
        <font color="#FFFFFF">suse:~ # <font color="#FFFF00"><strong>usermod -g 
        group02 barry<br>
        </strong></font><font color="#FFFFFF"><font color="#00FFFF"># </font></font><font color="#00FFFF"><font size="2">把 
        </font><font color="#00FFFF" size="2"> barry 的主要群組修改成 group02。</font></font><br>
        <br>
        suse:~ # <font color="#FFFF00"><strong>cat /etc/passwd | grep barry</strong></font><br>
        barry : x : 1000 : <font color="#FFFF00">3000</font> : : /home/barry : 
        /bin/bash<br>
        <font color="#00FFFF"># </font><font color="#00FFFF" size="2">barry 帳號的 
        GID 欄位已改成 GID 3000 (group02) 了。</font></font><br>
        </font></p></td>
  </tr>
</table>
<strong><br>
</strong><font color="#FF0000"> <font color="#000000" size="+1"><strong><a name="14"></a></strong><font color="#FF0000"><strong><font color="#FF0000"><font color="#000000"><strong><font color="#000000"><strong><font color="#FF0000"><font color="#0000FF"><font color="#000000"><img src="1775.gif" tppabs="http://www.suse.url.tw/picture/1775.gif" width="18" height="18"></font></font></font></strong></font></strong></font></font><font color="#000000">指令</font></strong></font></font> 
<font color="#000000" size="+1"><strong>groupdel</strong></font></font><br>
<br>
　刪除群組紀錄的指令。<strong><br>
<br>
範例說明</strong>：(延續上個設定範例)<br>
<table width="100%" border="0">
  <tr> 
    <td bgcolor="#000000"><font color="#FFFFFF">suse:~ # <font color="#FFFF00"><strong>groupdel 
      group01</strong></font><br>
      <font color="#00FFFF"><font color="#00FFFF"># 
      </font></font><font color="#00FFFF"><font size="2">刪除 
      group01 群組。</font></font><br>
      <br>
      suse:~ #<strong> <font color="#FFFF00">groupdel group02</font></strong><font color="#FFFF00"><br>
      </font><font color="#FFFFFF"> groupdel: GID `3000' is primary group of `barry'.<br>
      groupdel: Cannot remove user's primary group.</font><font color="#FFFF00"> 
      <br>
      </font><font color="#00FFFF"><font color="#FFFFFF"><font color="#00FFFF"># 
      </font><font color="#FFFF00"><font color="#00FFFF" size="2">如果所要刪除的群組，是屬於某個使用者的主要群組，那麼此群組將無法被刪除。</font></font></font></font></font></td>
  </tr>
</table>
<br>
<a name="55"></a><img src="1775.gif" tppabs="http://www.suse.url.tw/picture/1775.gif" width="18" height="18"> <font size="+1"><strong>指令 
id、groups</strong></font><br>
<br>
　平常在查詢使用者 ID 相關資訊及其所屬群組時，可能會到 /etc/passwd 與 /etc/group 去查看，不過現在不用那麼辛苦了，因為只要使用 
id 及 groups 指令，即可迅速取得您要查詢的資料。<br>
<br>
<strong>範例說明</strong>：<br>
<table width="100%" border="0">
  <tr> 
    <td bgcolor="#000000"> <font color="#FFFFFF"><font color="#00FFFF"> <font color="#FFFFFF">tina@suse:~&gt;<font color="#FFFF00"> 
      <strong>id</strong></font><br>
      uid=1003(tina) gid=100(users) groups=16(dialout),33(video),100(users)<br>
      <font color="#00FFFF"><font color="#FFFFFF"><font color="#00FFFF"># </font><font color="#00FFFF" size="2">直接執行 
      id 指令，可以顯示使用者本身 UID、GID<font color="#FFFFFF"><font color="#00FFFF">、</font></font>groupname 
      等資訊。</font></font></font><br>
      </font></font></font> <font color="#FFFFFF"><font color="#00FFFF"><font color="#FFFFFF"><br>
      suse:~ #<strong> <font color="#FFFF00"> id tina</font></strong><br>
      <font color="#FFFFFF">uid=1003(tina) 
      gid=100(users) groups=16(dialout),33(video),100(users)</font></font><br>
      <font color="#FFFFFF"><font color="#00FFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#00FFFF"># 
      </font></font></font></font><font color="#00FFFF" size="2">以 
      root 身分來查詢使用者 tina 的 ID 資訊。</font></font><br>
      </font></font> <font color="#FFFFFF"><font color="#00FFFF"> <br>
      <font color="#FFFFFF"><font color="#FFFFFF">tina@suse:~&gt;<font color="#FFFF00"> 
      <strong>groups</strong> </font></font></font><br>
      <font color="#FFFFFF">users dialout video</font><br>
      <font color="#FFFFFF"><font color="#FFFFFF"><font color="#00FFFF"><font color="#FFFFFF"><font color="#00FFFF"># 
      </font></font></font></font></font><font size="2">查詢 tina 本身的群組資訊。最左邊所出現的第一個群組為 
      tina 的有效群組</font><br>
      <font color="#FFFFFF"><font color="#00FFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#00FFFF"># 
      </font></font></font></font></font></font></font><font color="#FFFFFF"><font color="#00FFFF"><font size="2">(effective 
      group)</font>，</font></font><font color="#00FFFF" size="2">而 primary group 
      及 effective group 的差別，請參考 [註一]</font><font color="#00FFFF">。<br>
      <br>
      <font color="#FFFFFF">suse:~ # <font color="#FFFF00"><strong>groups tina</strong></font><br>
      tina : users group02</font><br>
      <font color="#FFFFFF"><font color="#00FFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#00FFFF"># 
      </font></font></font></font></font></font></font><font color="#00FFFF" size="2">使用 
      root 身分查看 tina 的群組資訊。</font></font></td>
  </tr>
</table>
<font color="#FF0000"><br>
</font> 
<table width="100%" border="0">
  <tr> 
    <td bgcolor="#CCCCCC"> <p><strong>註一</strong>：<strong>主要群組與有效群組</strong><br>
        　使用者在 /etc/passwd 裡的 GID，是屬於主要群組的 GID，在使用者登入系統後未執行 newgrp 以前，則其有效群組就是主要群組，亦即該使用者所建立的任何檔案目錄，其擁有群組為這個有效群組。</p>
      <p>　假使該使用者的主要群組為 grp1，同時也屬於 grp2 群組的成員，則在使用者執行 &quot;<font color="#0000FF">newgrp 
        grp2</font>&quot; 之後，其有效群組會變成 grp2，此時使用者所建立的資料，其擁有群組就是 grp2 這個有效群組了。<br>
        <br>
        　當執行 &quot;newgrp grp2&quot; 之後，會開啟另一個新的 shell 來取代現在這個 shell，也就是說使用者在新的 
        shell 下的有效群組是 grp2，如果此時執行 exit 指令來回到原先的 shell，那有效群組就改回原來的主要群組 grp1 了。<br>
      </p></td>
  </tr>
</table>
<font color="#FF0000"> <br>
<font color="#000000" size="+1"><strong><a name="15"></a><font size="+1"><img src="1775.gif" tppabs="http://www.suse.url.tw/picture/1775.gif" width="18" height="18"></font> 
</strong></font><font size="+1"><strong><font color="#000000">指令</font></strong></font> 
<font color="#000000" size="+1"><strong>passwd</strong></font></font><br>
<br>
　變更使用者密碼及密碼相關設定的指令。管理者可以變更所有帳號的密碼，而一般使用者則只能變更自己的密碼。<br>
<br>
　在執行 passwd 指令時，如其後未接任何的參數或引數，即是在改變使用者自己的密碼，請參考以下範例： <br>
<br>
<table width="100%" border="0">
  <tr> 
    <td bgcolor="#000000"><font color="#FFFFFF">barry@suse:~&gt; <font color="#FFFF00"> 
      <strong>passwd</strong></font><br>
      <font face="細明體">Changing password for barry<br>
      Old Password:<font color="#00FFFF" size="2">　← 先輸入舊密碼</font>　<br>
      New password:<font color="#00FFFF" size="2">　← 然後輸入新密碼</font><br>
      Retype new password:<font color="#00FFFF" size="2">　← 再次輸入新密碼</font><br>
      Password changed.</font></font></td>
  </tr>
</table>
<br>
　<font color="#FFFFFF"><font color="#000000">如果您所輸入的新密碼長度過少或太過於簡單，都無法改變成功，可自行試試看。</font></font><br>
<br>
<strong>參數說明</strong>：<br>
<table width="100%" border="1">
  <tr> 
    <td align="center" valign="middle"><font color="#000099">-g</font></td>
    <td><font color="#000099">變更群組密碼，其後接群組名稱。</font></td>
  </tr>
  <tr> 
    <td align="center" valign="middle"><font color="#000099">-s</font></td>
    <td><font color="#000099">改變登入 shell。一般使用者只能變更自己的&nbsp; login shell，而管理者則可變更所有使用者的 
      login shell。</font></td>
  </tr>
  <tr> 
    <td align="center" valign="middle"><font color="#000099">-n</font></td>
    <td><font color="#000099">在密碼變更過後，使用者最少要經過幾天才能再修改密碼。設定成 0，表示隨時可變更密碼。</font></td>
  </tr>
  <tr> 
    <td align="center" valign="middle"><font color="#000099">-x</font></td>
    <td><font color="#000099">設定使用者密碼最大期限的天數。如此可要求使用者於期限內，必須要做變更密碼的動作。</font></td>
  </tr>
  <tr> 
    <td align="center" valign="middle"><font color="#000099">-w</font></td>
    <td><font color="#000099">設定要變更密碼的警告天數。比如設定 5 天，就表示在密碼期限到期前的五天內登入系統時，會提示您密碼還有幾天就要到期了。</font></td>
  </tr>
  <tr> 
    <td align="center" valign="middle"><font color="#000099">-i</font></td>
    <td><font color="#000099">設定密碼的寬限天數。比如設定成 3 天，表示密碼期限到期後的三天內登入系統時，會要求您做變更密碼的動作 
      ﹔設定成 -1，表示無寬限天數的限制，亦即於密碼期限到期後的任何一天登入系統時，會要求您變更密碼，而變更成功後的那一天，就是您密碼最後改變日期 
      ﹔ 設定成 0，表示密碼期限到期後就無法再登入系統了，此時在螢幕上會看到 &quot;User account has expired&quot; 
      這個訊息，這時候就只能跟您管理員做反應了。</font></td>
  </tr>
  <tr> 
    <td width="7%" align="center" valign="middle"><font color="#000099">-l</font></td>
    <td width="93%"><font color="#000099">鎖住使用者帳號，使其暫時無法登入系統。</font></td>
  </tr>
  <tr> 
    <td align="center" valign="middle"><font color="#000099">-u</font></td>
    <td><font color="#000099">解除被鎖住的帳號。</font></td>
  </tr>
  <tr> 
    <td align="center" valign="middle"><font color="#000099">-d</font></td>
    <td><font color="#000099">刪除使用者密碼。</font></td>
  </tr>
  <tr> 
    <td align="center" valign="middle"><font color="#000099">-S</font></td>
    <td><font color="#000099">回報密碼相關資訊。</font></td>
  </tr>
  <tr> 
    <td align="center" valign="middle"><font color="#000099">-e</font></td>
    <td><font color="#000099"> 使用這個參數，會強迫使用者下次登入時變更密碼。</font></td>
  </tr>
</table>
<strong><br>
範例說明：<br>
</strong> 
<table width="100%" border="0" bgcolor="#000000">
  <tr> 
    <td><p><font color="#FFFFFF">barry@suse:~&gt; <strong><font color="#FFFF00">passwd 
        -s</font></strong><br>
        Changing login shell for barry.<br>
        Password: <font color="#00FFFF" size="2">← 輸入 barry 密碼</font><br>
        Enter the new value, or press return for the default.<br>
        Login Shell [/bin/bash]: <font color="#FFFF00"><strong>/bin/csh</strong></font><font color="#00FFFF" size="2"> 
        ← 修改 login shell</font><br>
        Shell changed.<br>
        <font color="#00FFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#00FFFF"><font color="#FFFFFF"><font color="#00FFFF"># 
        </font></font></font></font></font></font><font color="#00FFFF" size="2">這是使用者變更自己的 
        login shell，如以 root 身分變更使用者的 shell，請執行</font><br>
        <font color="#00FFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#00FFFF"><font color="#FFFFFF"><font color="#00FFFF"># 
        </font></font></font></font></font></font> <font color="#00FFFF" size="2">&quot;passwd 
        -s username&quot;。</font></font></p>
      <p><font color="#FFFFFF">suse:~ # <font color="#FFFF00"><strong>passwd </strong><font color="#FFFFFF"><strong>-n 
        3</strong></font></font> <font color="#FFFF00"><strong>-x 30 -w 7 -i 5 
        barry</strong></font><br>
        Password expiry information changed.<br>
        <font color="#00FFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#00FFFF"><font color="#FFFFFF"><font color="#00FFFF"># 
        </font></font></font></font></font></font> <font color="#00FFFF" size="2">這是設定 
        barry 密碼於最後一次變更後，最少要三天後才可再變更，且 30 天內需要改變自己的</font><br>
        <font color="#00FFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#00FFFF"><font color="#FFFFFF"><font color="#00FFFF"># 
        </font></font></font></font></font></font> <font color="#FFFFFF"><font color="#00FFFF" size="2">密碼，</font></font><font color="#00FFFF" size="2">另於密碼期限到期前的七天內登入系統時，會提示警告訊息，至於密碼寬限期為五天。</font> 
        <br>
        <br>
        suse:~ #<strong> <font color="#FFFF00">passwd -S barry</font></strong><br>
        <font face="細明體"> barry PS 12/26/2006 3 30 7 5</font></font> <br>
        <font color="#FFFFFF"><font color="#00FFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#00FFFF"><font color="#FFFFFF"><font color="#00FFFF"># 
        </font></font></font></font></font></font> </font><font color="#00FFFF" size="2">第二欄位的 
        PS 表示密碼存在，如該欄位出現 LK，表示該帳號被鎖住，<font color="#FFFFFF"><font color="#00FFFF">出現 
        NP 表示</font></font></font><br>
        <font color="#FFFFFF"><font color="#00FFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#00FFFF"><font color="#FFFFFF"><font color="#00FFFF"># 
        </font></font></font></font></font></font> <font color="#00FFFF" size="2"><font color="#00FFFF" size="2"><font color="#FFFFFF"><font color="#00FFFF">沒有密碼</font></font></font> 
        <font color="#00FFFF">(No Password)，意即 shadow 檔中的密碼欄位是空的。</font></font></font><br>
        <font color="#FFFFFF"><font color="#00FFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#00FFFF"><font color="#FFFFFF"><font color="#00FFFF"># 
        </font></font></font></font></font></font> </font><font color="#00FFFF" size="2">第三欄位是密碼最後變更的日期。</font><br>
        <font color="#FFFFFF"><font color="#00FFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#00FFFF"><font color="#FFFFFF"><font color="#00FFFF"># 
        </font><font color="#FFFFFF"><font color="#00FFFF" size="2">最後面四組數字分別為剛剛使用 
        -n、-x、-w、-i 參數所指定的天數。 </font></font></font></font></font></font></font> 
        </font></p>
      <p><font color="#FFFFFF">suse:~ # <font color="#FFFF00"><strong>passwd -l 
        barry</strong></font><br>
        <font color="#00FFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#00FFFF"><font color="#FFFFFF"><font color="#00FFFF"># 
        </font></font></font></font></font></font><font color="#00FFFF" size="2">鎖住使用者 
        barry 的帳號，使其暫時無法登入。</font><br>
        <br>
        suse:~ # <font color="#FFFF00"><strong>passwd -u barry</strong></font> 
        <br>
        <font color="#00FFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#00FFFF"><font color="#FFFFFF"><font color="#00FFFF"># 
        </font></font></font></font></font></font><font color="#00FFFF" size="2">解除被鎖住的 
        barry 帳號。</font></font></p>
      <p><font color="#FFFFFF">suse:~ #<strong> <font color="#FFFF00">passwd -e 
        barry</font></strong><br>
        <font color="#00FFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#00FFFF"><font color="#FFFFFF"><font color="#00FFFF"># 
        </font></font></font></font></font></font><font color="#00FFFF" size="2">強迫使用者 
        barry 在下次登入時要變更密碼。 </font></font></p></td>
  </tr>
</table>
<br>
<font color="#000000" size="+1"><strong><a name="16"></a><font color="#FF0000"><font color="#000000" size="+1"><strong><font size="+1"><img src="1775.gif" tppabs="http://www.suse.url.tw/picture/1775.gif" width="18" height="18"></font></strong></font></font> 
指令 gpasswd</strong></font><br>
<br>
　這是變更群組密碼的指令。在說明 /etc/group 的密碼欄位時有提過，設定群組密碼的目的，是為了讓非群組成員的使用者能以此群組作為其有效群組，以取得與此群組相同的存取權限，因此當這個使用者執行 
&quot;newgrp groupname&quot; 時，就會要求您輸入群組密碼。當然如果您本身是屬於此群組成員，那執行 newgrp 時，就不需輸入群組密碼了。<br>
<br>
<strong>指令語法</strong>：<br>
<table width="100%" border="0" bgcolor="#CCCCCC">
  <tr> 
    <td><strong>gpasswd [-r] [group]</strong></td>
  </tr>
</table>
<br>
<strong>參數說明</strong>：<br>
<table width="100%" border="1">
  <tr> 
    <td width="7%" height="20" align="center"><font color="#000099">-r</font></td>
    <td width="93%"><font color="#000099">移除群組密碼。</font></td>
  </tr>
</table>
<br>
<strong>範例說明</strong>：<br>
<table width="100%" border="0">
  <tr> 
    <td bgcolor="#000000"><font color="#FFFFFF">suse:~ # <font color="#FFFF00"><strong>groupadd 
      grp01</strong></font><br>
      suse:~ #<font color="#FFFF00"><strong> gpasswd grp01</strong></font><br>
      Changing the password for group grp01.<br>
      New Password:<br>
      Re-enter new password:<br>
      Password changed.<br>
      <font color="#FFFFFF"><font color="#00FFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#00FFFF"><font color="#FFFFFF"><font color="#00FFFF"># 
      </font></font></font></font></font></font></font><font color="#00FFFF" size="2">為群組 
      grp01 設立密碼。</font><br>
      <font color="#00FFFF"><br>
      </font><font color="#FFFFFF">suse:~ #</font> <font color="#FFFF00"><strong>gpasswd 
      -r grp01</strong></font><br>
      <font color="#FFFFFF"><font color="#00FFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#00FFFF"><font color="#FFFFFF"><font color="#00FFFF"># 
      </font></font></font></font></font></font></font><font color="#00FFFF" size="2">移除群組密碼。</font> 
      </font></td>
  </tr>
</table>
<font color="#FF0000"><br>
<font color="#000000" size="+1"><strong><a name="17"></a><font color="#000000" size="+1"><strong><font color="#FF0000"><font color="#000000" size="+1"><strong><font size="+1"><img src="1775.gif" tppabs="http://www.suse.url.tw/picture/1775.gif" width="18" height="18"></font></strong></font></font></strong></font> 
指令 chage</strong></font></font><br>
<br>
　可用來修改使用者密碼期限相關資訊的指令。<br>
<br>
<strong>指令語法</strong>：<br>
<table width="100%" bgcolor="#CCCCCC">
  <tr> 
    <td><strong>chage [-m mindays] [-M maxdays] [-d lastday] [-I inactive]<br>
      　　　[-E expiredate] [-W warndays] user</strong><br> <strong>chage -l [user]</strong></td>
  </tr>
</table>
<br>
<strong>參數說明</strong>：<br>
<table width="100%" border="1">
  <tr> 
    <td width="7%" height="21" align="center"><font color="#000099">-m</font></td>
    <td width="93%"><font color="#000099">在密碼變更過後，使用者最少要經過幾天才能再修改密碼。</font></td>
  </tr>
  <tr> 
    <td align="center"><font color="#000099">-M</font></td>
    <td><font color="#000099">設定使用者密碼最大期限的天數。</font></td>
  </tr>
  <tr> 
    <td align="center"><font color="#000099">-d</font></td>
    <td><font color="#000099">設定最後變更密碼的日期，時間格式為 YYYY-MM-DD。</font></td>
  </tr>
  <tr> 
    <td align="center"><font color="#000099">-I</font></td>
    <td><font color="#000099">密碼期限到期後所能寬限的天數。</font></td>
  </tr>
  <tr> 
    <td align="center"><font color="#000099">-W</font></td>
    <td><font color="#000099">設定要變更密碼的警告天數。</font></td>
  </tr>
  <tr> 
    <td align="center"><font color="#000099">-E</font></td>
    <td><font color="#000099">設定帳號期限，格式為 YYYY-MM-DD。</font></td>
  </tr>
  <tr> 
    <td align="center"><font color="#000099">-l</font></td>
    <td><font color="#000099">顯示使用者帳號密碼期限的相關訊息。</font></td>
  </tr>
</table>
<br>
<strong>範例說明</strong>：<br>
<table width="100%" border="0">
  <tr> 
    <td bgcolor="#000000"><font color="#FFFFFF">suse:~ # <strong><font color="#FFFF00">chage 
      -d 2006-12-25 -m 3 -M 60 -I 5 -W 7 -E 2007-12-31 barry</font></strong><br>
      Aging information changed.<br>
      <br>
      suse:~ #<strong> <font color="#FFFF00">chage -l barry</font></strong><br>
      <font face="細明體">Minimum: 　　　3<br>
      Maximum: 　　　60<br>
      Warning: 　　　7<br>
      Inactive: 　　 5<br>
      Last Change: 　　　　　Dec 25, 2006<br>
      Password Expires: 　　 Feb 23, 2007<br>
      Password Inactive: 　　Feb 28, 2007<br>
      Account Expires: 　　　Dec 31, 2007</font></font></td>
  </tr>
</table>
<br>
　設定完成後，您可以觀察一下 /etc/shadow 裡頭，barry 的相關欄位做了哪些異動，順便跟剛剛使用 chage 指令所做的修改做個比較： <br>
<br>
<table width="100%" border="0">
  <tr> 
    <td bgcolor="#000000"><font color="#FFFFFF">suse:~ # <font color="#FFFF00"><strong>cat 
      /etc/shadow | grep barry</strong></font><br>
      <font face="細明體">barry:$2a$10$odkBM2NLN8C6vaD9WdcLYuSGqlOb556:13507:3:60:7:5:13878:</font></font></td>
  </tr>
</table>
<br>
　另外一種比較簡單的設定方式，是直接輸入 &quot;<font color="#0000FF">chage barry</font>&quot;，這樣您就可以依照系統所給您的提示，依序去做設定：<br>
<br>
<table width="100%" border="0">
  <tr> 
    <td bgcolor="#000000"><font color="#FFFFFF">suse:~ #<strong> <font color="#FFFF00">chage 
      barry</font></strong><br>
      <font face="細明體">Changing aging information for barry.<br>
      　　　　Minimum Password Age [3]: <font color="#FFFF00"><strong>6</strong></font> 
      </font><font color="#FFFFFF"><font color="#FFFF00"><font color="#00FFFF" size="2">← 
      修改成六天，完成後按下 Enter 鍵來繼續。</font></font></font><font face="細明體"><br>
      　　　　Maximum Password Age [60]: </font><font color="#FFFFFF"><font color="#00FFFF"><font size="2">← 
      欲維持 60 天的預設，就按下 Enter 鍵來略過。</font></font></font><font face="細明體"><br>
      　　　　Password Expiration Warning [7]: <font color="#FFFF00"><strong>5</strong></font><br>
      　　　　Password Inactive [5]: <strong><font color="#FFFF00">3</font></strong><br>
      　　　　Last Password Change (YYYY-MM-DD) [2006-12-25]:<br>
      　　　　Account Expiration Date (YYYY-MM-DD) [2007-12-31]: <font color="#FFFF00"><strong>2007-10-31</strong></font><br>
      Aging information changed.</font></font></td>
  </tr>
</table>
<font color="#0000FF"><strong><font size="+1"><br>
<a name="18"></a><font size="6">4.2 行程 (processes) 與工作 (jobs) 管理</font></font></strong></font><br>
<br>
　所謂的行程 (process)，簡單的說，就是執行中的程式，而此程式無論其是在前景或背景執行，只要是執行中的狀態，即可構成一個行程。前景執行的意思是說，程式執行時佔用了一個終端機的螢幕畫面，當此程式不停止時，您就無法在這個 
shell 下繼續輸入其他的指令，比如執行『tail -f /var/log/messages』，就是屬於一個前景持續執行的程式 ﹔那背景執行，當然就是說程式執行時不佔用終端機的螢幕畫面囉 
! <br>
<br>
　在 Linux 系統當中，往往有很多程式同時在進行著，而每個 process，系統會分配一個 number 給它，此 number 稱為 PID (Porcess 
ID)，這 PID 是個唯一的、不可重複的正整數 ( integer )。在我們開啟 Linux 的作業系統時，第一個被執行的程式為 init，所以它的 PID 
為 1。<br>
<br>
　那什麼叫工作呢 ? 當使用者在 shell 下執行程式時，就可以說這個使用者正在執行一項工作，不是靠使用者所執行的程式，就不能稱為一個工作。不過往往在執行一項工作時，並不是只靠一個程式就能解決，而是要有好幾個行程一起搭配來完成。舉個例子來說，比如在 
shell 下執行『cat /etc/termcap | head -500 | less』，它就是一個工作，但是需要靠三個程式來完成這個工作，這樣的解釋大家應該清楚吧 
!<br>
<br>
<strong> <font color="#000000" size="+1"><a name="19"></a><font size="5">4.2.1 
子行程概念及</font></font><font size="+1"><font size="5">Linux 的多工環境</font></font><br>
<br>
</strong>　程式在執行時，還可以在其下衍生 (fork) 出另一個行程出來，這個所 fork 出來的行程，稱為原始程式的子行程，而原始程式就稱為這個子行程的父行程。子行程當然也會有 
PID，同時也會記載著父行程的 PID，此父行程的 PID 就稱為 PPID (Parent Process ID)。如同剛剛提到的那個 init 程式，它是屬於系統當中最上層的一支程式，因此可想而知，它的下一層一定會有很多的子行程，其中一個為本機登入時的 
login 程式，在我們登入系統並認證成功以後，login 程式接著就會 fork 出一個 shell (bash)，那麼在 shell 中所執行的程式，就都算是 
bash 的子行程。<br>
<br>
　談完了子行程觀念後，接著來說說 Linux 的多工環境。在第一章談到 Linux 特色中的其中一個是「<font color="#0000FF">多人多工</font>」，也就是說允許多使用者執行多項相同的或不同的工作，比如您可以在 
tty1 執行一項工作，也可以切換至 tty2 再去執行相同或不同的工作，甚至您可以在同一個 virtual console 去執行多項工作。搞懂以上的觀念後，應該就能理解相同的一支程式是可以同時擁有多個不同的 
PID 的。<br>
<br>
<strong><font size="+1"><a name="21"></a><font size="+2">4.2.2 行程監控指令</font></font></strong><font size="+1"><br>
</font><br>
　認識了行程之後，是不是會想知道目前系統中存在著哪些行程呢 ? 請看以下我們所介紹的三個指令：<br>
<br>
<strong><font color="#000000" size="+1"><a name="22"></a><font color="#FF0000"><font color="#000000" size="+1"><strong><font color="#000000" size="+1"><strong><font color="#FF0000"><strong><font size="+1"><img src="1775.gif" tppabs="http://www.suse.url.tw/picture/1775.gif" width="18" height="18"></font></strong></font></strong></font></strong></font></font></font> 
<font color="#000000" size="+1"> 指令 ps</font></strong><br>
<br>
　提供行程的相關訊息。<br>
<br>
<strong>指令語法</strong>：<br>
<table width="100%" bgcolor="#CCCCCC">
  <tr> 
    <td><strong><font face="細明體">ps [options]</font></strong></td>
  </tr>
</table>
<br>
<strong>參數說明</strong>：<br>
<table width="100%" border="1" cellpadding="4">
  <tr> 
    <td width="7%" align="center"><font color="#000099">-a</font></td>
    <td width="93%"><font color="#000099">顯示受終端機控制的程式。</font></td>
  </tr>
  <tr> 
    <td align="center"><font color="#000099">-u</font></td>
    <td><font color="#000099">顯示使用者本身所執行的程式 (受終端機控制)。</font></td>
  </tr>
  <tr> 
    <td align="center" nowrap><font color="#000099">-x</font></td>
    <td nowrap><font color="#000099">顯示使用者本身所執行的所有程式，包括不受終端機控制的系統程式在內。</font></td>
  </tr>
  <tr> 
    <td align="center"><font color="#000099">-w</font></td>
    <td><font color="#000099">可以將一整行完整的內容呈現出來。</font></td>
  </tr>
  <tr> 
    <td align="center"><font color="#000099">-l</font></td>
    <td><font color="#000099">以長格式來顯示，這樣訊息呈現會更完整。</font></td>
  </tr>
</table>
<strong><br>
</strong>　一般在查看整個系統程序時，都會使用「aux」這三個參數的組合，如再加個「w」參數，即可做完整的輸出。<strong><br>
<br>
範例說明</strong>：<br>
<table width="100%" border="0">
  <tr> 
    <td bgcolor="#000000"><font color="#FFFFFF">suse:~ # <font color="#FFFF00"><strong>ps 
      aux </strong></font><br>
      <font face="細明體">USER 　PID 　%CPU 　%MEM 　VSZ 　RSS 　TTY 　STAT 　START 　TIME 
      　COMMAND<br>
      root 　　1 　 0.0 　 0.1 　716 　284 　? 　　S 　　 05:48 　0:01 　init [3]<br>
      root 　　2 　 0.0 　 0.0 　　0 　　0 　? 　　SN 　　05:48 　0:00 　[ksoftirqd/0]<br>
      at 　 1700 　 0.0 　 0.1　<font color="#FFFFFF">1788</font> 　<font color="#FFFFFF">436</font> 
      　? 　　Ss 　　05:48 　0:00 　/usr/sbin/atd<br>
      barry 3221 　 0.0 　 0.2　1892 　600 　tty2　S+ 　　06:55 　0:00 　ping localhost</font><br>
      </font> <font color="#00FFFF">　　　　　　　：</font><font color="#00FFFF" size="2">略　　　　　　　　　　　　　　　　</font><font color="#00FFFF">：</font><font color="#00FFFF" size="2">略</font></td>
  </tr>
</table>
<br>
<font color="#FFFFFF"><font color="#000000">　針對以上範例，簡單說明一下每個欄位所代表的意義：<br>
<br>
</font></font> 
<table width="100%" border="1">
  <tr bgcolor="#CCCCCC"> 
    <td align="center" valign="middle"><font color="#000099"><strong>欄 位</strong></font></td>
    <td><font color="#000099"><strong>代　表　意　義</strong></font></td>
  </tr>
  <tr> 
    <td width="11%" align="center" valign="middle"><font color="#000099"><strong>USER</strong></font></td>
    <td width="89%"><font color="#000099">程式執行的身分。</font></td>
  </tr>
  <tr> 
    <td align="center" valign="middle"><font color="#000099"><strong>PID</strong></font></td>
    <td><font color="#000099">程式的 PID。</font></td>
  </tr>
  <tr> 
    <td align="center" valign="middle"><font color="#000099"><strong>%CPU</strong></font></td>
    <td><font color="#000099">使用中的程式，所佔用 CPU 的百分比。</font></td>
  </tr>
  <tr> 
    <td align="center" valign="middle"><font color="#000099"><strong>%MEM</strong></font></td>
    <td><font color="#000099">佔用記憶體的百分比。</font></td>
  </tr>
  <tr> 
    <td align="center" valign="middle"><font color="#000099"><strong>VSZ、RSS</strong></font></td>
    <td><font color="#000099">使用記憶體的資源，單位為 KB。</font></td>
  </tr>
  <tr> 
    <td align="center" valign="middle"><font color="#000099"><strong>TTY</strong></font></td>
    <td><font color="#000099">如在 tty1 ~ tty6 中執行指令的話，這個欄位會很清楚的指出來 ﹔如是遠端登入的話，會顯示 
      pts/0、pts/1、&#8230; ﹔如是一些與終端機無關的系統程式，則會顯示 &quot;?&quot;。</font></td>
  </tr>
  <tr> 
    <td align="center" valign="middle"><font color="#000099"><strong>STAT</strong></font></td>
    <td><font color="#000099">程式目前的狀態，常見到的有：<br>
      </font> <table width="100%">
        <tr> 
          <td width="6%" valign="top" nowrap><font color="#000099"><font size="4" face="細明體">˙</font><strong><font face="細明體">R：</font></strong></font></td>
          <td width="94%"><font color="#000099"><font face="細明體">程式正在執行(<font color="#000099">runnable</font>)或等待著被執行。</font></font></td>
        </tr>
        <tr> 
          <td valign="top" nowrap><font color="#000099"><font color="#000099"><font size="4" face="細明體">˙</font></font><strong><font face="細明體">S：</font></strong></font></td>
          <td><font color="#000099"><font face="細明體">程式處於睡眠狀態(<font color="#000099">sleeping</font>)，也就是在待命中啦 
            !</font></font></td>
        </tr>
        <tr> 
          <td valign="top" nowrap><font color="#000099"><font color="#000099"><font size="4" face="細明體">˙</font></font><strong><font face="細明體">T：</font></strong></font></td>
          <td><font color="#000099"><font face="細明體">程式被暫停(<font color="#000099">stopped</font>)。</font></font></td>
        </tr>
        <tr> 
          <td valign="top" nowrap><font color="#000099"><font color="#000099"><font size="4" face="細明體">˙</font></font><strong><font face="細明體">Z：</font></strong></font></td>
          <td><font color="#000099"><font face="細明體">當子行程已結束，但父行程卻未得知其狀態，使其還保留在記憶體中，這就形成所謂的僵屍(<font color="#000099">zombie</font>)程式。</font></font></td>
        </tr>
        <tr> 
          <td valign="top" nowrap><font color="#000099"><font color="#000099"><font size="4" face="細明體">˙</font></font><strong><font face="細明體">&lt;：</font></strong></font></td>
          <td><font color="#000099"><font face="細明體">具有高優先權(<font color="#000099">high-priority</font>)的程式。</font></font></td>
        </tr>
        <tr> 
          <td valign="top" nowrap><font color="#000099"><font color="#000099"><font size="4" face="細明體">˙</font></font><strong><font face="細明體">N：</font></strong></font></td>
          <td><font color="#000099"><font face="細明體">具有低優先權(<font color="#000099">low-priority</font>)的程式。</font></font> 
          </td>
        </tr>
      </table></td>
  </tr>
  <tr> 
    <td align="center" valign="middle"><strong><font color="#000099">START</font></strong></td>
    <td><font color="#000099">啟動該程式的時間，亦即什麼時候執行這個程式的。</font></td>
  </tr>
  <tr> 
    <td align="center" valign="middle"><font color="#000099"><strong>TIME</strong></font></td>
    <td><font color="#000099">程式使用 CPU 多久的時間。</font></td>
  </tr>
  <tr> 
    <td align="center" valign="middle"><font color="#000099"><strong>COMMAND</strong></font></td>
    <td><font color="#000099">執行程式的名稱。</font></td>
  </tr>
</table>
<font color="#FFFFFF"><font color="#000000"><br>
</font></font> <font color="#FFFFFF"><font color="#000000">　另外執行「<font color="#0000FF">ps 
-ef</font>」，亦可觀看整個系統程序，自己做看看囉。</font></font>再看以下的例子：<br>
<br>
<table width="100%" border="0">
  <tr> 
    <td bgcolor="#000000"><font color="#FFFFFF"><font color="#FFFFFF">suse:~ # 
      <font color="#FFFF00"><strong>ps aux |</strong></font></font> <strong><font color="#FFFF00">less</font></strong><font color="#00FFFF"><br>
      # <font color="#FFFFFF"><font size="2">搭配 less 
      指令來讓我們慢慢翻頁看個仔細。</font></font><br>
      </font></font> <font color="#FFFFFF"><br>
      suse:~ # <font color="#FFFF00"><strong>ps aux | grep cron</strong></font><br>
      root　3400　0.0　0.1　1388　576　?　Ss　13:13 0:00　/usr/sbin/cron<br>
      <font color="#00FFFF"># </font><font color="#00FFFF" size="2">查詢特定程式 cron 
      的訊息。往往我們在查詢某個程式有無執行時，常會這樣做檢視噢。</font><br>
      </font> <font color="#FFFFFF"> <font color="#00FFFF"><br>
      <font color="#FFFFFF"><font color="#FFFFFF">suse:~ #<font color="#FFFF00"><strong> 
      ps axl </strong></font><br>
      <font face="細明體">F　UID　　PID　PPID PRI　NI　VSZ　RSS　WCHAN　STAT　TTY　TIME　COMMAND<br>
      4 　 0 　　 1 　　0　16　 0　716　280　- 　　 S　　 ? 　 0:00　init [3]<br>
      1 　 0　　　2 　　1　34　19　　0　　0　ksofti SN 　 ? 　 0:00　[ksoftirqd/0]<br>
      1　　0　　　3 　　1　10　-5　　0　　0　worker S&lt; 　 ? 　 0:00　[events/0]<br>
      5　　0　 2696 　　1　15 　0 1892　620　- 　　 Ss 　 ? 　 0:01　/sbin/syslog-ng<br>
      5　　0 　2842 　　1　18 　0 2576　832　- 　　 Ss 　 ? 　 0:00　/usr/sbin/xinetd</font><br>
      </font></font></font></font> <font color="#FFFFFF"><font color="#00FFFF"># 
      </font></font><font color="#00FFFF" size="2">用長格式來查看時，多了一些資訊出來，像 PPID、PRI、NI 
      等。PRI 及 NI 的觀念，等一下會說明。</font></td>
  </tr>
</table>
<br>
<font color="#FF0000"><font color="#000000"><strong><font size="+1"><a name="23"></a><font color="#FF0000"><font color="#000000" size="+1"><strong><font color="#000000" size="+1"><strong><font color="#FF0000"><font color="#000000" size="+1"><strong><img src="1775.gif" tppabs="http://www.suse.url.tw/picture/1775.gif" width="18" height="18"></strong></font></font></strong></font></strong></font></font></font></strong></font></font><font size="+1"><strong> 
指令 top</strong></font><br>
<br>
　top 是一個動態行程管理指令，預設每隔三秒就會自動做動態更新。<br>
<br>
<strong>指令語法</strong>：<br>
<table width="100%" bgcolor="#CCCCCC">
  <tr> 
    <td><strong><font face="細明體">top -b -d delay -n iterations -p pid [, pid ...]</font></strong></td>
  </tr>
</table>
<br>
<strong>參數說明</strong>：<br>
<table width="100%" border="1">
  <tr> 
    <td width="7%" align="center" valign="middle"><font color="#000099">-b</font></td>
    <td width="93%"><font color="#000099">將行程所有資訊依序做輸出。</font></td>
  </tr>
  <tr> 
    <td align="center" valign="middle"><font color="#000099">-d</font></td>
    <td><font color="#000099">設定 top 畫面中，行程資訊更新的秒數。</font></td>
  </tr>
  <tr> 
    <td align="center" valign="middle"><font color="#000099">-n</font></td>
    <td><font color="#000099">讓 top 進行幾次輸出後就結束執行。</font></td>
  </tr>
  <tr> 
    <td align="center" valign="middle"><font color="#000099">-p</font></td>
    <td><font color="#000099">指定要顯示的 PID 資訊。</font></td>
  </tr>
</table>
<br>
<strong>範例說明</strong>：<br>
<table width="100%" bgcolor="#FFFFFF">
  <tr> 
    <td bgcolor="#000000"><font color="#FFFFFF">suse:~ # <font color="#FFFF00"><strong>top 
      -d 5 -n 2</strong></font><br>
      <font color="#00FFFF"># <font size="2">設定每五秒更新一次 top 畫面之行程資訊，而在輸出兩次後，即結束執行。</font></font><font size="2"><br>
      <br>
      </font>suse:~ #<font color="#FFFF00"><strong> top -b -n 1 &gt; topinfo </strong></font><br>
      <font color="#00FFFF"># <font size="2">將 top 所呈現之完整行程訊息，輸出至 topinfo 裡。</font></font></font> 
      <font color="#FFFFFF"><br>
      <br>
      suse:~ #<font color="#FFFF00"><strong> top -n 1 -p 1,3137</strong></font><br>
      <font color="#00FFFF"># <font size="2">觀察 1 及 3137 這兩個 PID 之行程資訊。</font></font></font> 
    </td>
  </tr>
</table>
<br>
　上面的 top 範例中，都有用到 -n 這個參數，這是為了要讓 top 在輸出幾次後就能結束執行，如果現在單純的執行 top 指令而不加這個參數時，則會持續對系統的程序做動態更新：<br>
<br>
<table width="100%">
  <tr> 
    <td bgcolor="#000000"><font color="#FFFFFF">suse:~ #<font color="#FFFF00"><strong> 
      top</strong></font><br>
      <br>
      <font face="細明體">top - 03:59:10 up 1:12, 1 user, load average: 0.00, 0.00, 
      0.00<br>
      Tasks: 69 total, 2 running, 67 sleeping, 0 stopped, 0 zombie<br>
      Cpu(s): 0.0%us, 0.0%sy, 0.0%ni, 99.3%id, 0.7%wa, 0.0%hi, 0.0%si, 0.0%st<br>
      Mem: 　256740k total, 241268k used,　15472k free, 85040k buffers<br>
      Swap:　313228k total, 　 208k used, 313020k free, 39240k cached </font></font> 
      <p><font color="#FFFFFF" face="細明體"> 　 </font><font color="#FFFFFF"><font color="#00FFFF" face="細明體">PID 
        USER　PR　NI　VIRT　RES　SHR S　%CPU　%MEM　　TIME+ 　COMMAND</font></font><font color="#FFFFFF" face="細明體"><br>
        　3951 root　16　 0　2188　996　764 R 　0.3 　0.4 　0:00.02　top<br>
        　　 1 root　16 　0　 716　284　244 S 　0.0 　0.1 　0:01.15　init<br>
        　　 2 root　34　19 　　0 　 0　　0 S 　0.0 　0.0 　0:00.00　ksoftirqd/0<br>
        　　 3 root　10　-5 　　0　　0　　0 S 　0.0 　0.0 　0:00.01　events/0<br>
        　　 4 root　10　-5 　　0　　0　　0 S 　0.0 　0.0 　0:00.00　khelper</font><font color="#FFFFFF"><br>
        </font></p></td>
  </tr>
</table>
<br>
　針對以上的內容先做個說明。<br>
<br>
　第一部分顯示系統資訊，包括目前時間、已開機時間、登入人數、系統平均負載 ( 1分、5分、15分 )、行程數統計及 CPU、記憶體、SWAP 等訊息。<br>
　　　<br>
　第二部分顯示動態行程資訊，與使用 ps 指令所看到的訊息差不多，所以這裡只針對 PR (PRiority) 及 NI (NIce 值) 做說明。<br>
<br>
　Priority 代表的是 CPU用來決定行程執行時的優先順序，數字愈小，則該程式會愈優先被執行。而 nice 值也是代表著程式執行的優先權，不過 nice 
值有其一定的範圍： <font color="#0000FF">-20~19</font>，nice 值愈大，程式執行的優先權愈小，相反地 nice 值愈小，則程式執行的優先權愈大。我們在執行一支程式時，如無特別指定其 
nice 值，則預設為 0。當程式的 nice 值小於 0 時，那麼就可以稱此程式具有高優先權，如果程式的 nice 值大於 0，自然就可稱其為低優先權的程式囉 
! <br>
<br>
　講了半天，那 PR 及 NI 這兩者有何關係呢 ? 其實程式真正在執行時的優先權，就是根據那兩組數字的組合啦 ! 也就是 PR+NI 之總合越小，程式就越優先被執行囉。<br>
<br>
　接著來談談在進入 top 畫面後要如何操控。如一開始您不曉得有哪些指令可以使用，可以先輸入「<font color="#0000FF">h</font>」來尋求幫忙。這裡就針對幾個常使用到的指令來做說明：<strong><br>
<br>
top 中的交談指令</strong> (INTERACTIVE COMMANDS)： 
<table width="100%" border="1" cellpadding="4">
  <tr> 
    <td width="8%" align="center"><font color="#000099">h</font></td>
    <td width="92%"><font color="#000099">顯示可使用指令的簡短說明。</font></td>
  </tr>
  <tr> 
    <td align="center"><font color="#000099">u</font></td>
    <td><font color="#000099">顯示特定使用者所執行的程式。</font></td>
  </tr>
  <tr> 
    <td align="center"><font color="#000099">s</font></td>
    <td><font color="#000099">改變行程更新訊息的秒數。要立即更新，可按下 [space] 鍵。</font></td>
  </tr>
  <tr> 
    <td align="center"><font color="#000099">P</font></td>
    <td><font color="#000099">按照行程所使用的 CPU 多寡來做排序。</font></td>
  </tr>
  <tr> 
    <td height="27" align="center" nowrap><font color="#000099">M</font></td>
    <td nowrap><font color="#000099"> 按照行程所使用的記憶體多寡來做排序。</font></td>
  </tr>
  <tr> 
    <td height="27" align="center" nowrap><font color="#000099">N</font></td>
    <td nowrap><font color="#000099">按照 PID 大小來做排序。</font></td>
  </tr>
  <tr> 
    <td align="center" nowrap><font color="#000099">k</font></td>
    <td nowrap><font color="#000099">對行程送出訊號，一般最常用的是終止的訊號。</font></td>
  </tr>
  <tr> 
    <td align="center"><font color="#000099">r</font></td>
    <td><font color="#000099"> 重新設定已執行程式的 nice 值。</font></td>
  </tr>
  <tr> 
    <td align="center"><font color="#000099">q</font></td>
    <td><font color="#000099">退出 top。</font></td>
  </tr>
</table>
<br>
<strong>範例說明</strong>：<br>
<table width="100%">
  <tr> 
    <td bgcolor="#000000"><font color="#CCCCCC">1. 查詢某個特定帳號所執行的程式 (輸入 u 指令)：</font><font color="#FFFFFF"><br>
      <br>
      suse:~ #<font color="#FFFF00"><strong> top</strong></font><br>
      <br>
      <font face="細明體">top - 03:59:10 up 1:12, 1 user, load average: 0.00, 0.00, 
      0.00<br>
      Tasks: 69 total, 2 running, 67 sleeping, 0 stopped, 0 zombie<br>
      Cpu(s): 0.0%us, 0.0%sy, 0.0%ni, 99.3%id, 0.7%wa, 0.0%hi, 0.0%si, 0.0%st<br>
      Mem: 　256740k total, 241268k used,　15472k free, 85040k buffers<br>
      Swap:　313228k total, 　 208k used, 313020k free, 39240k cached <br>
      Which user (blank for all):<strong><font color="#FFFF00">barry</font></strong><br>
      </font></font> <font color="#FFFFFF"><font color="#00FFFF" face="細明體">　 
      PID USER　PR　NI　VIRT　RES　SHR S　%CPU　%MEM　　TIME+ 　COMMAND</font></font><font color="#FFFFFF" face="細明體"><br>
      　3951 root　16　 0　2188　996　764 R 
      　0.3 　0.4 　0:00.02　top<br>
      　　 1 root　16 　0　 716　284　244 S 　0.0 　0.1 　0:01.15　init<br>
      　　 2 root　34　19 　　0 　 0　　0 S 　0.0 　0.0 　0:00.00　ksoftirqd/0</font><font color="#FFFFFF"><br>
      <br>
      <font color="#00FFFF"># </font><font color="#00FFFF" size="2">在您輸入 barry 
      並按下 Enter 鍵後，就能看到 barry 所執行的 process：</font><br>
      <font face="細明體">top - 03:59:10 up 1:12, 1 user, load average: 0.00, 0.00, 
      0.00<br>
      Tasks: 69 total, 2 running, 67 sleeping, 0 stopped, 0 zombie<br>
      Cpu(s): 0.0%us, 0.0%sy, 0.0%ni, 99.3%id, 0.7%wa, 0.0%hi, 0.0%si, 0.0%st<br>
      Mem: 　256740k total, 241268k used,　15472k free, 85040k buffers<br>
      Swap:　313228k total, 　 208k used, 313020k free, 39240k cached <br>
      <br>
      </font></font> <font color="#FFFFFF"><font color="#00FFFF" face="細明體">　 
      PID USER　PR　NI　VIRT　<font color="#FFFFFF">RES</font>　SHR 
      S　%CPU　%MEM　　TIME+ 　COMMAND</font></font><font color="#FFFFFF" face="細明體"><br>
      　4286 barry 24 　0　4260 1836 1408 S　 0.0　 0.7 　0:00.09　bash<br>
      　4317 barry 15 　0　8516 1588　996 S　 0.0　 0.6 　0:00.00　sshd<br>
      　4318 barry 25 　0　4400 1884 1408 S　 0.0　 0.7 　0:00.08　bash</font><font color="#FFFFFF">&nbsp; 
      <br>
      <br>
      <font color="#CCCCCC">2. 對行程送出特定訊號 (輸入 k 指令)：</font><br>
      <br>
      <font face="細明體">top - 03:59:10 up 1:12, 1 user, load average: 0.00, 0.00, 
      0.00<br>
      Tasks: 69 total, 2 running, 67 sleeping, 0 stopped, 0 zombie<br>
      Cpu(s): 0.0%us, 0.0%sy, 0.0%ni, 99.3%id, 0.7%wa, 0.0%hi, 0.0%si, 0.0%st<br>
      Mem: 　256740k total, 241268k used,　15472k free, 85040k buffers<br>
      Swap:　313228k total, 　 208k used, 313020k free, 39240k cached </font></font> 
      <br> <font color="#FFFFFF" face="細明體">PID to kill:</font><font color="#FFFF00"><strong>4317</strong></font><br> 
      <font color="#FFFFFF"><font color="#00FFFF" face="細明體">　 
      PID USER　PR　NI　VIRT　<font color="#FFFFFF">RES</font>　SHR 
      S　%CPU　%MEM　　TIME+ 　COMMAND</font></font><font color="#FFFFFF" face="細明體"><br>
      　4286 barry 24 　0　4260 1836 1408 S　 0.0　 0.7 　0:00.09　bash<br>
      　4317 barry 15 　0　8516 1588　996 S　 0.0　 0.6 　0:00.00　sshd<br>
      　4318 barry 25 　0　4400 1884 1408 S　 0.0　 0.7 　0:00.08　bash</font><font color="#FFFFFF">&nbsp;&nbsp;<br>
      <br>
      <font color="#00FFFF"># </font><font color="#00FFFF" size="2">在輸入 PID 4317 
      並按下 Enter 鍵後，會詢問您欲對此 process 送出何訊號：<font color="#FFFFFF"><br>
      </font></font><font face="細明體">top - 03:59:10 up 1:12, 1 user, load average: 
      0.00, 0.00, 0.00<br>
      Tasks: 69 total, 2 running, 67 sleeping, 0 stopped, 0 zombie<br>
      Cpu(s): 0.0%us, 0.0%sy, 0.0%ni, 99.3%id, 0.7%wa, 0.0%hi, 0.0%si, 0.0%st<br>
      Mem: 　256740k total, 241268k used,　15472k free, 85040k buffers<br>
      Swap:　313228k total, 　 208k used, 313020k free, 39240k cached </font></font> 
      <br>
      <font color="#00FF00" face="細明體">Kill PID 4317 with signal [15]:</font><font color="#00FFFF"> 
      <strong>← <font size="2">直接按下 Enter 鍵來採用預設的 signal。</font></strong></font><br> 
      <font color="#FFFFFF"><font color="#00FFFF" face="細明體">　 
      PID USER　PR　NI　VIRT　<font color="#FFFFFF">RES</font>　SHR 
      S　%CPU　%MEM　　TIME+ 　COMMAND</font></font><font color="#FFFFFF" face="細明體"><br>
      　4286 barry 24 　0　4260 1836 1408 S　 0.0　 0.7 　0:00.09　bash<br>
      　4317 barry 15 　0　8516 1588　996 S　 0.0　 0.6 　0:00.00　sshd<br>
      　4318 barry 25 　0　4400 1884 1408 S　 0.0　 0.7 　0:00.08　bash</font><font color="#FFFFFF">&nbsp;&nbsp;<br>
      <font color="#00FFFF"># </font><font color="#00FFFF" size="2">剛看到的那 signal 
      [15]，是按正常程序來對行程送出終止的訊號。<br>
      </font><font color="#FFFFFF"><font color="#00FFFF"># </font></font><font color="#00FFFF" size="2">signal 
      部分在 4.2.5 節會有說明。</font><br>
      <br>
      <font color="#CCCCCC">3. 修改程式的 nice 值 (輸入 r 指令)：</font><br>
      <br>
      <font face="細明體">top - 03:59:10 up 1:12, 1 user, load average: 0.00, 0.00, 
      0.00<br>
      Tasks: 69 total, 2 running, 67 sleeping, 0 stopped, 0 zombie<br>
      Cpu(s): 0.0%us, 0.0%sy, 0.0%ni, 99.3%id, 0.7%wa, 0.0%hi, 0.0%si, 0.0%st<br>
      Mem: 　256740k total, 241268k used,　15472k free, 85040k buffers<br>
      Swap:　313228k total, 　 208k used, 313020k free, 39240k cached </font></font> 
      <br>
      <font color="#FFFFFF" face="細明體">PID to renice:<font color="#FFFF00"><strong>4286</strong></font></font> 
      <font color="#00FFFF"><strong>← <font size="2">輸入要修改 nice 值的程式 PID</font></strong></font><br> 
      <font color="#FFFFFF"><font color="#00FFFF" face="細明體">　 
      PID USER　PR　NI　VIRT　<font color="#FFFFFF">RES</font>　SHR 
      S　%CPU　%MEM　　TIME+ 　COMMAND</font></font><font color="#FFFFFF" face="細明體"><br>
      　4286 barry 24 　0　4260 1836 1408 S　 0.0　 0.7 　0:00.09　bash</font><font color="#FFFFFF"> 
      <br>
      <br>
      <font color="#00FFFF"># </font><font color="#FFFFFF"><font color="#00FFFF" size="2">在輸入 
      PID 並按下 Enter 鍵後，會詢問您 nice 值要調整為何：<br>
      </font><font color="#FFFFFF"><font face="細明體">top - 03:59:10 up 1:12, 1 
      user, load average: 0.00, 0.00, 0.00<br>
      Tasks: 69 total, 2 running, 67 sleeping, 0 stopped, 0 zombie<br>
      Cpu(s): 0.0%us, 0.0%sy, 0.0%ni, 99.3%id, 0.7%wa, 0.0%hi, 0.0%si, 0.0%st<br>
      Mem: 　256740k total, 241268k used,　15472k free, 85040k buffers<br>
      Swap:　313228k total, 　 208k used, 313020k free, 39240k cached </font></font> 
      <br>
      <font face="細明體">Renice PID 4286 to value:<font color="#FFFF00"><strong>-5</strong></font></font> 
      </font><font color="#00FFFF"><strong>← <font size="2">將 nice 值修改為 -5。</font></strong> 
      </font><font color="#FFFFFF"><br>
      </font><font color="#00FFFF" face="細明體">　 PID 
      USER　PR　NI　VIRT　<font color="#FFFFFF">RES</font>　SHR 
      S　%CPU　%MEM　　TIME+ 　COMMAND</font></font><font color="#FFFFFF" face="細明體"><br>
      　4286 barry 24 　0　4260 1836 1408 S　 0.0　 0.7 　0:00.09　bash</font><font color="#FFFFFF"><font color="#FFFFFF"><font color="#00FFFF" size="2"> 
      <br>
      <br>
      </font><font color="#FFFFFF"><font color="#00FFFF"># </font><font color="#00FFFF" size="2">調整後的結果如下：<br>
      </font></font><font color="#00FFFF" face="細明體">　 PID USER　PR　NI　VIRT　<font color="#FFFFFF">RES</font>　SHR 
      S　%CPU　%MEM　　TIME+ 　COMMAND</font></font><font color="#FFFFFF" face="細明體"><br>
      　4286 barry 24　-5　4260 1836 1408 S　 0.0　 0.7 　0:00.09　bash</font><font color="#FFFFFF"><font color="#FFFFFF"><font color="#00FFFF" size="2"> 
      </font></font></font></font></td>
  </tr>
</table>
<p> 　另外像 P 及 M 指令也很有用處，其可依使用 CPU 及 Memory 的多寡來做排序，如此便能輕鬆的查到哪些程式佔用您系統較多的資源，請讀者自行練習。</p>
<blockquote> 
  <p><strong><font color="#000099">Tips：</font></strong><font color="#000099" size="2">如果只是想單純的檢查記憶體的使用概況，那麼用<strong> 
    free </strong>指令來查閱即可。</font></p>
  <table width="94%" border="0">
    <tr> 
      <td bgcolor="#000000"><font color="#FFFFFF">suse:~ #<font color="#FFFF00"><strong> 
        free</strong></font></font><font color="#FFFF00" face="細明體">&nbsp;</font><font color="#FFFFFF" face="細明體"><br>
        　　　　　　total　　used　　free　　shared　　buffers　　cached<br>
        Mem: 　　　256740　226840 　29900　　　　 0　　　99648　　 50124<br>
        -/+ buffers/cache:　77068　179672<br>
        Swap: 　　 313228　　 196　313032</font></td>
    </tr>
  </table>
  <br>
  <font color="#000099" size="2">記憶體所顯示的單位為 KB。另外您可使用 -b (bytes) 或 -m (MB) 來指定所顯示的單位。<br>
  <br>
  不過看了這個結果可能會嚇一跳，怎麼記憶體才 256 M 就已經用掉了 226 M ? 其實系統平常是會把您多餘的記憶體拿來做為 buffer/cache 
  使用的， 這樣做的目的是為了加快 I/O 的執行效能，您也不需擔心如此會造成記憶體的不足，因為當程式真正要用到記憶體時，自然會從 buffer/cache 
  裡釋放出來。</font></blockquote>
<p> <font size="+1"><strong><a name="24"></a><font color="#FF0000"><font color="#000000"><strong><font size="+1"><font color="#FF0000"><font color="#000000" size="+1"><strong><font color="#000000" size="+1"><strong><font color="#FF0000"><font color="#000000" size="+1"><strong><img src="1775.gif" tppabs="http://www.suse.url.tw/picture/1775.gif" width="18" height="18"></strong></font></font></strong></font></strong></font></font></font></strong></font></font> 
  指令 pstree</strong></font><br>
  <br>
  　使用樹狀結構來顯示系統所有行程的指令。<br>
  <br>
  　從這個行程的樹狀結構裡，可以順便了解一下父行程及子行程之間的關係。此外若搭配 &quot;<font color="#0000FF">-up</font>&quot; 
  的參數來使用，還可以顯示每個執行程式的 PID (-p) 及其執行身分 (-u) 為何：</p>
<table width="100%">
  <tr> 
    <td bgcolor="#000000"><font color="#FFFFFF">suse:~ # <font color="#FFFF00"><strong>pstree 
      -up</strong></font><br>
      <font face="細明體">init(1)-+-acpid(2263)<br>
      　　　　|-auditd(2990)---{auditd}(2991)<br>
      　　　　|-cron(3137)<br>
      　　　　|-cupsd(3173,lp)<br>
      　　　　|-dbus-daemon(2258,messagebus)<br>
      　　　　|-events/0(3)<br>
      　　　　|-gdm(3382)---gdm(3448)-+-X(3451)<br>
      　　　　| 　　　　　　　　　　　`-gdmgreeter(3467,gdm)<br>
      　　　　|-gpm(3151)<br>
      　　　　|-hald(2331)-+-hald-addon-acpi(2436)<br>
      　　　　| 　　　　　 |-hald-addon-stor(2797)<br>
      　　　　| 　　　　　 `-hald-addon-stor(2897)<br>
      　　　　|-httpd2-prefork(3271)-+-httpd2-prefork(3296,wwwrun)<br>
      　　　　| 　　　　　　　　　　 |-httpd2-prefork(3297,wwwrun)<br>
      　　　　|　　　　　　　　　　　|-httpd2-prefork(3298,wwwrun)<br>
      　　　　|　　　　　　　　　　　|-httpd2-prefork(3299,wwwrun)<br>
      　　　　|　　　　　　　　　　　`-httpd2-prefork(3300,wwwrun)<br>
      　　　　|-khelper(4)<br>
      　　　　|-klogd(2276)<br>
      　　　　|-ksoftirqd/0(2)<br>
      　　　　|-kswapd0(123)<br>
      　　　　|-kthread(5)-+-aio/0(124)<br>
      　　　　|　　　　　　|-cqueue/0(330)<br>
      　　　　|　　　　　　|-kacpid(8)<br>
      　　　　|　　　　　　|-kauditd(2992)<br>
      　　　　|　　　　　　|-kblockd/0(7)<br>
      　　　　|　　　　　　|-kgameportd(1190)<br>
      　　　　|　　　　　　|-khubd(1414)<br>
      　　　　|　　　　　　|-kpsmoused(371)<br>
      　　　　|　　　　　　|-kseriod(331)<br>
      　　　　|　　　　　　|-pdflush(121)<br>
      　　　　|　　　　　　|-pdflush(122)<br>
      　　　　|　　　　　　`-reiserfs/0(816)<br>
      　　　　|-login(3405)---bash(4286,barry)<br>
      　　　　|-mingetty(3404)<br>
      　　　　|-mingetty(3406)<br>
      　　　　|-mingetty(3407)<br>
      　　　　|-mingetty(3408)<br>
      　　　　|-mingetty(3409)<br>
      　　　　|-nscd(3242)-+-{nscd}(3253)<br>
      　　　　| 　　　　　 |-{nscd}(3254)<br>
      　　　　|　　　　　　|-{nscd}(3255)<br>
      　　　　|　　　　　　|-{nscd}(3256)<br>
      　　　　|　　　　　　|-{nscd}(3257)<br>
      　　　　|　　　　　　`-{nscd}(3258)<br>
      　　　　|-portmap(3063,nobody)<br>
      　　　　|-powersaved(3338)<br>
      　　　　|-resmgrd(2297)<br>
      　　　　|-saslauthd(3099)-+-saslauthd(3111)<br>
      　　　　|　　　　　　　　 |-saslauthd(3112)<br>
      　　　　| 　　　　　　　　|-saslauthd(3113)<br>
      　　　　| 　　　　　　　　`-saslauthd(3114)<br>
      　　　　|-shpchpd_event(1508)<br>
      　　　　|-slpd(3100,daemon)<br>
      　　　　|-smpppd-ifcfg(4068)---pppd(4070)<br>
      　　　　|-sshd(3377)-+-sshd(3896)---bash(3898)<br>
      　　　　| 　　　　　 `-sshd(4190)---bash(4192)---pstree(4518)<br>
      　　　　|-startpar(3395)<br>
      　　　　|-syslogd(2262)<br>
      　　　　|-udevd(874)<br>
      　　　　|-xinetd(3365)<br>
      　　　　`-zmd(3230) </font></font></td>
  </tr>
</table>
<br>
<strong> <font size="+1"><a name="25"></a><font size="+2">4.2.3 設定行程優先權</font></font><br>
<br>
</strong>　這一節主要是介紹兩個與行程優先權有關的指令，看看如何在程式執行之前，為其指派優先權，或者修改已執行程式的優先權。<strong><br>
<br>
<font size="+1"><a name="26"></a><strong><font color="#FF0000"><font color="#000000"><strong><font size="+1"><font color="#FF0000"><font color="#000000" size="+1"><strong><font color="#000000" size="+1"><strong><font color="#FF0000"><font color="#000000" size="+1"><strong><img src="1775.gif" tppabs="http://www.suse.url.tw/picture/1775.gif" width="18" height="18"></strong></font></font></strong></font></strong></font></font></font></strong></font></font></strong> 
指令 nice</font></strong><br>
<br>
　此指令乃針對即將執行的程式，進行優先權的設定。<br>
<br>
<strong>指令語法</strong>：<br>
<table width="100%" bgcolor="#CCCCCC">
  <tr> 
    <td><strong>nice [OPTION] [COMMAND [ARG]...] </strong></td>
  </tr>
</table>
<br>
<strong>參數說明</strong>： <br>
<table width="100%" border="1">
  <tr> 
    <td width="7%" align="center" valign="top"><font color="#000099">-n</font></td>
    <td width="93%"><font color="#000099">指定程式的 nice 值。當執行 nice 指令時，其後未設定 nice 
      值，則程式預設的 nice 值為 10。</font></td>
  </tr>
</table>
<br>
<strong>範例說明</strong>： 
<table width="100%" border="0">
  <tr> 
    <td bgcolor="#000000"><font color="#FFFFFF">barry@suse:~&gt;<font color="#FFFF00"> 
      <strong>nice -n 5 ping localhost &gt; file </strong></font> <strong><font color="#FFFF00">&amp;</font></strong><br>
      barry@suse:~&gt;<strong> <font color="#FFFF00">nice -5 </font></strong><font color="#FFFF00"><strong>ping 
      localhost &gt; file </strong></font> <strong><font color="#FFFF00">&amp;</font></strong><br>
      <font color="#00FFFF"># </font><font color="#00FFFF" size="2">設定於背景執行的 ping 
      程式，其 nice 值為 5。</font><br>
      <br>
      <font color="#FFFFFF"><font color="#00FFFF"># </font></font><font color="#00FFFF" size="2">接著做個確認：</font><br>
      barry@suse:~&gt;<strong> <font color="#FFFF00">ps axl | grep ping</font></strong><br>
      0　1000　4035　3890　26　<font color="#FFFF00">5</font>　1756　896　schedu　SN+　pts/1　0:00　ping 
      localhost<br>
      <br>
      barry@suse:~&gt;<strong> <font color="#FFFF00">nice -n -2 </font></strong><font color="#FFFF00"><strong>ping 
      localhost &gt; file1 </strong></font> <strong><font color="#FFFF00">&amp;</font></strong><br>
      [1] 3768<br>
      nice: cannot set niceness: Permission denied<br>
      <font color="#00FFFF"># </font><font color="#00FFFF" size="2">一般使用者無法設定低於 
      0 的 nice 值，因此您會看到權限被拒絕的訊息。</font><br>
      <br>
      barry@suse:~&gt;<strong> <font color="#FFFF00">nice </font></strong><font color="#FFFF00"><strong>ping 
      localhost &gt; file2</strong></font> <strong><font color="#FFFF00">&amp;</font></strong><br>
      barry@suse:~&gt; <font color="#FFFF00"><strong>ps axl | grep ping</strong></font><br>
      0　1000　418　 4039　26　<font color="#FFFF00">10</font>　1756　888　schedu　SN+　pts/2　0:00　ping 
      localhost<br>
      <font color="#00FFFF"># </font><font color="#00FFFF" size="2">使用 nice 指令卻未指定 
      nice 值，則程式預設的 nice 值為 10。</font></font></td>
  </tr>
</table>
<font color="#000000"><br>
<font size="+1"><strong><a name="27"></a><font size="+1"><strong><font color="#FF0000"><font color="#000000"><strong><font size="+1"><font color="#FF0000"><font color="#000000" size="+1"><strong><font color="#000000" size="+1"><strong><font color="#FF0000"><font color="#000000" size="+1"><strong><img src="1775.gif" tppabs="http://www.suse.url.tw/picture/1775.gif" width="18" height="18"></strong></font></font></strong></font></strong></font></font></font></strong></font></font></strong></font> 
指令 renice</strong></font></font><br>
<br>
　renice 可對執行中的程式重新設定其 nice 值。另外您要留意 nice 與 renice 使用上的差異，<font color="#0000FF">「nice 
-5」的 nice 值為 5，「renice -5」的 nice 值為 -5</font>，千萬不要搞混了。<br>
<br>
<strong>指令語法</strong>：<br>
<table width="100%" border="0" bgcolor="#CCCCCC">
  <tr> 
    <td><strong>renice -n [nice 值] [-p | -u] ID ...</strong></td>
  </tr>
</table>
<br>
<strong>參數說明</strong>：<br>
<table width="100%" border="1">
  <tr> 
    <td width="7%" align="center" valign="middle" nowrap><font color="#000099">-p</font></td>
    <td width="93%"><font color="#000099">指定要調整 nice 值的行程 PID。此為預設參數，可省略。</font></td>
  </tr>
  <tr> 
    <td align="center" valign="middle" nowrap><font color="#000099">-u</font></td>
    <td><font color="#000099">如想把某個帳號執行的所有程式，皆調整成某個 nice 值，就可使用這個參數。</font></td>
  </tr>
</table>
<br>
<strong>範例說明</strong>：<br>
<table width="100%" border="0">
  <tr> 
    <td bgcolor="#000000"><font color="#FFFFFF">barry@suse:~&gt;<strong> <font color="#FFFF00">ping 
      localhost &gt; pingfile &amp;</font></strong><br>
      barry@suse:~&gt; <font color="#FFFF00"><strong>ps aux | grep ping</strong></font><br>
      barry　<font color="#FFFF00">4442</font>　0.7　0.2　1568　592　pts/1　S　08:06　0:00　ping 
      localhost<br>
      <font color="#00FFFF"># </font><font color="#00FFFF" size="2">執行 
      ping 程式後，再查出此程式的 PID 為 4442。</font><br>
      <br>
      <font color="#FFFFFF"><font color="#00FFFF"># </font></font><font color="#00FFFF" size="2">接著使用 
      renice 指令來重設 ping 的 nice 值是5：</font><br>
      barry@suse:~&gt; <font color="#FFFF00"><strong>renice 5 -p 4442</strong></font><br>
      4442: old priority 0, <font color="#FFFF00">new priority 5</font><br>
      <font color="#00FFFF"># </font><font color="#00FFFF" size="2">這裡的 -p 參數亦可省略，因其是預設值。</font><font color="#00FFFF"><br>
      <br>
      </font>barry@suse:~&gt;<strong> <font color="#FFFF00">ps axl | grep ping</font></strong><br>
      4　1000　<font color="#FFFF00">4442</font>　3890　20　<font color="#FFFF00">5</font>　1568　592　schedu　SN　pts/1　0:00　ping 
      localhost<br>
      <font color="#00FFFF"># </font><font color="#00FFFF" size="2">nice 
      值已經重新調整為 5 了。</font><br>
      <br>
      <font color="#00FFFF"># </font><font color="#00FFFF" size="2">再把 ping 程式的 
      nice 值調高為 15：</font><br>
      barry@suse:~&gt;<strong> <font color="#FFFF00">renice 15 4442</font></strong><br>
      4442: old priority 5, <font color="#FFFF00">new priority 15</font><br>
      <br>
      <font color="#00FFFF"># </font><font color="#00FFFF" size="2">接著把 ping 程式的 
      nice 值調為 14：</font><br>
      barry@suse:~&gt;<strong> </strong><font color="#FFFF00"><strong>renice 14 
      4442</strong></font><br>
      renice: 4442: setpriority: Permission denied<br>
      <font color="#00FFFF"># </font><font color="#00FFFF" size="2">咦，為何被拒絕，原來一般使用者一旦將 
      nice 值調高後，就不能再往回調了。</font><br>
      <br>
      <font color="#00FFFF"># </font><font color="#00FFFF" size="2">使用 root 身分將 
      ping 程式的 nice 值調整為 -20 (最高優先權)：</font><br>
      suse:~ #<strong> <font color="#FFFF00">renice -20 4442</font></strong><br>
      4442: old priority 15, <font color="#FFFF00">new priority -20</font><br>
      <br>
      <font color="#00FFFF"># </font><font color="#00FFFF" size="2">將使用者 barry 
      所執行的任何程式，全部修改成 nice 值為 -5：</font><br>
      suse:~ #<strong> <font color="#FFFF00">renice -5 -u barry</font></strong></font></td>
  </tr>
</table>
<p> 　綜合以上的說明，我們來做個總結：</p>
<blockquote> 
  <ol>
    <li><font color="#0000FF">執行程式的 nice 值預設為 0，nice 值大於 0 就被視為低優先權，nice 值小於 0 
      就是高優先權。</font></li>
    <li><font color="#0000FF">nice 值愈大，程式的優先權愈低 ﹔nice 值愈小，程式的優先權愈高。</font></li>
    <li><font color="#0000FF">一般使用者只能設定大於 0 的 nice 值，且 nice 值一旦調高後就不能再往回調。</font></li>
    <li><font color="#0000FF">只有 root 能設定程式的最高優先權。</font></li>
    <li><font color="#0000FF">一般使用者只能設定及調整自己的 nice 值。</font></li>
  </ol>
</blockquote>
<p> <strong><font color="#000000" size="+1"><a name="28"></a><font size="5">4.2.4 
  工作管理 ( Jobs Control )</font></font></strong><br>
  <br>
  　當您輸入一指令或藉由 pipe 輸入多指令時，就已經新增了一個工作了，所以一個 job 是可以包含多個 process 的。而您只能在前景 ( foreground 
  ) 執行一個 job，但是可以在背景 ( background ) 執行多個 jobs ( 同一終端機下 )。舉例如下：</p>
<table width="100%" border="0">
  <tr> 
    <td bgcolor="#000000"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#00FFFF"># 
      </font></font><font color="#00FFFF" size="2">執行第一個工作：</font><br>
      barry@suse:~&gt; <font color="#FFFF00"><strong>ping localhost &gt; file 
      &amp;</strong></font><br>
      [1] 3794 <br>
      <font color="#00FFFF"># </font><font color="#00FFFF" size="2">讓 ping 程式在背景執行工作。</font><br>
      <br>
      barry@suse:~&gt; <font color="#FFFF00"><strong>jobs</strong></font><br>
      [1]+ 　Running 　　　ping localhost &gt; file &amp; <br>
      <font color="#00FFFF"># </font><font color="#00FFFF" size="2">jobs 指令可以顯示在這個終端機上的背景工作，這其中包括暫停或執行中的工作。</font><br>
      <font color="#00FFFF"># </font><font color="#00FFFF" size="2">而前面的數字 [1]，表示工作編號 
      (job number)。</font><br>
      <br>
      <font color="#FFFFFF"><font color="#00FFFF"># </font></font><font color="#00FFFF" size="2">接著再執行第二個工作：</font><br>
      barry@suse:~&gt;<strong> <font color="#FFFF00">top</font></strong><br>
      <font color="#FFFFFF"><font color="#00FFFF"># </font></font><font color="#00FFFF" size="2">此時按下 
      <strong>Ctrl-Z</strong> 來暫停工作：</font><br>
      <br>
      [2]+ 　　Stopped 　　　　top<br>
      <font color="#FFFFFF"><font color="#00FFFF"># </font></font><font color="#00FFFF" size="2">那個 
      Stopped，表示此工作在背景是暫停狀態。</font><br>
      <br>
      <font color="#FFFFFF"><font color="#00FFFF"># </font></font><font color="#00FFFF" size="2">再執行第三個工作：</font><br>
      barry@suse:~&gt; <font color="#FFFF00"><strong>cat /etc/termcap | head -200 
      | tail -100 | less</strong></font><br>
      <font color="#FFFFFF"><font color="#00FFFF"># </font></font><font color="#00FFFF" size="2">再按 
      <strong>Ctrl-Z</strong><font color="#9999FF"><strong> </strong></font>來暫停：</font><br>
      <br>
      [3]+ 　　Stopped 　　　　cat /etc/termcap | head -200 | tail -100 | less<br>
      <br>
      <font color="#FFFFFF"><font color="#00FFFF"># </font></font><font color="#00FFFF" size="2">現在再輸入<strong> 
      jobs </strong>指令：</font><br>
      barry@suse:~&gt;<strong> <font color="#FFFF00">jobs</font></strong><br>
      <font face="細明體">[1]　　Running 　　ping localhost &gt; file &amp;<br>
      [2]-　 Stopped 　　top<br>
      [3]+　 Stopped 　　cat /etc/termcap | head -200 | tail -100 | less</font><br>
      <font color="#00FFFF"># </font></font><font color="#00FFFF" size="2">目前總共看到了三個在背景的工作，有兩個工作處於暫停狀態，一個處於執行狀態。</font><font color="#FFFFFF"><br>
      <br>
      barry@suse:~&gt;<font color="#FFFF00"><strong> 
      jobs -l</strong></font><br>
      <font face="細明體">[1] 　3794　Running　　　　　　ping localhost &gt; file &amp;<br>
      [2]-　4007　Stopped (signal) 　top<br>
      [3]+　4008　Broken pipe 　　　 cat /etc/termcap<br>
      　　　4009　Done 　　　　　　　| head -200<br>
      　　　4010　Done 　　　　　　　| tail -100<br>
      　　　4011　Stopped 　　　　　 | less</font><br>
      <font color="#FFFFFF"><font color="#00FFFF"># </font></font><font color="#00FFFF"><font size="2">加上個 
      &quot;-l&quot; 參數，就會額外顯示 PID 的訊息。</font><font color="#FFFFFF"><font color="#00FFFF" size="2">從這裡不難看出此三個工作，總共包含了</font></font></font><br>
      <font color="#00FFFF"># </font> 
      <font color="#FFFFFF"><font color="#00FFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#00FFFF"><font size="2">六個 
      process，</font></font></font></font><font size="2">這也是剛才所說的一個工作可包含多個 process 
      之意。</font></font></font></font> </td>
  </tr>
</table>
<br>
　針對剛剛建立的那三個背景工作，如果想要再把它拉到前景執行，那使用 <font color="#0000FF">fg</font> 指令即可 ﹔反過來說，使用 
<font color="#0000FF">bg</font> 指令就是讓工作能在背景執行囉。請接著參考以下的範例：<br>
<br>
<table width="100%" border="0">
  <tr> 
    <td bgcolor="#000000"><font color="#FFFFFF">barry@suse:~&gt;<strong><font color="#FFFF00"> 
      fg %1</font></strong><br>
      <font color="#00FFFF"># <font size="2">將工作編號 1 之工作，丟到前景執行。那個 % 符號也可省略。</font></font><br>
      <br>
      <font color="#00FFFF"># <font size="2">接著按下 Ctrl-Z 來暫停工作：</font></font><br>
      [1]+　Stopped　　　ping localhost &gt; file <br>
      <br>
      barry@suse:~&gt; <font color="#FFFF00"><strong>jobs</strong></font><br>
      <font face="細明體">[1]+　Stopped　　 ping localhost &gt; file<br>
      [2] 　Stopped 　　top<br>
      [3]-　Stopped 　　cat /etc/termcap | head -200 | tail -100 | less</font><br>
      <font color="#00FFFF"># <font size="2">工作編號 1 之工作，已於背景被暫停了。</font></font><br>
      <br>
      <font color="#00FFFF"># <font size="2">現在再把工作編號 1 之背景暫停工作，變成背景執行工作：</font></font><br>
      barry@suse:~&gt;<strong><font color="#FFFF00"> bg %1</font></strong><br>
      [1]+ 　　　ping localhost &gt; file &amp;<br>
      <br>
      barry@suse:~&gt; <font color="#FFFF00"><strong>jobs</strong></font><br>
      <font face="細明體">[1] 　Running　　ping localhost &gt; file &amp;<br>
      [2]-　Stopped　　top<br>
      [3]+　Stopped　　cat /etc/termcap | head -200 | tail -100 | less <br>
      </font><font color="#FFFFFF"><font color="#00FFFF"># </font></font><font face="細明體"><font color="#00FFFF" size="2">工作編號 
      1 之工作，已在背景執行囉。</font> </font></font></td>
  </tr>
</table>
<br>
　現在若想要終止工作，可使用<strong> </strong><font color="#0000FF">kill </font>指令：<br>
<br>
<table width="100%" border="0" bgcolor="#000000">
  <tr> 
    <td><font color="#FFFFFF">barry@suse:~&gt;<strong><font color="#FFFF00"> kill 
      %3</font></strong><br>
      <font color="#FFFFFF"><font color="#00FFFF"># </font></font><font face="細明體"><font color="#00FFFF" size="2">此時在 
      job number 之前，一定要加上 &quot;%&quot;，不然會變成終止 PID 為 3 的 process。<br>
      </font><font color="#FFFFFF"><font color="#FFFFFF"><font color="#00FFFF"># 
      </font></font><font face="細明體"><font color="#00FFFF" size="2"> <font color="#00FFFF" size="2">至於 
      kill 指令的詳細用法，就是下一小節要介紹的。</font></font></font></font><font color="#00FFFF" size="2"> 
      </font></font></font></td>
  </tr>
</table>
<br>
<font color="#000000" size="+1"><strong><br>
<a name="29"></a><font size="5">4.2.5 kill 指令、訊號 (Signals)</font></strong></font> 
<br>
<br>
　一般人會誤認為 kill 指令就是用來殺掉 (終止) 行程用的，其實不然，因為 kill 真正的用途，是要看我們對所指定的行程送出什麼訊號來決定的，也就是說執行 
kill 時，可以藉由送出不同的訊號來對程式執行不同的動作，所以要學會 kill 指令，首先就必須要了解所謂的 signals 有哪些 ? 請執行「<font color="#0000FF">kill 
-l</font>」來了解一下：<br>
<br>
<img src="signal.gif" tppabs="http://www.suse.url.tw/picture/signal.gif" width="657" height="305"><br>
<br>
　看到這麼多的 Signals，您可能開始想打退堂鼓了，其實我們一般會使用到的也只是那少數幾個而已。想看每個訊號以及訊號值 ( signal value ) 
所代表的意義，請用「<font color="#0000FF">man 7 signal</font>」去查閱，這裡只列舉幾個給大家參考： <br>
<br>
<table width="100%" border="1">
  <tr bgcolor="#CCCCCC"> 
    <td align="center" valign="middle" nowrap><font color="#000099"><strong>訊號名稱</strong></font></td>
    <td align="center" valign="middle" nowrap><font color="#000099"><strong>訊號值</strong></font></td>
    <td> <div align="center"><font color="#000099"><strong>代　表　意　義</strong></font></div></td>
  </tr>
  <tr> 
    <td width="10%" align="center" valign="middle" nowrap><font color="#000099">SIGINT</font></td>
    <td width="8%" align="center" valign="middle" nowrap><font color="#000099">2</font></td>
    <td width="82%"><font color="#000099">對於一個佔用前景執行的程序，可以藉由鍵盤按下 Ctrl-C 來中斷 (Interrupt) 
      行程，而在按下 Ctrl-C 時，實際上就是送出一個 SIGINT 的中斷訊號給這個 process。</font></td>
  </tr>
  <tr> 
    <td align="center" valign="middle" nowrap><font color="#000099">SIGSTOP </font></td>
    <td align="center" valign="middle" nowrap><font color="#000099">19</font></td>
    <td><font color="#000099">對於一個佔用前景執行的程序，可以藉由鍵盤按下 Ctrl-Z 來暫停 (Stop) 行程，而在按下 
      Ctrl-Z 時，實際上就是送出一個 SIGSTOP 的暫停訊號給這個 process。</font></td>
  </tr>
  <tr> 
    <td align="center" valign="middle" nowrap><font color="#000099">SIGTERM </font></td>
    <td align="center" valign="middle" nowrap><font color="#000099">15</font></td>
    <td nowrap><font color="#000099">依正常終止程序來結束 (Terminate) 該行程的執行，這是預設值。</font></td>
  </tr>
  <tr> 
    <td align="center" valign="middle" nowrap><font color="#000099">SIGKILL</font></td>
    <td align="center" valign="middle" nowrap><font color="#000099">9</font></td>
    <td><font color="#000099">對行程送出一個 SIGKILL 的強迫終止訊號。除非您很清楚知道自己在做什麼，否則不建議如此做。</font></td>
  </tr>
  <tr> 
    <td align="center" valign="middle" nowrap><font color="#000099">SIGHUP </font></td>
    <td align="center" valign="middle" nowrap><font color="#000099">1</font></td>
    <td><font color="#000099">要讓程式重新載入相關檔案時，可對其送出一個 SIGHUP 的訊號。</font></td>
  </tr>
</table>
<strong><br>
</strong>　接著就來學習 kill 指令怎麼使用。<strong><br>
<br>
<font size="+1"><a name="30"></a><font color="#000000"><font size="+1"><strong><font size="+1"><strong><font color="#FF0000"><font color="#000000"><strong><font color="#FF0000"><font color="#000000" size="+1"><strong><font color="#000000" size="+1"><strong><font color="#FF0000"><font color="#000000" size="+1"><strong><img src="1775.gif" tppabs="http://www.suse.url.tw/picture/1775.gif" width="18" height="18"></strong></font></font></strong></font></strong></font></font></strong></font></font></strong></font></strong></font></font> 
指令 kill</font><br>
<br>
　</strong>用來對行程送出訊號或列出訊號表的指令。<strong><br>
<br>
指令語法</strong>：<br>
<table width="100%" border="0" bgcolor="#CCCCCC">
  <tr> 
    <td><strong>kill [-s SIGNAL | -SIGNAL] PID...<br>
      kill -l [SIGNAL]...</strong></td>
  </tr>
</table>
<br>
<strong>參數說明</strong>：<br>
<table width="100%" border="1">
  <tr> 
    <td width="6%" align="center" valign="middle"><font color="#000099">-s</font></td>
    <td width="94%"><font color="#000099">指定要送出的訊號，其後可接訊號名稱或訊號值。</font></td>
  </tr>
  <tr> 
    <td align="center" valign="middle"><font color="#000099">-l</font></td>
    <td><font color="#000099">列出訊號名稱與訊號值的對應關係。</font></td>
  </tr>
</table>
<br>
<strong>範例說明</strong>：<br>
<br>
　<img src="icon.jpg" tppabs="http://www.suse.url.tw/picture/icon.jpg" width="11" height="11"><font color="#000000"><strong><font color="#000099"> 
SIGSTOP</font></strong></font><font color="#000099">：</font><br>
<br>
<table width="100%" border="0">
  <tr> 
    <td bgcolor="#000000"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#00FFFF"># 
      </font></font><font color="#00FFFF" size="2">先執行一支程式，然後對其送出 SIGSTOP 訊號：</font><br>
      barry@suse:~&gt; <font color="#FFFF00"><strong>ping localhost &gt; file1 
      &amp;</strong></font><br>
      [1] 6719<br>
      <br>
      barry@suse:~&gt; <font color="#FFFF00"><strong>kill -STOP 6719<br>
      </strong></font>barry@suse:~&gt;<strong><font color="#FFFF00"> jobs</font></strong><br>
      [1]+ 　<font color="#FFFF00">Stopped</font> 　　ping localhost &gt; file1<br>
      <font color="#FFFFFF"><font color="#00FFFF"># </font></font><font color="#00FFFF" size="2">ping 
      程式已處於暫停狀態了。<font color="#FFFFFF"><br>
      </font></font><br>
      <font color="#FFFFFF"><font color="#FFFFFF"><font color="#00FFFF"># </font></font></font><font color="#00FFFF" size="2">另外使用以下方式來執行也行：</font><br>
      <font color="#FFFF00"><font color="#FFFFFF">barry@suse:~&gt;<strong> </strong></font><strong>kill 
      -SIGSTOP 6719</strong></font><br>
      <font color="#FFFF00"><font color="#FFFFFF">barry@suse:~&gt;<strong> </strong></font><strong>kill 
      -19 6719</strong></font> <br>
      <font color="#FFFF00"><font color="#FFFFFF">barry@suse:~&gt; </font><strong>kill</strong></font> 
      <strong><font color="#FFFF00">-s 19 6719</font></strong><br>
      <font color="#FFFF00"><font color="#FFFFFF">barry@suse:~&gt; </font><strong>kill</strong></font> 
      <strong><font color="#FFFF00">-s SIGSTOP 6719</font></strong></font></td>
  </tr>
</table>
<font color="#FF0000"><br>
　<img src="icon.jpg" tppabs="http://www.suse.url.tw/picture/icon.jpg" width="11" height="11"><font color="#000000"><strong><font color="#000099"> 
SIGTERM</font></strong></font></font><font color="#000099">： </font><br>
<br>
<table width="100%" border="0">
  <tr> 
    <td bgcolor="#000000"><font color="#FFFFFF">suse:~ #<strong> <font color="#FFFF00">kill 
      -TERM 9 19</font></strong><br>
      suse:~ #<strong> <font color="#FFFF00">kill -15 9 19</font></strong><br>
      suse:~ # <font color="#FFFF00"> <strong>kill 9 19</strong></font><br>
      <font color="#FFFFFF"><font color="#FFFFFF"><font color="#00FFFF"># </font></font></font><font color="#00FFFF" size="2">對 
      PID 9 及 19 的行程，送出按正常程序終止的訊號。使用 kill 指令時，其後只接 PID 而</font><br>
      <font color="#FFFFFF"><font color="#FFFFFF"><font color="#00FFFF"># </font></font></font><font color="#00FFFF" size="2">未指定 
      Signal 時，預設就是送出 SIGTERM (15) 的訊號。</font></font></td>
  </tr>
</table>
<font color="#FF0000"><br>
　<img src="icon.jpg" tppabs="http://www.suse.url.tw/picture/icon.jpg" width="11" height="11"><font color="#000000"><strong><font color="#000099"> 
SIGKILL</font></strong></font></font><font color="#000099">：</font><br>
<br>
<table width="100%" border="0">
  <tr> 
    <td bgcolor="#000000"><font color="#FFFFFF">suse:~ # <font color="#FFFF00"><strong>kill 
      -KILL 936</strong></font><br>
      suse:~ # <font color="#FFFF00"><strong>kill -9 936</strong></font><br>
      <font color="#FFFFFF"><font color="#FFFFFF"><font color="#00FFFF"># </font></font></font><font color="#00FFFF" size="2">對 
      PID 為 936 的行程，送出強迫終止的訊號。</font></font></td>
  </tr>
</table>
<font color="#FF0000"><br>
　<img src="icon.jpg" tppabs="http://www.suse.url.tw/picture/icon.jpg" width="11" height="11"><font color="#000000"><strong><font color="#000099"> 
SIGHUP</font></strong></font></font><font color="#000099">：</font> <br>
<br>
<table width="100%" border="0">
  <tr> 
    <td bgcolor="#000000"><p><font color="#FFFFFF">suse:~ # <font color="#FFFF00"> 
        <strong>kill -HUP 888</strong></font><br>
        suse:~ # <font color="#FFFF00"><strong>kill -1 888<br>
        </strong></font><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#00FFFF"># 
        </font></font><font color="#00FFFF" size="2">送出這個 SIGHUP 訊號，主要就是讓程式重新去載入其所參考的檔案。</font><font color="#FFFFFF"><font color="#00FFFF"> 
        </font></font></font></font></font></p>
      <p><font color="#FFFFFF"><font color="#FFFFFF"><font color="#00FFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#00FFFF"># 
        </font></font></font></font><font size="2">再舉個例子，比如 syslog-ng.conf 設定檔修改過後，您需要讓 
        syslog-ng 程式重新去</font></font></font><br>
        <font color="#FFFFFF"><font color="#FFFFFF"><font color="#00FFFF"># </font></font><font color="#00FFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#00FFFF"><font size="2"> 
        </font><font color="#FFFFFF"><font color="#FFFFFF"><font color="#00FFFF"><font size="2">讀取</font></font></font></font> 
        <font size="2">syslog-ng.conf ，</font></font></font></font><font size="2">這樣新的設定值才會生效：</font></font></font><br>
        suse:~ # <font color="#FFFF00"><strong>kill -HUP `cat /var/run/syslog-ng.pid` 
        </strong></font><br>
        suse:~ # <font color="#FFFF00"><strong>kill -HUP `pidof syslog-ng` <br>
        </strong></font><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#00FFFF"># 
        </font></font><font color="#00FFFF" size="2">以上兩種執行方式，是分別利用 syslog-ng.pid 
        檔案及<strong> </strong>pidof<strong> </strong>指令，<br>
        </font><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#00FFFF"># 
        </font></font><font color="#00FFFF" size="2"></font></font></font></font><font color="#00FFFF" size="2">來找出 
        syslog-ng 的 PID。</font></font></font><font color="#FFFF00"><strong> </strong></font></font><br>
        <br>
        <font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#00FFFF"># 
        </font></font></font></font></font><font color="#00FFFF" size="2">另外亦可使用 
        killall 指令來做這件事：</font><br>
        <font color="#FFFFFF">suse:~ # <font color="#FFFF00"><strong>killall -HUP 
        syslog-ng<br>
        </strong></font><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#00FFFF"># 
        </font></font><font color="#00FFFF" size="2">killall 指令與 kill 不同的是， killall 
        最後面接的為程式名稱，而非 PID。<br>
        </font><font color="#FFFFFF"><font color="#FFFFFF"><font color="#00FFFF"># 
        </font></font></font></font></font><font color="#00FFFF" size="2">另外 killall 
        能送出訊號給您所指定程式的所有 process。</font><font color="#FFFF00"><strong><br>
        </strong></font></font></p></td>
  </tr>
</table>
<p><font color="#0000FF" size="+1"><strong><br>
  <a name="32"></a><font size="6">4.3 執行基本檔案管理</font></strong></font></p>
<p>　在這一節中，要介紹幾個與檔案管理相關的指令，包括基本的新增、複製、刪除、移動檔案的指令，以及進一步地修改檔案的權限、擁有者及擁有群組指令。不過在此之前，您必須先認識檔案的相關屬性以及權限的概念，然後才知道要如何執行管理的工作。舉個例子來說，假使您現在開放某個目錄給使用者存取，結果使用者跟您反應說他無法瀏覽檔案或目錄的內容，這時候身為管理者的您，可能就要先檢查一下相關檔案目錄的權限，然後再進一步的去做一些調整。<br>
  <br>
  <strong><a name="33"></a><font size="5">4.3.1 檔案屬性的介紹</font><br>
  <br>
  </strong> 　平常使用長格式所顯示的資訊，就是代表著這個檔案的相關屬性。以下我們以 /etc/passwd 的長格式來做範例，說明每個欄位所代表的意義：</p>
<table width="100%" border="0">
  <tr> 
    <td bgcolor="#000000"><font color="#FFFFFF">barry@suse:~&gt;<strong><font color="#FFFF00"> 
      ls -l /etc/passwd</font></strong><br>
      <font face="細明體">-rw-r--r--　　 1 　 root 　root 　 1821 　Dec 10 00:52 　/etc/passwd</font><br>
      <font size="2"><font color="#00FFFF">檔案類型及權限</font></font></font><font size="2"><font color="#00FFFF">　連結數　擁有者　擁有群組　檔案大小　　　<font size="2">時間<font size="2">欄位　　　　　檔案名稱</font><font color="#FFFFFF"><font color="#FFFFFF">　</font></font></font></font></font><font color="#FFFFFF"><br>
      　　　1　　　　2　　　3　　　4　　　 5　　　　　 6　　　　　　　7</font></td>
  </tr>
</table>
<ol>
  <li><strong>檔案類型及權限</strong><font size="+1"><font size="4">：</font></font>這個欄位總共有十個字元，第一個字元代表的是檔案類型 
    (file type)，其後的九個字元代表的是檔案權限，以下分別來做說明。<font size="+1"><font size="4"> <br>
  </font></font> 
  <table width="96%" border="0">
    <tr> 
      <td width="4%" align="center"><font color="#FF0000"><img src="icon.jpg" tppabs="http://www.suse.url.tw/picture/icon.jpg" width="11" height="11"></font></td>
      <td width="96%"><strong><font color="#000099">檔案類型</font></strong></td>
    </tr>
    <tr> 
      <td align="center">&nbsp;</td>
        <td>常看到的有以下幾種：<br> 
          <table width="100%" border="0">
            <tr> 
              <td width="3%" align="center" valign="top" nowrap><font color="#0000FF" size="4">˙</font><font color="#0000FF"><font face="細明體">-：</font></font></td>
              <td width="97%"><font color="#000000">代表的是檔案，包括一般文字檔、硬式連結檔、可執行檔、壓縮檔等。</font></td>
            </tr>
            <tr> 
              <td align="center" valign="top" nowrap><font color="#0000FF" size="4">˙</font><font color="#0000FF"><font face="細明體">d：</font></font></td>
              <td><font color="#000000">代表的是目錄 (directory)。</font></td>
            </tr>
            <tr> 
              <td align="center" valign="top" nowrap><font color="#0000FF" size="4">˙</font><font color="#0000FF"><font face="細明體">l：</font></font></td>
              <td><font color="#000000">代表的是符號連結檔。</font></td>
            </tr>
            <tr> 
              <td align="center" valign="top" nowrap><font color="#0000FF" size="4">˙</font><font color="#0000FF"><font face="細明體">c：</font></font></td>
              <td><font color="#000000">代表的是字元裝置檔 (character device file)。對於字元裝置而言，其資料的讀寫方式是以一連串的字元來做傳輸，且是有順序性的一次只傳一個 
                byte 的資料。比方像印表機、鍵盤、滑鼠、螢幕等等。</font></td>
            </tr>
            <tr> 
              <td align="center" valign="top" nowrap><font color="#0000FF" size="4">˙</font><font color="#0000FF"><font face="細明體">b：</font></font></td>
              <td><font color="#000000">代表的是區塊裝置檔 (block device file)。對於區塊裝置而言，其資料的讀寫方式是以固定區塊大小來做存取，且是隨機性的，像一般的儲存裝置就屬之。比如硬碟、光碟機、軟碟機等等。</font></td>
            </tr>
          </table>
          <blockquote> 
            <p><strong><font color="#000099">Tips：</font></strong><font color="#000099" size="2">在瀏覽目錄內容時，會發覺有很多不同顏色的名稱，比如看到的是藍色，代表的就是目錄 
              ﹔白色代表的是一般檔案 ﹔紅色是壓縮檔 ﹔黃色是裝置檔 ﹔天空色是符號連結檔 ﹔綠色是執行檔 ﹔當然還有幾個比較特殊的檔案，這裡就不提了。</font></p>
          </blockquote>
          針對裝置檔案的部分，請參考以下範例：<strong><br>
          <br>
          </strong> 
          <table width="100%" border="0" bgcolor="#000000">
            <tr> 
              <td><font color="#FFFFFF">barry@suse:/dev&gt; <font color="#FFFF00"><strong>ls 
                -l psaux tty2 lp0 ttyS0</strong></font><br>
                <font face="細明體">crw-rw---- 1 root　 lp 　 6, 0　Dec 10 16:07 lp0<br>
                crw-rw---- 1 root　 root 10, 1　Dec 10 16:07 psaux<br>
                crw--w---- 1 barry　tty 　4, 2　Dec 10 15:38 tty2<br>
                crw-rw---- 1 root 　uucp　4,64　Jun 16 21:07 ttyS0</font><br>
                </font> <font color="#FFFFFF"><br>
                barry@suse:/dev&gt;<strong> <font color="#FFFF00">ls -l sda hdc 
                fd0 </font></strong><br>
                <font face="細明體">brw-r----- 1 root 　disk　2, 0　Dec 10 16:07 fd0<br>
                brw-r----- 1 root 　disk 22, 0　Dec 10 16:07 hdc<br>
                brw-r----- 1 root 　disk　8, 0　Dec 10 16:07 sda</font></font></td>
            </tr>
          </table></td>
    </tr>
    <tr> 
      <td align="center">&nbsp;</td>
      <td>&nbsp;</td>
    </tr>
    <tr> 
      <td align="center"><font color="#FF0000"><img src="icon.jpg" tppabs="http://www.suse.url.tw/picture/icon.jpg" width="11" height="11"></font></td>
      <td><strong><font color="#000099">檔案權限</font></strong></td>
    </tr>
    <tr> 
      <td align="center">&nbsp;</td>
      <td>以三個字元 r (read)、w (write) 、x (execute) 為一組，共分三組。至於其代表意義如下：<br> 
          <table width="100%" border="0">
            <tr> 
              <td width="7%" align="center" valign="top" nowrap><font color="#0000FF" size="4" face="細明體">˙</font><font color="#0000FF" face="細明體">rw-<font size="4">：</font></font></td>
              <td width="93%"><font color="#000000">第一組代表的是檔案擁有者所擁有的權限 ( owner 
                permission ) 為可讀、可寫、不可執行。</font></td>
            </tr>
            <tr> 
              <td align="center" valign="top" nowrap><font color="#0000FF" size="4" face="細明體">˙</font><font color="#0000FF" face="細明體">r--<font size="4">：</font></font></td>
              <td><font color="#000000">第二組代表的是檔案擁有群組所擁有的權限 ( group permission 
                ) 為可讀、不可寫、不可執行。當群組對此檔案擁有什麼權限，那麼群組成員就擁有與該群組相同的權限。</font></td>
            </tr>
            <tr> 
              <td align="center" valign="top" nowrap><font color="#0000FF" size="4" face="細明體">˙</font><font color="#0000FF" face="細明體">r--<font size="4">：</font></font></td>
              <td><font color="#000000">第三組代表的是其他人所擁有的權限 ( others permission ) 
                為可讀、不可寫、不可執行。非檔案的擁有者及擁有群組，就被歸類為其他人。</font></td>
            </tr>
          </table></td>
    </tr>
  </table>
  <br>
  </li> 
  <li><strong>連結數</strong> (link count)：連結數的計算方式，檔案與目錄有所不同，請參考以下說明。<br>
    <table width="100%" border="0">
      <tr> 
        <td width="3%" align="center" valign="middle"><strong><font color="#FF0000"><img src="icon.jpg" tppabs="http://www.suse.url.tw/picture/icon.jpg" width="11" height="11"></font></strong></td>
        <td width="97%"><strong><font color="#000099">檔案連結數</font></strong></td>
      </tr>
      <tr> 
        <td align="center" valign="middle">&nbsp;</td>
        <td>是針對硬式連結檔來做計算的，比如您對某個檔案建立了硬式連結檔，那麼這個檔案及硬式連結檔使用長格式去觀察時，其連結數就是 2 (本身與對方)。 
        </td>
      </tr>
      <tr> 
        <td align="center" valign="middle"><strong><font color="#FF0000"><img src="icon.jpg" tppabs="http://www.suse.url.tw/picture/icon.jpg" width="11" height="11"></font></strong></td>
        <td><strong><font color="#000099">目錄</font></strong><font color="#000099"><strong>連結數</strong></font></td>
      </tr>
      <tr> 
        <td align="center" valign="middle">&nbsp;</td>
        <td>其連結數的計算方式就等於其下的子目錄數 (包含隱藏目錄) 加上 2，因為要把本身及上層目錄計算進去。 </td>
      </tr>
    </table>
    <br>
  </li>
  <li><strong>檔案擁有者</strong>：該檔案是哪個使用者所擁有的。<br>
    <br>
  </li>
  <li><strong>檔案擁有群組</strong>：該檔案的擁有群組為何。<br>
    <br>
  </li>
  <li><strong>檔案大小</strong>：單位為 bytes。<br>
    <br>
  </li>
  <li><strong>時間欄位</strong>：檔案建立的時間或最後修改的時間。若您使用「<font color="#0000FF">ls -lu</font>」去看的話，就是檔案的最後存取時間。 
    <br>
    <br>
  </li>
  <li><strong>檔案名稱</strong>：名稱有區分大小寫，比如 testfile 與 Testfile 是不一樣的。 </li>
</ol>
<strong> <font size="+1"><font color="#000000"><font size="+1"><strong><font size="+1"><strong><font color="#FF0000"><font color="#000000"><strong><font color="#FF0000"><font color="#000000" size="+1"><strong><font color="#000000" size="+1"><strong><font color="#FF0000"><font color="#000000" size="+1"><strong><img src="1775.gif" tppabs="http://www.suse.url.tw/picture/1775.gif" width="18" height="18"></strong></font></font></strong></font></strong></font></font></strong></font></font></strong></font></strong></font></font></font></strong> 
<font color="#000000" size="4"><strong>對 r、w、x 做進一步的探討</strong></font><br>
<br>
　接著分別就檔案及目錄的權限觀念做進一步的說明：<br>
<br>
<table width="100%" border="0">
  <tr> 
    <td width="2%">&nbsp;</td>
    <td width="3%" align="center"><strong><font color="#FF0000"><img src="icon.jpg" tppabs="http://www.suse.url.tw/picture/icon.jpg" width="11" height="11"></font></strong></td>
    <td width="95%"><font color="#FF0000"><font color="#000099"><strong>針對檔案</strong></font></font></td>
  </tr>
  <tr> 
    <td>&nbsp;</td>
    <td align="center">&nbsp;</td>
    <td><table width="100%" border="0">
        <tr> 
          <td width="6%" align="center" valign="top" nowrap><font color="#0000FF" size="4" face="細明體">˙</font><font color="#0000FF" face="細明體">r<font size="4">：</font></font></td>
          <td width="94%"><font color="#000000">可以讀取檔案的內容。</font></td>
        </tr>
        <tr> 
          <td align="center" valign="top" nowrap><font color="#0000FF" size="4" face="細明體">˙</font><font color="#0000FF" face="細明體">w<font size="4">：</font></font></td>
          <td><font color="#000000">可以寫入檔案，也就是可以修改檔案內容的意思。</font></td>
        </tr>
        <tr> 
          <td align="center" valign="top" nowrap><font color="#0000FF" size="4" face="細明體">˙</font><font color="#0000FF" face="細明體">x<font size="4">：</font></font></td>
          <td><font color="#000000">可以執行該檔案。像平常我們所執行的指令或 scripts，您就必須對它具有 x 權限方可執行。在 
            Linux 中，檔案是否能被執行，是根據權限來判定，與副檔名沒有絕對的關係。</font></td>
        </tr>
      </table></td>
  </tr>
  <tr> 
    <td>&nbsp;</td>
    <td align="center">&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr> 
    <td>&nbsp;</td>
    <td align="center"><strong><font color="#FF0000"><img src="icon.jpg" tppabs="http://www.suse.url.tw/picture/icon.jpg" width="11" height="11"></font></strong></td>
    <td><font color="#000099"><strong>針對目錄</strong></font></td>
  </tr>
  <tr> 
    <td>&nbsp;</td>
    <td align="center">&nbsp;</td>
    <td><table width="100%" border="0">
        <tr> 
          <td width="6%" align="center" valign="top" nowrap><font color="#0000FF" size="4" face="細明體">˙</font><font color="#0000FF" face="細明體">r<font size="4">：</font></font></td>
          <td width="94%"><font color="#000000">可以讀取目錄的內容，也就是可以藉著執行 ls 指令，來瀏覽該目錄下存在著哪些子目錄及檔案名稱。</font></td>
        </tr>
        <tr> 
          <td align="center" valign="top" nowrap><font color="#0000FF" size="4" face="細明體">˙</font><font color="#0000FF" face="細明體">w<font size="4">：</font></font></td>
          <td><font color="#000000">可以寫入目錄，表示可以修改目錄內容的意思，比如您可以在此目錄下做新增、刪除、移動及重新命名的動作。</font></td>
        </tr>
        <tr> 
          <td align="center" valign="top" nowrap><font color="#0000FF" size="4" face="細明體">˙</font><font color="#0000FF" face="細明體">x<font size="4">：</font></font></td>
          <td><font color="#000000">可以對此目錄做存取，也就是可以進入到該目錄的意思。</font></td>
        </tr>
      </table></td>
  </tr>
</table>
<br>
<font color="#FF0000"><font color="#000000">　目錄的執行權限非常重要，因為它是使用者能否存取該目錄的一個關鍵。假設使用者對 
/dir/file 具備 r、w、x 的所有權限，但偏偏對 /dir 缺乏了 x 權限，此時該使用者對 /dir/file 是不具備任何權限的，因為使用者對 
file 的所屬目錄就已經不具任何存取資格了，更不要說對它底下的檔案，這個觀念各位一定要明白。</font><br>
</font> <br>
　舉個檔案複製的例子來說明好了，假使目前有兩個目錄 /dir1 及 /dir2，在 /dir2 底下還有個檔案 file2，現在想將 /dir2/file2 
複製到 /dir1 中，則該使用者對 /dir1 需具有 w 及 x 的權限，因為對 /dir1 來說，等於是多一個檔案出來，所以當然要有 w 權限，至於 
x 權限則是必須的，如您連對 /dir1 的存取權限都沒有，那就不用玩了。再來是使用者對 /dir2 只需具備 x 的權限即可，因 /dir2 的內容您並沒有做任何的異動，自然就不需要 
w 權限了。<br>
<br>
<br>
<font size="+1"><strong><a name="34"></a><font size="+2">4.3.2 基本檔案管理指令</font></strong></font><br>
<br>
　這裡主要是介紹基本的檔案複製、搬移、建立、刪除等操作指令，這可都是將來您常會使用到的基本指令噢，請務必熟悉。<br>
<br>
<a name="37"></a><strong><font size="+1"><font color="#000000"><font size="+1"><strong><font size="+1"><strong><font color="#FF0000"><font color="#000000"><strong><font color="#FF0000"><font color="#000000" size="+1"><strong><font color="#000000" size="+1"><strong><font color="#FF0000"><font color="#000000" size="+1"><strong><img src="1775.gif" tppabs="http://www.suse.url.tw/picture/1775.gif" width="18" height="18"></strong></font></font></strong></font></strong></font></font></strong></font></font></strong></font></strong></font></font> 
指令 mkdir</font></strong><br>
<br>
　建立目錄的指令。<br>
<br>
<strong>指令語法</strong>：<br>
<table width="100%" border="0">
  <tr> 
    <td bgcolor="#CCCCCC"><strong><font face="細明體">mkdir [OPTION] DIRECTORY...</font></strong></td>
  </tr>
</table>
<br>
<strong>參數說明</strong>： 
<table width="100%" border="1">
  <tr> 
    <td width="7%" align="center" valign="middle" nowrap><font color="#000099">-p</font></td>
    <td width="93%"><font color="#000099">此參數可以用來遞迴建立空目錄。</font></td>
  </tr>
  <tr> 
    <td align="center" valign="middle" nowrap><font color="#000099">-m</font></td>
    <td><font color="#000099">建立目錄的同時，指定該目錄的權限。</font></td>
  </tr>
</table>
<br>
<strong>範例說明</strong>：<br>
<table width="100%" border="0">
  <tr> 
    <td bgcolor="#000000"><font color="#FFFFFF">barry@suse:~&gt;<strong> <font color="#FFFF00">mkdir 
      dir1 dir2 dir3</font></strong><br>
      <font color="#00FFFF"># </font><font color="#00FFFF" size="2"> 建立三個新目錄。</font><br>
      <br>
      barry@suse:~&gt;<strong> <font color="#FFFF00" face="細明體">mkdir my\ dir 
      &quot;your dir&quot; </font></strong><font color="#FFFF00"><br>
      </font><font color="#FFFFFF"> <font color="#00FFFF"># </font><font color="#00FFFF" size="2">這是所建立的目錄名稱中，含有空白字元的兩種做法。</font></font><br>
      <br>
      barry@suse:~&gt; <font color="#FFFF00"><strong>mkdir -- -dir</strong></font><br>
      <font color="#00FFFF"># </font><font color="#00FFFF" size="2">如目錄名稱是以 &quot;-&quot; 
      做開始，則前面要加上 &quot;--&quot;。 </font><font color="#00FFFF"><br>
      </font><br>
      barry@suse:~&gt; <font color="#FFFF00"><strong>mkdir -p dir5/dir6/dir7</strong></font><br>
      <font color="#00FFFF"># </font><font color="#00FFFF" size="2">遞迴建立空目錄。利用這種方式，可一次幫您建立多層目錄噢。</font><br>
      <br>
      barry@suse:~&gt;<strong> <font color="#FFFF00"> mkdir -m 0700 barrydir</font></strong><br>
      barry@suse:~&gt; <font color="#FFFF00"> <strong>ls -ld barrydir</strong></font><br>
      <font face="細明體">drwx------</font> 　2 　barry 　users 　1024 　Feb 19 20:01<font color="#0066FF"> 
      　<font color="#0099FF">barrydir</font></font><br>
      <font color="#00FFFF"># </font><font color="#00FFFF" size="2">新增目錄的同時，也順便指定此目錄的權限。權限的設定方式，在 
      4.3.3 小節中會說明。</font></font></td>
  </tr>
</table>
<strong><br>
<font size="+1"><a name="38"></a><font color="#000000"><font size="+1"><strong><font size="+1"><strong><font color="#FF0000"><font color="#000000"><strong><font color="#FF0000"><font color="#000000" size="+1"><strong><font color="#000000" size="+1"><strong><font color="#FF0000"><font color="#000000" size="+1"><strong><img src="1775.gif" tppabs="http://www.suse.url.tw/picture/1775.gif" width="18" height="18"></strong></font></font></strong></font></strong></font></font></strong></font></font></strong></font></strong></font></font> 
指令 rmdir</font></strong><br>
<br>
　此指令只能用來移除「空」目錄，也就是該目錄沒有任何內容時，方可被移除。<br>
<br>
<strong>指令語法</strong>：<br>
<table width="100%" border="0" bgcolor="#CCCCCC">
  <tr> 
    <td><strong><font face="細明體">rmdir [OPTION]... DIRECTORY...</font></strong></td>
  </tr>
</table>
<br>
<strong>範例說明</strong>：(延續上個範例)<br>
<table width="100%" border="0">
  <tr> 
    <td bgcolor="#000000"><font color="#FFFFFF"> barry@suse:~&gt;<strong> <font color="#FFFF00">rmdir 
      dir1 dir2 dir3</font></strong><font color="#FFFF00"><br>
      </font><font color="#00FFFF"># </font><font color="#00FFFF" size="2">移除三個空目錄。<font color="#FFFFFF"><br>
      </font></font><br>
      barry@suse:~&gt;<strong> <font color="#FFFF00">rmdir -- -dir &quot;my dir&quot;<font color="#FFFFFF"> 
      <font color="#FFFF00">your\ dir</font></font>　</font></strong><font color="#FFFF00"><br>
      </font><font color="#FFFFFF"><font color="#00FFFF"># </font></font><font color="#00FFFF" size="2">移除目錄中，因包含 
      -dir，故前面需加上 --。<br>
      </font><font color="#FFFF00"><br>
      </font>barry@suse:~&gt;<strong> <font color="#FFFF00">rmdir dir5</font></strong><br>
      rmdir: `dir5': Directory not empty <br>
      <font color="#00FFFF"># </font><font color="#00FFFF" size="2">由於 
      dir5 非空目錄，自然無法移除。</font><br>
      <br>
      barry@suse:~&gt; <font color="#FFFF00"><strong>rmdir -p dir5/dir6/dir7</strong></font><br>
      <font color="#00FFFF"># </font><font color="#00FFFF" size="2">遞迴刪除空目錄。</font> 
      </font></td>
  </tr>
</table>
<br>
<strong><font size="+1"><a name="35"></a><font color="#000000"><font size="+1"><strong><font size="+1"><strong><font color="#FF0000"><font color="#000000"><strong><font color="#FF0000"><font color="#000000" size="+1"><strong><font color="#000000" size="+1"><strong><font color="#FF0000"><font color="#000000" size="+1"><strong><img src="1775.gif" tppabs="http://www.suse.url.tw/picture/1775.gif" width="18" height="18"></strong></font></font></strong></font></strong></font></font></strong></font></font></strong></font></strong></font></font> 
指令 cp</font></strong><br>
<br>
　用來複製檔案及目錄的指令。<br>
<br>
<strong>指令語法</strong>：<br>
<table width="100%" border="0" bgcolor="#CCCCCC">
  <tr> 
    <td><strong><font face="細明體">cp [OPTION]... SOURCE DEST<br>
      cp [OPTION]... SOURCE... DIRECTORY</font></strong></td>
  </tr>
</table>
<br>
　在第二個指令語法中，SOURCE... 表示複製的來源有好幾個，那此時複製的目的就必須是一個已經存在的目錄。<br>
<br>
<strong>參數說明</strong>： 
<table width="100%" border="1" cellpadding="6">
  <tr> 
    <td width="7%" align="center" valign="middle" nowrap> <div align="center"><font color="#000099">-i</font></div></td>
    <td width="93%"><font color="#000099">當目的檔已存在時，會提示是否要覆蓋的訊息。</font></td>
  </tr>
  <tr> 
    <td align="center" valign="middle" nowrap> <div align="center"><font color="#000099">-b</font></div></td>
    <td nowrap><font color="#000099">當目的檔已存在時，則先行對其做備份，然後再進行複製的動作。</font></td>
  </tr>
  <tr> 
    <td align="center" valign="middle" nowrap><font color="#000099">-d</font></td>
    <td nowrap><font color="#000099">複製連結檔的屬性。</font></td>
  </tr>
  <tr> 
    <td align="center" valign="middle" nowrap><font color="#000099">-s</font></td>
    <td nowrap><font color="#000099">複製符號連結檔。</font></td>
  </tr>
  <tr> 
    <td align="center" valign="middle" nowrap><font color="#000099">-l</font></td>
    <td nowrap><font color="#000099">複製硬式連結檔。</font></td>
  </tr>
  <tr> 
    <td align="center" valign="middle" nowrap> <div align="center"><font color="#000099">-r(-R)</font></div></td>
    <td nowrap><font color="#000099">用於複製目錄。</font></td>
  </tr>
  <tr> 
    <td align="center" valign="middle" nowrap> <div align="center"><font color="#000099">-f</font></div></td>
    <td><font color="#000099">如目的檔已存在且無法開啟時，則先將其移除後再嘗試複製。</font></td>
  </tr>
  <tr> 
    <td align="center" valign="middle" nowrap> <div align="center"><font color="#000099">-p</font></div></td>
    <td><font color="#000099">保留檔案屬性的複製過來。</font></td>
  </tr>
  <tr> 
    <td align="center" valign="middle" nowrap> <div align="center"><font color="#000099">-a</font></div></td>
    <td> <p><font color="#000099">同於 -dpR 這三個參數的組合，很好用噢 !</font></p></td>
  </tr>
  <tr> 
    <td align="center" valign="middle" nowrap> <div align="center"><font color="#000099">-u</font></div></td>
    <td><font color="#000099">當來源檔比目的檔還要新時，才進行複製。</font></td>
  </tr>
</table>
<br>
<strong>範例說明</strong>：<br>
<table width="100%" border="0" bgcolor="#000000">
  <tr> 
    <td><font color="#FFFFFF">barry@suse:~&gt;<strong> <font color="#FFFF00">cp 
      /etc/passwd file</font></strong></font><br> <font color="#00FFFF"># </font><font color="#FFFFFF"><font color="#00FFFF" size="2">將 
      passwd 的內容複製到 file 內。如 file 是一個已經存在的檔案，則預設會將其內容覆蓋掉。</font><font color="#00FFFF"><br>
      <br>
      </font><font color="#FFFFFF">barry@suse:~&gt; <font color="#FFFF00"><strong>cp 
      /etc/passwd /etc/fstab /tmp/dir</strong></font></font><br>
      </font><font color="#00FFFF"># </font><font color="#FFFFFF"><font color="#00FFFF" size="2">將 
      passwd 及 fstab 複製到 /tmp/dir 目錄下。請注意 dir 必須是一個已經存在的目錄 !</font><br>
      <br>
      barry@suse:~&gt; <font color="#FFFF00"><strong>cp -i /etc/passwd file</strong></font><br>
      cp : overwrite `file' ?<strong> <font color="#FFFF00">n</font></strong><br>
      </font><font color="#00FFFF"># </font><font color="#FFFFFF"><font color="#00FFFF" size="2">因目的檔 
      file 已存在，所以會出現這個詢問訊息。如不想覆蓋 file 內容，就輸入 n 離開。</font><br>
      <br>
      barry@suse:~&gt;<strong> <font color="#FFFF00">cp -b /etc/passwd file</font></strong><br>
      barry@suse:~&gt; <font color="#FFFF00"><strong>ls</strong></font><br>
      file file~<br>
      </font><font color="#00FFFF"># </font><font color="#FFFFFF"><font color="#00FFFF" size="2">利用 
      -b 參數，可把原本檔案 file 先做個備份(備份檔名稱為 file~)，<font color="#FFFFFF"><font color="#FFFFFF"><font color="#00FFFF">然後才進行複製的動作。</font></font></font></font><br>
      <font color="#00FFFF"><br>
      </font> <font color="#FFFFFF">barry@suse:~&gt;<strong> <font color="#FFFF00">cp 
      -r /tmp/dir .</font></strong></font><font color="#00FFFF"> <br>
      # </font><font color="#FFFFFF"><font color="#FFFFFF"><font color="#00FFFF" size="2">使用 
      -r 參數，來將 /tmp/dir 目錄，複製到當前的工作目錄中。</font></font></font><font color="#00FFFF"> 
      <br>
      <br>
      </font><font color="#FFFFFF">suse:~ # <font color="#FFFF00"> <strong>cp 
      -rp /home/barry/* /tmp/dir</strong></font></font><br>
      <font color="#FFFFFF"><font color="#00FFFF"># </font><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#00FFFF" size="2">將 
      barry 家目錄下的所有檔案、目錄(不包含隱藏檔)</font> <font color="#00FFFF" size="2">，保留屬性的全都複製到</font></font><br>
      </font><font color="#00FFFF"># 
      </font><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#00FFFF" size="2">已存在的 
      /tmp/dir 目錄中</font></font></font></font></font></font><font color="#00FFFF" size="2">。</font></font></font></font></font></font></font><font color="#00FFFF"> 
      <br>
      <br>
      </font><font color="#FFFFFF"><font color="#FFFFFF">suse:~ #<strong> <font color="#FFFF00"> 
      cp -a /home/barry </font></strong></font> <strong><font color="#FFFF00">/tmp/barrybck</font></strong></font><br>
      <font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#00FFFF"># 
      </font></font></font></font><font color="#00FFFF"><font size="2">如 barrybck 
      原本不存在，則會將 /home/barry 目錄內容複製至 /tmp/barrybck 目錄內</font></font><font color="#00FFFF" size="2"> 
      ﹔</font><br>
      <font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#00FFFF"># 
      <font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#00FFFF" size="2">如 
      barrybck 原本已存在，則會將 /home/barry 目錄整個複製至 /tmp/barrybck 之中。 <br>
      </font><font size="2"><br>
      </font><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#00FFFF"># 
      </font></font></font></font></font><font color="#00FFFF" size="2">最後練習一下連結檔的複製，首先先建立連結檔：</font><font size="2"><br>
      </font> <font color="#FFFFFF">barry@suse:~&gt;<strong><font color="#FFFF00"> 
      ln -s /etc/passwd /tmp/softfile</font></strong><br>
      <br>
      <font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#00FFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#00FFFF"># 
      </font></font></font></font></font></font></font></font></font></font></font></font></font></font></font></font></font></font></font><font color="#00FFFF" size="2">接著分別使用 
      -d 及 -s 進行複製：</font><br>
      barry@suse:~&gt; <strong><font color="#FFFF00">cp -d /tmp/softfile cpsoft1</font></strong><br>
      barry@suse:~&gt; <font color="#FFFF00"><strong>cp -s /tmp/softfile cpsoft2<br>
      </strong></font><br>
      <font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#00FFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#00FFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#00FFFF"># 
      </font></font></font></font></font></font></font></font></font></font></font></font></font></font></font></font></font></font></font></font></font></font></font></font></font></font></font></font></font></font></font></font></font></font><font color="#00FFFF" size="2">比較一下兩個目的檔的差異：</font><br>
      barry@suse:~&gt; <strong><font color="#FFFF00">ls -l cpsoft*</font></strong><br>
      <font face="細明體">lrwxrwxrwx 1 barry users 11 Jan 2 11:22 cpsoft1 -&gt; /etc/passwd<br>
      lrwxrwxrwx 1 barry users 13 Jan 2 11:22 cpsoft2 -&gt; /tmp/softfile </font></font></font></font></font></font></font></font></font></font></font></font></font></font></font></font></font></td>
  </tr>
</table>
<strong><br>
<font color="#000000" size="+1"><a name="36"></a><font size="+1"><font color="#000000"><font size="+1"><strong><font size="+1"><strong><font color="#FF0000"><font color="#000000"><strong><font color="#FF0000"><font color="#000000" size="+1"><strong><font color="#000000" size="+1"><strong><font color="#FF0000"><strong><img src="1775.gif" tppabs="http://www.suse.url.tw/picture/1775.gif" width="18" height="18"></strong></font></strong></font></strong></font></font></strong></font></font></strong></font></strong></font></font></font> 
指令 mv</font></strong><br>
<br>
　移動檔案目錄或對檔案目錄重新命名。<br>
<br>
<strong>指令語法</strong>：<br>
<table width="100%" border="0" bgcolor="#CCCCCC">
  <tr> 
    <td><strong>mv [OPTION]... SOURCE DEST<br>
      mv [OPTION]... SOURCE... DIRECTORY</strong></td>
  </tr>
</table>
<br>
<strong>參數說明</strong>：<br>
<table width="100%" border="1">
  <tr> 
    <td width="7%" align="center" valign="middle" nowrap><font color="#000099">-b</font></td>
    <td width="93%"><font color="#000099">當目的檔已存在時，則先行對其做備份，然後再進行搬移的動作。</font></td>
  </tr>
  <tr> 
    <td align="center" valign="middle" nowrap><font color="#000099">-f</font></td>
    <td><font color="#000099">當目的檔已存在時，不需做任何提示而強制覆蓋。</font></td>
  </tr>
  <tr> 
    <td align="center" valign="middle" nowrap><font color="#000099">-i</font></td>
    <td><font color="#000099">當目的檔已存在時，會提示是否要覆蓋的訊息。</font></td>
  </tr>
  <tr> 
    <td align="center" valign="middle" nowrap><font color="#000099">-u</font></td>
    <td><font color="#000099">當來源檔比目的檔還要新時才進行更新。</font></td>
  </tr>
</table>
<br>
<strong>範例說明</strong>：<br>
<table width="100%" border="0">
  <tr> 
    <td bgcolor="#000000"> <p><font color="#FFFFFF">barry@suse:~&gt; <strong><font color="#FFFF00">mkdir 
        /tmp/testdir</font></strong><br>
        barry@suse:~&gt; <font color="#FFFF00"><strong>cp /etc/passwd /tmp/testdir</strong></font><br>
        barry@suse:~&gt; <font color="#FFFF00"> <strong>mv /tmp/testdir mydir<br>
        </strong><font color="#00FFFF"># </font><font color="#FFFFFF"><font color="#00FFFF" size="2">如 
        mydir 目錄原本已存在，則會將 testdir 整個搬移至 mydir 內，但若 mydir 原本<br>
        </font><font color="#FFFFFF"><font color="#FFFF00"><font color="#00FFFF"># 
        </font><font color="#FFFFFF"><font color="#00FFFF" size="2">不存在，</font></font></font></font><font color="#00FFFF" size="2">那麼 
        testdir 就會被移動至 barry 家目錄下，並且目錄名稱會改為 mydir。</font></font></font></font></p>
      <p><font color="#FFFFFF"> barry@suse:~&gt;<strong> <font color="#FFFF00"> 
        mv mydir/* /tmp/dir<br>
        </font></strong><font color="#FFFFFF"><font color="#FFFF00"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFF00"><font color="#00FFFF"># 
        </font><font color="#FFFFFF"><font color="#00FFFF" size="2">將 mydir 內的所有資料搬移至 
        /tmp/dir 目錄，此時 dir 必須是一個已經存在的目錄。</font></font><font color="#00FFFF"> </font></font></font></font></font></font></font></p>
      <p><font color="#FFFFFF"> barry@suse:~&gt; <font color="#FFFF00"><strong>mv 
        -i /tmp/file1 file2</strong></font><br>
        mv: overwrite `file'?<font color="#FFFF00"> <strong>n<br>
        </strong><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFF00"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#00FFFF"># 
        </font></font></font></font></font></font></font><font color="#00FFFF" size="2">這個例子是假設家目錄下已存在 
        file2 檔案，所以在移動 file1 到 file2 時會出現提示訊息。</font><br>
        <font color="#FFFFFF"><font color="#FFFF00"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFF00"><font color="#00FFFF"># 
        </font><font color="#FFFFFF"><font color="#FFFFFF"><font color="#00FFFF" size="2">若這個範例沒加 
        -i 參數的話，那就直接覆蓋過去了。</font></font></font></font></font></font></font></font> 
        </font></p>
      <p><font color="#FFFFFF"> barry@suse:~&gt; <font color="#FFFF00"><strong>mv 
        dir newdir<br>
        </strong><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFF00"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#00FFFF"># 
        </font><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#00FFFF" size="2">mv 
        若用於同一層目錄當中，就等於把原來的檔案或目錄名稱改個名字 (rename ) 而已。</font></font></font></font></font></font></font></font></font><strong> 
        </strong></font></font></p></td>
  </tr>
</table>
<strong><br>
<font size="+1"><a name="39"></a><font color="#000000" size="+1"><font size="+1"><font color="#000000"><font size="+1"><strong><strong><font color="#FF0000"><font color="#000000"><strong><font color="#FF0000"><font color="#000000" size="+1"><strong><font color="#000000" size="+1"><strong><font color="#FF0000"><strong><img src="1775.gif" tppabs="http://www.suse.url.tw/picture/1775.gif" width="18" height="18"></strong></font></strong></font></strong></font></font></strong></font></font></strong></strong></font></font></font></font> 
指令 rm</font></strong><br>
<br>
　移除檔案或目錄的指令。<br>
<br>
<strong>指令語法</strong>：<br>
<table width="100%" border="0" bgcolor="#CCCCCC">
  <tr> 
    <td><strong><font face="細明體">rm [OPTION]... FILE...</font></strong></td>
  </tr>
</table>
<br>
<strong>參數說明</strong>：<br>
<table width="100%" border="1">
  <tr> 
    <td width="7%" align="center" valign="middle" nowrap><font color="#000099">-i</font></td>
    <td width="93%"><font color="#000099">刪除檔案之前，會再要求使用者做確認的動作。</font></td>
  </tr>
  <tr> 
    <td align="center" valign="middle" nowrap><font color="#000099">-r</font></td>
    <td><font color="#000099">刪除目錄。當然要加這個參數來刪除檔案也行。</font></td>
  </tr>
  <tr> 
    <td align="center" valign="middle" nowrap><font color="#000099">-f</font></td>
    <td><font color="#000099">當您有設定 rm 的別名：alias rm='rm -i'，則可以使用此參數來進行強迫刪除的動作。另外如果要刪除的檔案不存在時，系統正常會回應您 
      &quot;No such file or directory&quot;，而加上這個參數後，就不會提示任何訊息了。</font></td>
  </tr>
</table>
<br>
<strong>範例說明</strong>：<br>
<table width="100%" border="0">
  <tr> 
    <td bgcolor="#000000"><font color="#FFFFFF">barry@suse:~&gt; <font color="#FFFF00"> 
      <strong>rm file*</strong></font><br>
      <font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFF00"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFF00"><font color="#00FFFF"># 
      </font></font></font></font></font></font></font><font color="#00FFFF" size="2">刪除檔名中，以 
      file 做開始的所有檔案。</font> <br>
      <br>
      barry@suse:~&gt;<strong> <font color="#FFFF00">rm -rf dir1 dir2 file1 file2</font></strong><br>
      <font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFF00"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFF00"><font color="#00FFFF"># 
      </font></font></font></font></font></font></font><font color="#00FFFF" size="2">強迫刪除檔案及目錄。還記得 
      rmdir 只能刪除空目錄嗎，如要刪除有內容的目錄，<font color="#FFFFFF"><br>
      </font></font><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFF00"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFF00"><font color="#00FFFF"># 
      </font></font></font></font></font></font></font><font color="#00FFFF" size="2">那使用這個指令就對了。</font></font></td>
  </tr>
</table>
<strong><br>
<font size="+1"><a name="40"></a><font color="#000000" size="+1"><font size="+1"><font color="#000000"><font size="+1"><strong><strong><font color="#FF0000"><font color="#000000"><strong><font color="#FF0000"><font color="#000000" size="+1"><strong><font color="#000000" size="+1"><strong><font color="#FF0000"><strong><img src="1775.gif" tppabs="http://www.suse.url.tw/picture/1775.gif" width="18" height="18"></strong></font></strong></font></strong></font></font></strong></font></font></strong></strong></font></font></font></font> 
指令 touch</font></strong><br>
<br>
　可用來建立空檔案，或更新檔案目錄的修改、存取時間。<br>
<br>
<strong>指令語法</strong>：<br>
<table width="100%" border="0" bgcolor="#CCCCCC">
  <tr> 
    <td><strong>touch [OPTION]... FILE...</strong></td>
  </tr>
</table>
<br>
<strong>參數說明</strong>：<br>
<table width="100%" border="1">
  <tr> 
    <td width="7%" align="center" valign="middle" nowrap><font color="#000099">-a</font></td>
    <td width="93%"><font color="#000099">改變檔案目錄的存取時間。</font></td>
  </tr>
  <tr> 
    <td align="center" valign="middle" nowrap><font color="#000099">-m</font></td>
    <td nowrap><font color="#000099">改變檔案目錄的修改時間。</font></td>
  </tr>
</table>
<br>
　touch 指令後面接的如果是不存在的檔名，那就等於是在建立空檔案，但如果接的是已存在的檔案或目錄，就會將這些檔案目錄更新成為現在的時間。 <br>
<br>
<strong>範例說明</strong>：<br>
<table width="100%" border="0">
  <tr> 
    <td bgcolor="#000000"><font color="#FFFFFF">barry@suse:~&gt; <font color="#FFFF00"><strong>touch 
      newfile1 newfile2</strong></font><br>
      <font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFF00"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFF00"><font color="#00FFFF"># 
      </font></font></font></font></font></font></font><font color="#00FFFF" size="2">建立兩個空檔案。</font><br>
      <br>
      barry@suse:~&gt;<font color="#FFFF00"><font color="#FFFFFF"> </font><strong>touch 
      -m oldfile olddir</strong></font><br>
      <font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFF00"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFF00"><font color="#00FFFF"># 
      </font></font></font></font></font></font></font> <font color="#00FFFF" size="2">假設 
      oldfile 及 olddir 已存在，則 touch 會將他們的修改時間更新成為現在的時間。</font><br>
      <font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFF00"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFF00"><font color="#00FFFF"># 
      </font></font></font></font></font></font></font> <font color="#00FFFF" size="2">-m 
      參數也可省略。 </font><font color="#00FFFF"><br>
      <br>
      </font><font color="#FFFFFF">barry@suse:~&gt;</font> <strong><font color="#FFFF00">touch 
      -a oldfile</font></strong><font color="#FFFF00"><br>
      <font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFF00"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#00FFFF"># 
      </font></font></font></font></font></font><font color="#00FFFF" size="2">更新 
      oldfile 的存取時間為現在。您可以執行 &quot;ls -l&quot; 及 &quot;ls -lu&quot;，來比較<br>
      </font><font color="#FFFFFF"><font color="#FFFF00"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFF00"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#00FFFF"># 
      </font></font></font></font></font></font></font></font></font><font color="#00FFFF" size="2">它們的時間欄位差異在哪裡。</font></font></font></font></td>
  </tr>
</table>
<br>
<font color="#0000FF"><br>
<strong><font color="#000000" size="+1"><a name="41"></a><font size="+2">4.3.3 
檔案權限及擁有權的變更</font></font></strong></font><br>
<br>
　從之前長格式的介紹裡，已經了解到檔案的擁有者及擁有群組為何，也明白 user、group 及 others 對這個檔案的權限，所以接著就要學習如何使用指令來修改檔案權限，及變更檔案的擁有者與擁有群組。<br>
<br>
<font size="+1"><strong><a name="42"></a><font size="+1"><font color="#000000" size="+1"><font size="+1"><font color="#000000"><font size="+1"><strong><strong><font color="#FF0000"><font color="#000000"><strong><font color="#FF0000"><font color="#000000" size="+1"><strong><font color="#000000" size="+1"><strong><font color="#FF0000"><strong><img src="1775.gif" tppabs="http://www.suse.url.tw/picture/1775.gif" width="18" height="18"></strong></font></strong></font></strong></font></font></strong></font></font></strong></strong></font></font></font></font></font> 
指令 chmod</strong></font><br>
<br>
　用來改變檔案目錄存取權限的指令。<br>
<br>
<strong>指令語法</strong>：<br>
<table width="100%" border="0" bgcolor="#CCCCCC">
  <tr> 
    <td><strong><font face="細明體">chmod [OPTION]... MODE[,MODE]... FILE...<br>
      chmod [OPTION]... OCTAL-MODE FILE...</font></strong></td>
  </tr>
</table>
<br>
　指令語法中的 MODE 及 OCTAL-MODE，是修改權限的兩種模式，分別為符號模式 (symbolic mode ) 及數字模式 (numeric mode)，以下分別來看看這兩種模式如何使用：<br>
<br>
<table width="100%" border="0">
  <tr> 
    <td width="2%" align="center" valign="top" nowrap>&nbsp;</td>
    <td width="3%" align="center" valign="middle" nowrap><strong><img src="icon.jpg" tppabs="http://www.suse.url.tw/picture/icon.jpg" width="11" height="11"></strong></td>
    <td width="95%"><strong><font color="#000099">符號模式</font></strong><font color="#000099">：</font></td>
  </tr>
  <tr> 
    <td align="center" valign="top" nowrap>&nbsp;</td>
    <td align="center" valign="middle" nowrap>&nbsp;</td>
    <td>此模式是利用 u (檔案的擁有者)、g (檔案的擁有群組)、o (其他人)、a (所有人) 這幾個字元的組合，來修改使用者對檔案的存取權限，且在這些字元之後是使用 
      「<strong>+</strong>」、「<strong>-</strong>」、「<strong>=</strong> 」符號來做設定，「<strong>+</strong>」表示在原來權限基礎上再增加什麼權限，「<strong>-</strong>」表示在原來權限基礎上再減少什麼權限，「<strong>=</strong> 
      」表示就是設定成等號後方所指定的權限。以下舉幾個例子提供參考：<br>
      <table width="100%" border="0">
        <tr> 
          <td width="3%" align="center"><font color="#000099" size="4">˙</font></td>
          <td width="97%"><font color="#000099"><strong>u=rwx,go=rx</strong></font></td>
        </tr>
        <tr> 
          <td align="center"><font color="#000099">&nbsp;</font></td>
          <td><font color="#000099">檔案擁有者具 rwx 權限，擁有群組及其他人具 rx 權限。</font></td>
        </tr>
        <tr> 
          <td align="center"><font color="#000099" size="4">˙</font></td>
          <td><font color="#000099"><strong>u+x,g-w,o=</strong></font></td>
        </tr>
        <tr> 
          <td align="center"><font color="#000099">&nbsp;</font></td>
          <td><font color="#000099">檔案擁有者在原來權限基礎上多個 x 權限，擁有群組在原來權限基礎上少個 w 權限，其他人則不具任何權限。</font></td>
        </tr>
        <tr> 
          <td align="center"><font color="#000099" size="4">˙</font></td>
          <td><font color="#000099"><strong>a=rwx,o-w</strong></font></td>
        </tr>
        <tr> 
          <td align="center"><font color="#000099">&nbsp;</font></td>
          <td><font color="#000099">所有人皆具 rwx 權限，但其他人少個 w 權限。請注意設定順序勿顛倒過來。</font></td>
        </tr>
        <tr> 
          <td align="center"><font color="#000099" size="4">˙</font></td>
          <td><font color="#000099"><strong>ug=rw,o-w</strong></font></td>
        </tr>
        <tr> 
          <td align="center"><font color="#000099">&nbsp;</font></td>
          <td><font color="#000099">檔案擁有者及擁有群組具 rw 權限，其他人在原來權限基礎上少個 w 權限。</font></td>
        </tr>
      </table>
      
    </td>
  </tr>
  <tr> 
    <td align="center" valign="top" nowrap>&nbsp;</td>
    <td align="center" valign="middle" nowrap>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr> 
    <td align="center" valign="top" nowrap>&nbsp;</td>
    <td align="center" valign="middle" nowrap><strong><img src="icon.jpg" tppabs="http://www.suse.url.tw/picture/icon.jpg" width="11" height="11"></strong></td>
    <td><strong><font color="#000099">數字模式</font></strong><font color="#000099">：</font></td>
  </tr>
  <tr> 
    <td align="center" valign="top" nowrap>&nbsp;</td>
    <td align="center" valign="middle" nowrap>&nbsp;</td>
    <td>數字模式是利用 1 ~ 4 個八進位數字來修改檔案權限，第一個數字是用來設定特殊位元的，<a href="#47">4.3.5 小節</a>再說明 
      ﹔第 2~4 個數字，分別是設定檔案的擁有者、擁有群組及其他人的權限。<br>
      至於權限所代表的數字為 r (4)、w (2)、x (1)，因此 rwx 以數字表示就是 7 (4+2+1)，r-x 就為 5 (4+0+1)，那 
      rwxr-xr-x 就是 755 囉 ! 當您使用數字模式來修改權限時，如忽略某個數字而沒設定時，則會被當成 0 來看待，比如 755 就代表 
      0755，55 就代表 0055，這點請您要注意。</td>
  </tr>
</table>
<br>
<strong>參數說明</strong>：<br>
<table width="100%" border="1">
  <tr> 
    <td width="7%" align="center" valign="middle" nowrap><font color="#000099">-v</font></td>
    <td width="93%" nowrap><font color="#000099">無論檔案目錄權限改變前後是否相同，都會顯示改變後的結果。</font></td>
  </tr>
  <tr> 
    <td align="center" valign="middle" nowrap><font color="#000099">-c</font></td>
    <td><font color="#000099">只有在檔案目錄權限有做改變時，才會顯示改變後的結果。</font></td>
  </tr>
  <tr> 
    <td align="center" valign="middle" nowrap><font color="#000099">-R</font></td>
    <td><font color="#000099">遞迴地改變檔案目錄的權限。</font></td>
  </tr>
</table>
<br>
<strong>範例</strong>一： <strong>symbolic mode</strong><br>
<table width="100%" border="0">
  <tr> 
    <td bgcolor="#000000"><font color="#FFFFFF">barry@suse:~&gt;<font color="#FFFF00"><strong> 
      ls -l</strong></font><br>
      total 1<br>
      drwxrwxr-- 2 barry users 1024 Feb 19 23:24 <font color="#0099FF">dir</font><br>
      <br>
      barry@suse:~&gt;<strong> <font color="#FFFF00">chmod -v g-w,o+x dir</font></strong><br>
      mode of `dir' changed to 0755 (<strong>rwxr-xr-x</strong>)<br>
      <br>
      barry@suse:~&gt;<strong> <font color="#FFFF00">chmod -v u=rx,go-r dir</font></strong><br>
      mode of `dir' changed to 0511 (<strong>r-x--x--x</strong>)<br>
      <br>
      barry@suse:~&gt; <font color="#FFFF00"><strong>chmod -v ug+w,o= dir</strong><br>
      <font color="#FFFFFF">mode of `dir' changed to 0730 (<strong>rwx-wx---</strong>)</font></font><br>
      <br>
      barry@suse:~&gt; <font color="#FFFF00"><strong>chmod -v a+x dir</strong></font><br>
      mode of `dir' changed to 0731 (<strong>rwx-wx--x</strong>)</font></td>
  </tr>
</table>
<br>
<strong>範例二</strong>：<strong>numeric mode</strong><br>
<table width="100%" border="0">
  <tr> 
    <td bgcolor="#000000"><font color="#FFFFFF">barry@suse:~&gt; <font color="#FFFF00"><strong>chmod 
      -v 700 dir</strong></font><br>
      mode of `dir' changed to 0700 (<strong>rwx------</strong>)<br>
      <br>
      barry@suse:~&gt; <font color="#FFFF00"><strong>chmod -v 660 file1 file2</strong></font><br>
      mode of `file1' changed to 0660 (<strong>rw-rw----</strong>)<br>
      mode of `file2' changed to 0660 <strong>(rw-rw----</strong>)<br>
      <br>
      barry@suse:~&gt; <font color="#FFFF00"><strong>chmod -v 666 dir/*</strong></font><br>
      mode of `dir/file3' changed to 0666 (<strong>rw-rw-rw-</strong>)<br>
      mode of `dir/file4' changed to 0666 (<strong>rw-rw-rw-</strong>)<br>
      <font color="#00FFFF"># </font><font color="#00FFFF" size="2">把 dir 目錄下的檔案目錄權限，修改成 
      666。</font></font></td>
  </tr>
</table>
<strong><br>
</strong> 
<table width="100%" border="0" bgcolor="#CCCCCC">
  <tr> 
    <td height="18"><strong><font size="4"><a name="60"></a>補充</font></strong>：<br>
      當我們在製造檔案目錄時，系統會給它們預設的權限，目錄為 777，檔案為 666，至於真正建立起來的權限，則是要依據 <font color="#0000FF">umask</font> 
      (遮罩值) 而來，您可先執行 <font color="#0000FF">umask</font><strong> </strong>指令來觀察一下遮罩值：<br> <table width="30%" border="0" bgcolor="#000000">
        <tr> 
          <td nowrap><font color="#FFFFFF">barry@suse:~&gt;<strong> <font color="#FFFF00">umask</font></strong><br>
            0022</font></td>
        </tr>
      </table>
      <p>當 umask 是 022 時，那表示目錄的真正權限為系統預設的權限減掉遮罩值，也就是 <font face="細明體">(rwxrwxrwx)-(----w--w-)=rwxr-xr-x</font>，換算成數字模式就是 
        755 ﹔若是檔案的話，則是<font face="細明體"> (rw-rw-rw-)-(----w--w-)=rw-r--r--</font>，所以為 
        644。</p>
      <p>您可於命令列上，藉由 umask 指令來改變這個遮罩值：</p>
      <table width="30%" border="0" bgcolor="#CCCCCC">
        <tr> 
          <td nowrap bgcolor="#000000"><font color="#FFFFFF">barry@suse:~&gt; 
            <strong><font color="#FFFF00">umask 077</font></strong><br>
            barry@suse:~&gt;<font color="#FFFF00"> <strong>umask</strong></font><br>
            0077</font><font color="#FFFFFF" size="+1">&nbsp;</font> </td>
        </tr>
      </table>
      <br>
      這樣以後您製造目錄時的真正權限就是 700，那檔案自然就是 600 囉 ! 您也可以將 umask 設定在 ~/.bashrc 之中，如此就會永久有效囉 
      ! </td>
  </tr>
</table>
<br>
 <font size="+1"><strong><a name="43"></a><font size="+1"><strong><font size="+1"><font color="#000000" size="+1"><font size="+1"><font color="#000000"><font size="+1"><strong><strong><font color="#FF0000"><font color="#000000"><strong><font color="#FF0000"><font color="#000000" size="+1"><strong><font color="#000000" size="+1"><strong><font color="#FF0000"><strong><img src="1775.gif" tppabs="http://www.suse.url.tw/picture/1775.gif" width="18" height="18"></strong></font></strong></font></strong></font></font></strong></font></font></strong></strong></font></font></font></font></font></strong></font> 
指令 chown</strong></font><br>
<br>
　用來修改檔案擁有者及擁有群組的指令。一般來說，我們都會使用 root 身分去執行這個工作，至於對一般使用者而言，除非本身為此檔案的擁有者且又為某個群組的成員，這樣該使用者才可將檔案的擁有群組變更成為該群組。<br>
<br>
<strong>指令語法</strong>：<br>
<table width="100%" border="0" bgcolor="#CCCCCC">
  <tr> 
    <td><strong>chown [OPTION]... OWNER[:[GROUP]] FILE...<br>
      chown [OPTION]... :GROUP FILE...</strong></td>
  </tr>
</table>
<strong><br>
參數說明</strong>：<br>
<table width="100%" border="1">
  <tr> 
    <td width="7%" align="center" valign="middle" nowrap><font color="#000099">-v</font></td>
    <td width="93%" nowrap><font color="#000099">無論檔案目錄擁有權改變前後是否相同，都會顯示改變後的結果。</font></td>
  </tr>
  <tr> 
    <td align="center" valign="middle" nowrap><font color="#000099">-c</font></td>
    <td><font color="#000099">只有在檔案目錄擁有權有做改變時，才會顯示改變後的結果。</font></td>
  </tr>
  <tr> 
    <td align="center" valign="middle" nowrap><font color="#000099">-R</font></td>
    <td><font color="#000099">遞迴地改變檔案目錄的擁有權。</font></td>
  </tr>
</table>
<strong><br>
範例說明</strong>：<br>
<table width="100%" border="0">
  <tr> 
    <td bgcolor="#000000"><font color="#FFFFFF">suse:/tmp # <font color="#FFFF00"><strong>ls 
      -l file</strong></font><br>
      -rw-r--r-- 1 root root 0 Feb 20 00:09 file<br>
      <br>
      suse:/tmp # <font color="#FFFF00"><strong>groupadd group01</strong></font><br>
      suse:/tmp # <font color="#FFFF00"><strong>chown -v barry:group01 file</strong></font><br>
      changed ownership of `file' to barry:group01<br>
      <font color="#00FFFF"># </font><font color="#00FFFF" size="2">將 
      file 的擁有者改為 barry，擁有群組改為 group01。</font><br>
      <font color="#00FFFF"># </font> <font color="#00FFFF" size="2">擁有者與擁有群組之間需使用 
      &quot;:&quot; 或 &quot;.&quot; 隔開。若只是改變擁有群組，請記得於群組名稱</font><br>
      <font color="#00FFFF"># </font> <font color="#FFFFFF"><font color="#00FFFF" size="2">前面</font></font><font color="#00FFFF" size="2">要加上&quot;:&quot; 
      或 &quot;.&quot; ，否則會被當成 username 來看待。</font><br>
      </font> <font color="#FFFFFF"><br>
      suse:/tmp #<font color="#FFFF00"><strong> chown -v .root file</strong></font><br>
      changed ownership of `file' to :root<br>
      <font color="#00FFFF"># </font><font color="#00FFFF" size="2">將 file 的擁有群組改為 
      root 群組。</font> <font color="#00FFFF"><br>
      </font><br>
      suse:/tmp # <font color="#FFFF00"><strong>chown -vR barry.group01 dir/*</strong></font><br>
      changed ownership of `dir/dir1' to barry:group01<br>
      changed ownership of `dir/dir1/file1' to barry:group01<br>
      changed ownership of `dir/file' to barry:group01<br>
      <font color="#00FFFF"># </font><font color="#00FFFF" size="2">遞迴地將 dir 目錄下，所有檔案目錄的擁有者及擁有群組全部變更為 
      barry 及 group01，但</font><br>
      <font color="#00FFFF"># </font><font color="#00FFFF" size="2">不包含 dir 本身。若要包含 
      dir 在內的話，執行 &quot;chown -R barry.group01 dir&quot; 就行了。</font></font></td>
  </tr>
</table>
<strong><br>
<font size="+1"><strong><a name="44"></a><font size="+1"><strong><font size="+1"><strong><font size="+1"><font color="#000000" size="+1"><font size="+1"><font color="#000000"><font size="+1"><strong><strong><font color="#FF0000"><font color="#000000"><strong><font color="#FF0000"><font color="#000000" size="+1"><strong><font color="#000000" size="+1"><strong><font color="#FF0000"><strong><img src="1775.gif" tppabs="http://www.suse.url.tw/picture/1775.gif" width="18" height="18"></strong></font></strong></font></strong></font></font></strong></font></font></strong></strong></font></font></font></font></font></strong></font></strong></font> 
</strong>指令 chgrp</font></strong><br>
<br>
　這個指令只能改變檔案目錄的擁有群組。<br>
<br>
<strong>指令語法</strong>：<br>
<table width="100%" border="0" bgcolor="#CCCCCC">
  <tr> 
    <td><strong><font face="細明體">chgrp [OPTION]... GROUP FILE...</font></strong></td>
  </tr>
</table>
<br>
<strong>參數說明</strong>：同 chown，不再贅述。<strong><br>
<br>
範例說明</strong>：<br>
<table width="100%" border="0">
  <tr> 
    <td height="36" bgcolor="#000000"><p><font color="#FFFFFF">suse:/tmp #<strong> 
        <font color="#FFFF00">chgrp -v group01 dir1 dir2</font></strong><br>
        changed group of `dir1' to group01<br>
        changed group of `dir2' to group01 <br>
        <font color="#00FFFF"># </font><font color="#00FFFF" size="2"> 
        將 dir1 及 dir2 的擁有群組變更為 group01。</font><br>
        </font></p></td>
  </tr>
</table>
<br>
<font size="+1"><strong><a name="61"></a><font size="5">4.3.4 綜合範例練習</font></strong></font><br>
<br>
　以下有兩個範例，會把我們前面所學過帳號管理的指令及觀念，來搭配剛剛才學過的權限修改，以做個綜合性的演練。<br>
<br>
<a name="45"></a><strong><font size="4">練習一</font></strong><font size="4">：<strong>以手動編輯的方式來新增一個使用者帳號 
david</strong><br>
<br>
</font><strong>　<img src="icon.jpg" tppabs="http://www.suse.url.tw/picture/icon.jpg" width="11" height="11"> <font color="#000099">首先編輯 
/etc/passwd</font></strong><font size="4"><br>
<font size="+1"><br>
</font> </font> 
<table width="100%" border="0">
  <tr> 
    <td bgcolor="#000000"><font color="#FFFFFF">suse:~ # <font color="#FFFF00"><strong>vi 
      /etc/passwd</strong></font><br>
      <font face="細明體">david:x:3000:100:david chen:/home/david:/bin/bash</font></font></td>
  </tr>
</table>
<br>
　<font color="#FFFFFF"><font color="#000000">新增使用者帳號 david，指定其 UID 3000、GID 100，家目錄為 
/home/david，所使用的 shell 為 bash。</font> </font><br>
<font size="4"><br>
</font><strong>　<img src="icon.jpg" tppabs="http://www.suse.url.tw/picture/icon.jpg" width="11" height="11"> <font color="#000099">同步 
/etc/shadow</font></strong><br>
<br>
<table width="100%" border="0">
  <tr> 
    <td bgcolor="#000000"><font color="#FFFFFF">suse:~ #<font color="#FFFF00"> 
      <strong>pwconv</strong></font><br>
      <font color="#00FFFF"><br>
      </font><font color="#FFFFFF"><font color="#00FFFF"># </font><font color="#00FFFF" size="2">接著做個確認：</font></font><font color="#00FFFF"> 
      <br>
      <font color="#FFFFFF">suse:~ #<font color="#FFFF00"><strong> cat /etc/shadow 
      | grep david</strong></font><br>
      <font face="細明體">david:x:13566:0:99999:7:::0 </font></font></font></font></td>
  </tr>
</table>
<br>
<font color="#FFFFFF"><font color="#000000">　執行 pwconv 來更新 shadow 檔案後，shadow 內才會有 
david 的資料，不然待會使用 passwd 指令去建立 david 密碼時會失敗。當然若您不想執行這個指令，直接去編輯 shadow 檔案也是可行的。</font></font><br>
<strong><font size="4"><br>
</font><strong>　<img src="icon.jpg" tppabs="http://www.suse.url.tw/picture/icon.jpg" width="11" height="11"> </strong><font color="#000099">建立 
david 的密碼</font></strong><br>
<br>
<table width="100%" border="0">
  <tr> 
    <td bgcolor="#000000"><font color="#FFFFFF">suse:~ #<strong> <font color="#FFFF00">passwd 
      david</font></strong><br>
      Changing password for david.<br>
      New password:<br>
      Re-enter new password:<br>
      Password changed</font></td>
  </tr>
</table>
<strong><font size="4"><br>
</font><strong>　<img src="icon.jpg" tppabs="http://www.suse.url.tw/picture/icon.jpg" width="11" height="11"> </strong><font color="#000099">建立 
david 的家目錄</font></strong><br>
<br>
<table width="100%" border="0">
  <tr> 
    <td bgcolor="#000000"><font color="#FFFFFF">suse:~ #<strong> <font color="#FFFF00">cp 
      -a /etc/skel /home/david </font></strong><br>
      suse:~ # <font color="#FFFF00"><strong>chown -R david:users /home/david</strong><br>
      </font><br>
      <font color="#FFFF00"> <font color="#FFFFFF"><font color="#FFFFFF"><font color="#00FFFF"># 
      </font></font></font><font color="#00FFFF" size="2">使用長格式確認一下：</font><br>
      </font><font color="#FFFFFF"><font color="#FFFFFF">suse:~ #</font> <strong><font color="#FFFF00">ls 
      -ld /home/david</font></strong><br>
      </font><font face="細明體">drwxr-xr-x 8 david users 584 Oct 7 23:20 <font color="#0099FF">/home/david</font> 
      </font> </font></td>
  </tr>
</table>
<br>
　就這四個步驟即可搞定。另外以這種方式來新增帳號時，可以不受帳號命名規則的限制，比如可以讓名稱中間留有空白字元，或者以數字來命名，自己練習看看囉 !<font size="4"><br>
</font><br>
<a name="46"></a><strong><font size="4">練習二</font></strong><font size="4">：<strong>執行 
newgrp 指令來讓使用者取得與群組相同的存取權限</strong></font><br>
<br>
<table width="100%" border="0" bgcolor="#000000">
  <tr> 
    <td><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFF00"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#00FFFF"># 
      </font></font></font></font></font><font color="#00FFFF" size="2">先新增群組並設定群組密碼：</font><br>
      suse:~ #<strong> <font color="#FFFF00">groupadd testgroup</font></strong><br>
      suse:~ # <font color="#FFFF00"><strong>gpasswd testgroup</strong></font>　<font color="#00FFFF" size="2">← 
      建立群組密碼。 </font><br>
      Changing the password for group testgroup.<br>
      New Password:<br>
      Re-enter new password:<br>
      Password changed. <br>
      <br>
      <font color="#FFFFFF"><font color="#FFFF00"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#00FFFF"># 
      </font></font></font></font></font><font color="#00FFFF" size="2">建立檔案 testfile，並修改其擁有群組為 
      testgroup，且此群組對 testfile 具有 rw 權限：<br>
      </font> suse:~ #<strong> <font color="#FFFF00">cp /etc/passwd /tmp/testfile</font></strong><br>
      suse:~ # <font color="#FFFF00"><strong>chown :testgroup /tmp/testfile</strong></font> 
      <br>
      suse:~ #<strong> <font color="#FFFF00">chmod 660 /tmp/testfile</font></strong><br>
      suse:~ #<strong> <font color="#FFFF00">ls -l /tmp/testfile</font></strong><br>
      <font face="細明體">-rw-rw---- 1 root testgroup 1622 Jan 2 13:57 /tmp/testfile</font><br>
      <br>
      <font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFF00"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#00FFFF"># 
      </font></font></font></font></font></font><font color="#00FFFF" size="2">接著請您以 
      barry 的身分執行 newgrp 指令：</font><br>
      barry@suse:~&gt; <font color="#FFFF00"><strong>newgrp testgroup</strong></font><br>
      Password: 　<font color="#00FFFF" size="2">← 輸入群組密碼。</font><br>
      <br>
      <font color="#FFFFFF"><font color="#FFFF00"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#00FFFF"># 
      </font></font></font></font></font><font color="#00FFFF" size="2">完成後，barry 
      的有效群組已變更成 testgroup 了：</font><br>
      barry@suse:~&gt; <font color="#FFFF00"><strong>groups</strong></font><br>
      <font color="#FFFF00">testgroup</font> dialout video users group02<br>
      <font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFF00"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#00FFFF"># 
      </font></font></font></font></font></font><font color="#00FFFF" size="2">接著請自行測試看看 
      barry 能否讀取及修改 testfile。</font><br>
      <br>
      barry@suse:~&gt; <font color="#FFFF00"><strong>exit</strong></font><br>
      <font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFF00"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#00FFFF"># 
      </font></font></font></font></font></font><font color="#00FFFF" size="2">執行 
      newgrp 成功後，會開啟另一個新的 shell，而在執行 exit 後，會回原來的 shell。</font></font></td>
  </tr>
</table>
<br>
<br>
<font size="+1"> <strong><font color="#000000"><a name="47"></a><font size="5">4.3.5 
權限特殊位元的設定</font></font></strong><br>
</font><br>
　在介紹 chmod 指令的數字模式時，有提到說可以使用 1 ~ 4 個八進位數字來設定權限，其中跟第一個數字有關的，就是現在要介紹的三個特殊位元：<font color="#0000FF">Set 
User ID (4)、Set Group ID (2) 及 sticky bit (1)</font><font size="+1">，</font>我們就以 
SUID、SGID 及 Sticky bit 來稱呼。<font size="+1"><br>
</font><br>
<font color="#000000"><strong><font size="+1"><strong><font size="+1"><strong><font size="+1"><strong><font size="+1"><font color="#000000" size="+1"><font size="+1"><font color="#000000"><font size="+1"><strong><strong><font color="#FF0000"><font color="#000000"><strong><font color="#FF0000"><font color="#000000" size="+1"><strong><font color="#000000" size="+1"><strong><font color="#FF0000"><strong><img src="1775.gif" tppabs="http://www.suse.url.tw/picture/1775.gif" width="18" height="18"></strong></font></strong></font></strong></font></font></strong></font></font></strong></strong></font></font></font></font></font></strong></font></strong></font></strong></font> 
<font size="4">SUID</font></strong></font><br>
<br>
　這個屬性是用於執行程式 (binary file) 上，以「s」或「S」來表示此檔案具有 SUID 的屬性，其出現的位置是在擁有者權限的執行權限那個位置上，代表數字為 
4。<br>
<br>
　以 passwd 這支程式為例：<br>
<br>
<table width="61%" border="0" bgcolor="#CCCCCC">
  <tr> 
    <td nowrap bgcolor="#000000"><font color="#FFFFFF"> barry@suse:~&gt; <font color="#FFFF00"><strong>ls 
      -l /usr/bin/passwd</strong></font><br>
      <font face="細明體">-rw</font><font color="#FFFF00" face="細明體">s</font><font face="細明體">r-xr-x 
      1 root shadow 72836 Jun 17 2006 /usr/bin/passwd</font></font></td>
  </tr>
</table>
<br>
　看到了那個「s」嗎，這就表示 passwd 程式是具有 SUID 屬性的。那「s」及「S」有何差別呢 ? 如果是小寫的 s，表示檔案擁有者原來就具備 x 
權限，如是大寫的 S，就代表檔案擁有者原先不具有 x 權限，所以 rwsr-xr-x，用數字表示就是 4755 啦。<br>
<br>
　接著來說明程式具 SUID 屬性的意義。當我們在執行程式時，對此程式所具有的權限，是以執行者的 ID 做為判斷依據，現若此程式具有 SUID 屬性，則對此程式擁有執行權限的使用者，在執行此程式時所具有的權限，就與該程式的擁有者 
ID 所擁有的權限是一樣的。<br>
<br>
　舉例來說，比如使用者 barry 執行 passwd 程式來變更自己的密碼時，就是因為 passwd 具有 SUID 的屬性，所以當 barry 在執行 
passwd 程式時所具有的權限，是與這支程式的擁有者 root 所擁有的權限是一樣的，否則如何將編碼後的密碼寫入 /etc/shadow 呢 ? 因為在一般情況下，使用者對 
shadow 檔是不具任何存取權限的。<br>
<br>
<table width="56%" border="0" bgcolor="#CCCCCC">
  <tr> 
    <td nowrap bgcolor="#000000"><font color="#FFFFFF">barry@suse:~&gt; <font color="#FFFF00"><strong>ls 
      -l /etc/shadow</strong></font><br>
      <font face="細明體">-rw-r----- 1 root shadow 1109 Jan 2 13:53 /etc/shadow</font></font></td>
  </tr>
</table>
<br>
<font color="#000000"><strong><font size="+1"><strong><font size="+1"><strong><font size="+1"><strong><font size="+1"><font color="#000000" size="+1"><font size="+1"><font color="#000000"><font size="+1"><strong><strong><font color="#FF0000"><font color="#000000"><strong><font color="#FF0000"><font color="#000000" size="+1"><strong><font color="#000000" size="+1"><strong><font color="#FF0000"><strong><img src="1775.gif" tppabs="http://www.suse.url.tw/picture/1775.gif" width="18" height="18"></strong></font></strong></font></strong></font></font></strong></font></font></strong></strong></font></font></font></font></font></strong></font></strong></font></strong></font> 
<font size="4">SGID</font></strong></font><br>
<br>
　一般可用於目錄及執行程式上，也是以「s」或「S」來表示，其出現的位置是在擁有群組權限的執行權限那個位置上，代表數字為 2。<br>
<br>
　當用於程式檔案時，跟 SUID 的意思一樣，只是使用者在執行此程式時所具有的權限，是以程式的擁有群組 ID 所具有權限為主。若用於目錄，則於此目錄下，無論誰新增檔案或子目錄 
( 含 root )，此檔案或子目錄的擁有群組，必和此具有 SGID 屬性之目錄的所屬群組相同。 <br>
<br>
<strong>範例說明</strong>：<br>
<table width="100%" border="0">
  <tr> 
    <td bgcolor="#000000"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFF00"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#00FFFF"># 
      </font></font></font></font></font></font><font color="#00FFFF" size="2">先建立 
      /tmp/testdir 目錄及新增 grp01 群組：</font><br>
      suse:~ # <font color="#FFFF00"><strong>mkdir /tmp/testdir</strong></font><br>
      suse:~ # <font color="#FFFF00"><strong>groupadd grp01</strong></font><br>
      <br>
      <font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFF00"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#00FFFF"># 
      </font></font></font></font></font></font><font color="#00FFFF" size="2">將 
      testdir 的擁有者及擁有群組修改成 barry 及 grp01：</font><br>
      suse:~ # <font color="#FFFF00"><strong>chown barry.grp01 /tmp/testdir</strong></font><br>
      <br>
      <font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFF00"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#00FFFF"># 
      </font></font></font></font></font></font><font color="#00FFFF" size="2">修改 
      testdir 權限，使其具有 SGID 屬性：</font><br>
      suse:~ #<font color="#FFFF00"><strong> chmod 2750 /tmp/testdir</strong></font><br>
      <br>
      <font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFF00"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#00FFFF"># 
      </font></font></font></font></font></font><font color="#00FFFF" size="2">檢視一下 
      testdir 的長格式：</font><br>
      suse:~ #<strong><font color="#FFFF00"> ls -ld /tmp/testdir</font></strong><br>
      <font face="細明體">drwxr-</font><font color="#FFFF00" face="細明體">s</font><font face="細明體">--- 
      2 barry grp01 48 Feb 4 23:55 /tmp/testdir</font><br>
      <br>
      <font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFF00"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#00FFFF"># 
      </font></font></font></font></font></font><font color="#00FFFF" size="2">分別使用 
      root 及 barry 身分，於 testdir 目錄下新增檔案：</font><br>
      suse:~ # <strong><font color="#FFFF00">touch /tmp/testdir/rootfile</font></strong><br>
      suse:~ #<font color="#FFFF00"><strong> su - barry</strong></font><br>
      barry@suse:~&gt; <font color="#FFFF00"><strong>touch /tmp/testdir/barryfile</strong></font><br>
      <br>
      <font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFF00"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#00FFFF"># 
      </font></font></font></font></font></font><font color="#00FFFF" size="2">檢查剛剛建立的那兩個檔案的擁有群組為何：</font><br>
      barry@suse:~&gt;<strong><font color="#FFFF00"> ls -l /tmp/testdir/*file</font></strong><br>
      <font face="細明體">-rw-r--r-- 1 barry <font color="#FFFF00">grp01</font> 0 
      Feb 5 00:00 /tmp/testdir/barryfile<br>
      -rw-r--r-- 1 root　<font color="#FFFF00">grp01</font> 0 Feb 5 00:00 /tmp/testdir/rootfile</font></font></td>
  </tr>
</table>
<font color="#FF0000"><br>
　<font color="#000000">看完以上範例，應該就能了解目錄 SGID 屬性的意義了。</font><br>
<br>
<strong><font color="#000000"><strong><font size="+1"><strong><font size="+1"><strong><font size="+1"><strong><font size="+1"><font color="#000000" size="+1"><font size="+1"><font color="#000000"><font size="+1"><strong><strong><font color="#FF0000"><font color="#000000"><strong><font color="#FF0000"><font color="#000000" size="+1"><strong><font color="#000000" size="+1"><strong><font color="#FF0000"><strong><img src="1775.gif" tppabs="http://www.suse.url.tw/picture/1775.gif" width="18" height="18"></strong></font></strong></font></strong></font></font></strong></font></font></strong></strong></font></font></font></font></font></strong></font></strong></font></strong></font></strong> 
<font size="4"> Sticky bit</font></font></strong></font><br>
<br>
　一般針對目錄而設，以「t」或「T」來表示，其出現的位置是在其他人 ( others ) 權限的執行權限那個位置上，代表數字為 1。<br>
<br>
　如目錄本身具有 sticky bit 的屬性，則位於此目錄下的檔案及子目錄，只有擁有者本身 (root 除外) 才有權刪除、移動或重新命名。比如 /tmp 
目錄就是具有 sticky bit 屬性的典型代表，不妨用長格式看看。<br>
<br>
<table width="100%" border="0">
  <tr> 
    <td bgcolor="#000000"><font color="#FFFFFF">barry@suse:~&gt;<strong><font color="#FFFF00"> 
      ls -ld /tmp</font></strong><br>
      <font face="細明體">drwxrwxrw</font><font color="#FFFF00" face="細明體">t</font><font face="細明體"> 
      5 root root 264 Jan 2 15:45 /tmp</font></font></td>
  </tr>
</table>
<br>
<br>
<font color="#0000FF" size="+1"><strong><a name="49"></a><font size="6">4.4 ACL 
( Access Control Lists ) 存取控制表</font><br>
<br>
<font color="#000000"><a name="50"></a><font size="5">4.4.1 ACL 的功用</font><br>
<br>
</font></strong></font><font color="#0000FF"><font color="#000000">　學習到這裡，相信大家對於檔案權限的操作，已經有一定的認知了。現在假設有一種狀況，是希望某個目錄能讓 
grp01 群組成員具備 rwx 的權限，其他人無任何權限，以目前各位所學，應該知道怎麼處理，就是使用 chmod 及 chown (chgrp) 指令，來把目錄改成如下權限即可：</font></font> 
<br>
<br>
<table width="48%" border="0" bgcolor="#CCCCCC">
  <tr> 
    <td nowrap><font face="細明體">drwxrwx---　1　root grp01　973　Oct 2 01:21　dir</font></td>
  </tr>
</table>
<br>
<font color="#0000FF"><font color="#000000">　但如果現在又有另一個群組 grp02，您希望給它能對此目錄有 r-x 
的權限，還有兩個非群組成員的使用者 user01 及 use02，能對此目錄有 rwx 的權限，那這個時候您可能就會手足無措而不知如何處理。不過別太擔心啦，因為您可以利用現在要學的 
ACL 來解決這個問題。<br>
<br>
　所以 ACL 的功用，就在於可額外提供權限給使用者及群組，即使他們並非檔案的擁有者及擁有群組。<br>
<br>
　如果依照 ACL 的設定來做區分的話，大致上有以下兩種：</font></font> 
<table width="100%" border="0">
  <tr> 
    <td width="2%" align="center" valign="top" nowrap>&nbsp;</td>
    <td width="3%" align="center" valign="middle" nowrap><strong><strong><img src="icon.jpg" tppabs="http://www.suse.url.tw/picture/icon.jpg" width="11" height="11"></strong></strong></td>
    <td width="95%"><strong><font color="#000099">access ACL</font></strong><font color="#000099">：</font></td>
  </tr>
  <tr> 
    <td align="center" valign="top" nowrap>&nbsp;</td>
    <td align="center" valign="middle" nowrap>&nbsp;</td>
    <td>使用者及群組對檔案目錄的存取權限，就依照該檔案目錄的存取控制清單來決定。</td>
  </tr>
  <tr> 
    <td align="center" valign="top" nowrap>&nbsp;</td>
    <td align="center" valign="middle" nowrap><strong><strong><img src="icon.jpg" tppabs="http://www.suse.url.tw/picture/icon.jpg" width="11" height="11"></strong></strong></td>
    <td><strong><font color="#000099">default ACL</font></strong><font color="#000099">：</font></td>
  </tr>
  <tr>
    <td align="center" valign="top" nowrap>&nbsp;</td>
    <td align="center" valign="middle" nowrap>&nbsp;</td>
    <td>只能針對目錄來做設定。對於已設定預設存取控制清單的目錄而言，位於其下的檔案目錄，將會繼承這個目錄的 ACL 設定。</td>
  </tr>
</table>
<br>
<font color="#0000FF"><font color="#000000">　目前像 
ReiserFS<font color="#0000FF">、</font>ext2<font color="#0000FF">、</font>ext3<font color="#0000FF">、</font>JFS、XFS 
等檔案系統都可支援 ACL 噢 !</font></font><br>
<font color="#0000FF"><font color="#000000"><strong><font size="+1"><br>
<a name="51"></a><font size="5">4.4.2 設定及檢視檔案目錄的 ACL</font></font></strong><br>
<br>
　這裡會說明 ACL 相關的兩個指令。一個是<strong> </strong><font color="#0000FF">setfacl</font>，就是用來設定檔案目錄的 
ACL 啦 ﹔另一個是 <font color="#0000FF">getfacl</font>，是用來查看檔案目錄的 ACL 紀錄。當您使用 setfacl 
設定好檔案目錄的 ACL 後，就可以馬上使用 getfacl 來查閱。<br>
<br>
<font size="+1"><strong><a name="52"></a><font color="#FF0000"><strong><font color="#000000"><strong><font size="+1"><strong><font size="+1"><strong><font size="+1"><strong><font size="+1"><font color="#000000" size="+1"><font size="+1"><font color="#000000"><font size="+1"><strong><strong><font color="#FF0000"><font color="#000000"><strong><font color="#FF0000"><font color="#000000" size="+1"><strong><font color="#000000" size="+1"><strong><font color="#FF0000"><strong><img src="1775.gif" tppabs="http://www.suse.url.tw/picture/1775.gif" width="18" height="18"></strong></font></strong></font></strong></font></font></strong></font></font></strong></strong></font></font></font></font></font></strong></font></strong></font></strong></font></strong></font></strong></font></strong> 
<strong>指令 setfacl</strong></font></font></font> <br>
<br>
<font color="#0000FF"><font color="#000000">　設定檔案目錄的存取控制清單。 </font></font><br>
<br>
<font color="#0000FF"><font color="#000000"><strong>指令語法</strong>：</font></font><br>
<table width="100%" border="0">
  <tr> 
    <td height="22" bgcolor="#CCCCCC"><font color="#0000FF"><font color="#000000" face="細明體"><strong>setfacl 
      [-bd] [{-m|-x} acl_entries] file ... </strong></font></font></td>
  </tr>
</table>
<br>
<font color="#0000FF"><font color="#000000"><strong>　</strong><font color="#0000FF">acl_entries</font> 
是指可以提供 <font color="#0000FF">setfacl</font><strong> </strong>指令來設定的紀錄項，至於其設定格式如下：</font></font> 
<table width="100%" border="0">
  <tr> 
    <td width="2%" align="center" valign="top" nowrap>&nbsp;</td>
    <td width="3%" align="center" valign="middle" nowrap><strong><strong><img src="icon.jpg" tppabs="http://www.suse.url.tw/picture/icon.jpg" width="11" height="11"></strong></strong></td>
    <td width="95%"> <strong><font color="#000099" face="細明體">[u[ser]:]uid[:perms]</font></strong></td>
  </tr>
  <tr> 
    <td align="center" valign="top" nowrap>&nbsp;</td>
    <td align="center" valign="middle" nowrap>&nbsp;</td>
    <td>這是設定使用者的 ACL，比如現在要設定使用者 barry (uid 2000) 對檔案的權限為 rw，那麼可以輸入「<font color="#0000FF" face="細明體">u:barry:rw</font>」或「<font color="#0000FF" face="細明體">user:2000:6</font>」，也就是說 
      uid 欄位可使用 uid number 或使用者名稱，而權限 (perms) 部分可使用 rwx 的字元組合或權限所代表的數字。另外如果 uid 
      欄位是空的，則是在設定檔案擁有者本身的權限。</td>
  </tr>
  <tr> 
    <td align="center" valign="top" nowrap>&nbsp;</td>
    <td align="center" valign="middle" nowrap><strong><strong><img src="icon.jpg" tppabs="http://www.suse.url.tw/picture/icon.jpg" width="11" height="11"></strong></strong></td>
    <td><strong><font color="#000099" face="細明體">g[roup]:gid[:perms]</font></strong></td>
  </tr>
  <tr> 
    <td align="center" valign="top" nowrap>&nbsp;</td>
    <td align="center" valign="middle" nowrap>&nbsp;</td>
    <td>這是設定群組的 ACL，gid 部分可使用 gid number 或群組名稱，權限部分可使用 rwx 的字元組合或權限所代表的數字。另外如果 
      gid 欄位是空的，則是在設定檔案擁有群組的權限。</td>
  </tr>
  <tr> 
    <td align="center" valign="top" nowrap>&nbsp;</td>
    <td align="center" valign="middle" nowrap><strong><strong><img src="icon.jpg" tppabs="http://www.suse.url.tw/picture/icon.jpg" width="11" height="11"></strong></strong></td>
    <td><strong><font color="#000099" face="細明體">m[ask][:][:perms]</font></strong></td>
  </tr>
  <tr> 
    <td align="center" valign="top" nowrap>&nbsp;</td>
    <td align="center" valign="middle" nowrap>&nbsp;</td>
    <td>這是權限遮罩的設定，比如「<font color="#0000FF" face="細明體">mask::rwx</font>」或「<font color="#0000FF" face="細明體">m::7</font>」。至於遮罩的概念，在 
      getfacl 那個地方會說明。</td>
  </tr>
  <tr> 
    <td align="center" valign="top" nowrap>&nbsp;</td>
    <td align="center" valign="middle" nowrap><strong><strong><img src="icon.jpg" tppabs="http://www.suse.url.tw/picture/icon.jpg" width="11" height="11"></strong></strong></td>
    <td><strong><font color="#000099" face="細明體">o[ther][:][:perms]</font></strong></td>
  </tr>
  <tr>
    <td align="center" valign="top" nowrap>&nbsp;</td>
    <td align="center" valign="middle" nowrap>&nbsp;</td>
    <td>這是設定其他人的權限，比如「<font color="#0000FF" face="細明體">o::r</font>」。</td>
  </tr>
</table>
<br>
<font color="#0000FF"><font color="#000000"><strong>參數說明</strong>：</font></font> 
<table width="100%" border="1">
  <tr> 
    <td width="7%" align="center" valign="top" nowrap><font color="#000099">-m</font></td>
    <td width="93%" nowrap><font color="#000099"> 建立或修改檔案目錄的 ACL 紀錄。</font></td>
  </tr>
  <tr> 
    <td align="center" valign="top" nowrap><font color="#000099">-x</font></td>
    <td nowrap><font color="#000099">移除檔案目錄的 ACL 紀錄。</font></td>
  </tr>
  <tr> 
    <td align="center" valign="top" nowrap><font color="#000099">-b</font></td>
    <td nowrap><font color="#000099">移除檔案目錄的所有 ACL 紀錄。</font></td>
  </tr>
  <tr> 
    <td align="center" valign="top" nowrap><font color="#000099">-d</font></td>
    <td nowrap><font color="#000099">針對目錄設定預設的 ACL 紀錄。</font></td>
  </tr>
</table>
<font color="#0000FF"><font color="#000000"><strong><br>
</strong>　範例的部分，等下個 getfacl 指令介紹完後，再舉例說明。<br>
<strong><br>
<a name="53"></a><font color="#0000FF"><font color="#000000"><font size="+1"><strong><font color="#FF0000"><strong><font color="#000000"><strong><font size="+1"><strong><font size="+1"><strong><font size="+1"><strong><font size="+1"><font color="#000000" size="+1"><font size="+1"><font color="#000000"><font size="+1"><strong><strong><font color="#FF0000"><font color="#000000"><strong><font color="#FF0000"><font color="#000000" size="+1"><strong><font color="#000000" size="+1"><strong><font color="#FF0000"><strong><img src="1775.gif" tppabs="http://www.suse.url.tw/picture/1775.gif" width="18" height="18"></strong></font></strong></font></strong></font></font></strong></font></font></strong></strong></font></font></font></font></font></strong></font></strong></font></strong></font></strong></font></strong></font></strong></font></font></font><font size="+1"> 
指令 getfacl</font></strong></font></font><br>
<br>
<font color="#0000FF"><font color="#000000">　查看檔案目錄的存取控制清單。</font></font><br>
<br>
<strong>指令語法</strong>：<br>
<table width="100%" border="0" bgcolor="#CCCCCC">
  <tr> 
    <td><strong><font face="細明體">getfacl file ...</font> </strong></td>
  </tr>
</table>
<br>
<strong>範例說明</strong>：<br>
<table width="100%" border="0">
  <tr> 
    <td bgcolor="#000000"><font color="#FFFFFF">suse:~ # <font color="#FFFF00"><strong>getfacl 
      testdir</strong></font><br>
      <font face="細明體"># file: testdir　<font color="#00FFFF">　←<font size="2"> 
      </font></font><font color="#00FFFF" size="2">檔案名稱</font><br>
      # owner: root　　<font color="#FFFFFF"><font color="#00FFFF">　←<font size="2"> 
      </font></font><font color="#00FFFF" size="2">檔案擁有者</font></font><br>
      # group: grp01　 <font color="#FFFFFF"><font color="#00FFFF">　←<font size="2"> 
      </font></font><font color="#00FFFF" size="2">檔案擁有群組</font></font><br>
      user::rwx　</font><font color="#00FFFF" face="細明體">&lt;---------<font size="2">(1)</font></font><font face="細明體"><br>
      user:barry:r-x　</font><font color="#00FFFF" face="細明體">&lt;----<font size="2">(2)</font></font><font face="細明體"><br>
      group::r-x　</font><font color="#00FFFF" face="細明體">&lt;--------<font size="2">(3)</font></font><font face="細明體"><br>
      group:grp02:rwx　</font><font color="#00FFFF" face="細明體">&lt;---<font size="2">(4)</font></font><font face="細明體"><br>
      mask::rwx　</font><font color="#00FFFF" face="細明體">&lt;---------<font size="2">(5)</font></font><font face="細明體"><br>
      other::r-x</font>　<font color="#00FFFF" face="細明體">&lt;--------<font size="2">(6)</font></font></font></td>
  </tr>
</table>
<br>
<font color="#0000FF"><font color="#000000"> 　上面編號 1、3、6 分別代表 testdir 的擁有者 (user)、擁有群組 
(group) 及其他人 (other) 的權限，這三個紀錄項一般稱之為基本的 ACL 紀錄 (base ACL entries)。編號 2 及 4 是表示額外被指定的使用者及群組權限，而此使用者及群組就稱之為 
named user 及 named group。至於編號 5 則是權限遮罩。<br>
</font></font> <font color="#0000FF"><font color="#000000"> <br>
　權限遮罩 (mask) 會影響 named user、named group 及 group 的真正權限，因為它們的權限是要經由與 mask 做 and 
運算後才能得到。比如 named user 權限為 rwx，而 mask 為 r-x，則此 named user 最後所得到真正的權限是 r-x。至於 user 
及 other 的權限則不受 mask 的影響。<br>
</font></font> 
<p align="left"><font color="#0000FF"><font color="#0000FF"><font color="#000000">　由以上說明，可以歸納出 
  ACL 的兩種主要紀錄型態為：</font></font> </font> </p>
<table width="100%" border="0">
  <tr> 
    <td width="2%" align="center" valign="top" nowrap>&nbsp;</td>
    <td width="3%" align="center" valign="middle" nowrap><strong><strong><img src="icon.jpg" tppabs="http://www.suse.url.tw/picture/icon.jpg" width="11" height="11"></strong></strong></td>
    <td width="95%"><strong><font color="#000099">basic ACL</font></strong><font color="#000099">：</font></td>
  </tr>
  <tr> 
    <td align="center" valign="top" nowrap>&nbsp;</td>
    <td align="center" valign="middle" nowrap>&nbsp;</td>
    <td>包含 user、group 及 other 的權限紀錄。</td>
  </tr>
  <tr> 
    <td align="center" valign="top" nowrap>&nbsp;</td>
    <td align="center" valign="middle" nowrap><strong><strong><img src="icon.jpg" tppabs="http://www.suse.url.tw/picture/icon.jpg" width="11" height="11"></strong></strong></td>
    <td><strong><font color="#000099">extended ACL</font></strong><font color="#000099">：</font></td>
  </tr>
  <tr>
    <td align="center" valign="top" nowrap>&nbsp;</td>
    <td align="center" valign="middle" nowrap>&nbsp;</td>
    <td>包含 named user、named group 及 mask 的權限紀錄。</td>
  </tr>
</table>
<br>
<font color="#000000">　</font><font color="#0000FF"><font color="#000000">最後談一下 
ACL 與平常我們使用長格式所看到的權限有何差異，關於這方面您就只需留意 group 權限。比如以上面那個例子來講，編號 3 的 group 權限為 r-x，編號 
5 的 mask 為 rwx，則最後您在長格式中所看到的群組權限將會與 mask 相同，也就是 rwx，只不過 group 真正的權限還是要依照 ACL 紀錄。所以當您設定了 
ACL 後，又使用 chmod 去修改擁有群組權限時，就等於是在修改 ACL 紀錄中的 mask。<br>
<strong><br>
</strong><font color="#0000FF"><font color="#000000"><strong><font color="#0000FF"><font color="#000000"><font size="+1"><strong><font color="#FF0000"><strong><font color="#000000"><strong><font size="+1"><strong><font size="+1"><strong><font size="+1"><strong><font size="+1"><font color="#000000" size="+1"><font size="+1"><font color="#000000"><font size="+1"><strong><strong><font color="#FF0000"><strong><font color="#FF0000"><font color="#000000" size="+1"><strong><font color="#000000" size="+1"><strong><font color="#FF0000"><strong><a name="70" id="70"></a><img src="1775.gif" tppabs="http://www.suse.url.tw/picture/1775.gif" width="18" height="18"></strong></font></strong></font></strong></font></font></strong></font></strong></strong></font></font></font></font></font></strong></font></strong></font></strong></font></strong></font></strong></font></strong></font></font></font></strong></font></font></font> 
<font color="#000000"><strong><font size="4">ACL 設定範例<br>
</font><br>
範例一：</strong></font></font>請您先建立 user01、user02 使用者及 grp01、grp02 兩群組，並將 user01 
加入 grp01 群組中。接著規劃一下環境：<br>
<br>
<table width="100%" border="0" bgcolor="#000000">
  <tr> 
    <td><font color="#FFFFFF">suse:/tmp # <font color="#FFFF00"><strong>mkdir 
      testdir</strong></font><br>
      suse:/tmp # <font color="#FFFF00"><strong>chown :grp02 testdir</strong></font><br>
      suse:/tmp # <font color="#FFFF00"><strong>chmod 750 testdir</strong></font><br>
      suse:/tmp # <font color="#FFFF00"><strong>ls -ld testdir</strong></font><br>
      drwxr-x---　2　root　grp02　48　Oct 7 23:32　<font color="#0099FF">testdir </font></font></td>
  </tr>
</table>
<br>
　開始設定 ACL：<br>
<br>
<table width="100%" border="0">
  <tr> 
    <td bgcolor="#000000"><p><font color="#FFFFFF">suse:/tmp # <font color="#FFFF00"><strong>setfacl 
        -m u:user02:rwx testdir</strong></font><br>
        <font color="#00FFFF"># <font size="2">額外讓使用者 user02 對該目錄具備 rwx 權限<font color="#FFFFFF">。</font></font></font><br>
        <br>
        suse:/tmp #<font color="#FFFF00"><strong> setfacl -m g:grp01:rwx testdir</strong></font><br>
        <font color="#00FFFF"># <font size="2">額外讓群組 grp01 對該目錄具備 rwx 權限<font color="#FFFFFF">。</font></font></font><br>
        <br>
        suse:/tmp # <font color="#FFFF00"><strong>getfacl testdir</strong></font><br>
        <font face="細明體"># file: testdir<br>
        # owner: root<br>
        # group: grp02<br>
        user::rwx　　　　</font><font color="#FFFFFF"><font color="#00FFFF" size="2">← 
        擁有者 root 的權限</font></font><font face="細明體"><br>
        user:user02:rwx　</font><font color="#FFFFFF"><font color="#00FFFF" size="2">← 
        named user -- user02 的權限</font></font><font face="細明體"><br>
        group::r-x　　　 </font><font color="#FFFFFF"><font color="#00FFFF" size="2">← 
        擁有群組 grp02 的權限。</font></font><font face="細明體"><br>
        group:grp01:rwx　</font><font color="#FFFFFF"><font size="2"><font color="#00FFFF">← 
        named group -- grp01 的權限</font></font></font><font face="細明體"><br>
        mask::rwx　　　　</font><font color="#FFFFFF"><font size="2"><font color="#00FFFF">← 
        這是權限遮罩</font></font></font><font face="細明體"><br>
        other::---　　　 </font><font color="#FFFFFF"><font color="#FFFFFF"><font size="2"><font color="#00FFFF">← 
        </font></font></font><font color="#00FFFF" size="2">其他人的權限</font></font><br>
        <br>
        <font color="#00FFFF"># </font><font color="#00FFFF" size="2">從 ACL 中可知，grp01 
        群組成員及 user02 對 testdir 具有 rwx 的權限。請自行測試看看。</font><br>
        <br>
        <font color="#00FFFF"># </font><font color="#00FFFF" size="2">接下來修改一下權限遮罩：</font><br>
        suse:/tmp # <font color="#FFFF00"><strong>setfacl -m m::rx testdir</strong></font> 
        <br>
        suse:/tmp # <font color="#FFFF00"><strong>getfacl testdir</strong></font><br>
        <font face="細明體"># file: testdir<br>
        # owner: root<br>
        # group: grp02<br>
        user::rwx<br>
        user:user02:rwx 　#effective:r-x </font><font color="#FFFFFF"><font color="#00FFFF" size="2">← 
        這是 named user 權限與 mask 做 and 運算後<font face="細明體">，</font></font></font><font face="細明體"><br>
        group::r-x　　　　　　　　　　　　 </font><font color="#FFFFFF"><font color="#FFFFFF"><font color="#00FFFF" size="2">所得到的真正權限。</font></font></font><font face="細明體"><br>
        group:grp01:rwx 　#effective:r-x </font><font color="#FFFFFF"><font color="#00FFFF" size="2">← 
        這是 named group 權限與 mask 做 and 運算後<font face="細明體">，</font></font></font><font face="細明體"><br>
        mask::</font><font color="#FFFF00" face="細明體">r-x</font><font face="細明體">　　　　　　　　　　　　　</font><font color="#FFFFFF"><font color="#FFFFFF"><font color="#00FFFF" size="2">所得到的真正權限。</font></font></font><font face="細明體"><br>
        other::--- </font></font> <font color="#FFFFFF"><br>
        <br>
        <font color="#00FFFF"># </font><font color="#00FFFF" size="2">接著來練習移除 
        ACL 紀錄：</font><br>
        suse:/tmp # <font color="#FFFF00"><strong>setfacl -x g:grp01 testdir <br>
        </strong><font color="#FFFFFF"><font color="#00FFFF"># </font><font color="#FFFFFF"><font color="#FFFF00"><font color="#00FFFF" size="2">移除 
        named group -- grp01 的 ACL 紀錄。</font></font></font></font><br>
        <font color="#00FFFF" size="2"><br>
        </font><font color="#00FFFF"> <font color="#FFFFFF">suse:/tmp # <font color="#FFFF00"><strong>setfacl 
        -b testdir</strong></font> <br>
        <font color="#00FFFF"># <font color="#FFFF00"><font color="#00FFFF"><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFF00"><font color="#00FFFF" size="2">移除所有 
        extended ACL 紀錄。</font></font></font></font></font></font></font><br>
        <br>
        suse:/tmp # <font color="#FFFF00"><strong>getfacl testdir</strong></font><br>
        <font face="細明體"># file: testdir<br>
        # owner: root<br>
        # group: grp02<br>
        user::rwx<br>
        group::r-x<br>
        other::---</font></font></font></font></font></p></td>
  </tr>
</table>
<p><font color="#0000FF"><font color="#000000"> <strong>範例二</strong>：接著來看個 default 
  ACL 的範例</font></font></p>
<table width="100%" border="0">
  <tr> 
    <td bgcolor="#000000"><font color="#FFFFFF">suse:/tmp # <font color="#FFFF00"><strong>mkdir 
      defaultdir</strong></font><br>
      suse:/tmp # <font color="#FFFF00"><strong>chmod 770 defaultdir<br>
      </strong></font><br>
      suse:/tmp # <font color="#FFFF00"><strong>setfacl -d -m u:barry:rwx defaultdir</strong></font> 
      <br>
      <font color="#FFFF00"><font color="#FFFFFF"><font color="#00FFFF"># </font></font></font><font color="#00FFFF" size="2">設定此目錄的預設 
      named user 權限。</font><br>
      <font color="#FFFFFF"><font color="#FFFF00"><font color="#FFFFFF"><font color="#00FFFF"># 
      </font></font></font></font><font color="#00FFFF" size="2">另一種預設 ACL 設定方式為</font><font color="#00FFFF">「</font><font color="#00FFFF" size="2">setfacl 
      -m <strong>d</strong>:u:barry:rwx defaultdir</font><font color="#00FFFF">」</font><font color="#00FFFF" size="2">，<br>
      </font><font color="#FFFFFF"><font color="#FFFFFF"><font color="#FFFF00"><font color="#FFFFFF"><font color="#00FFFF"># 
      </font></font></font></font><font color="#00FFFF" size="2"></font></font><font color="#00FFFF" size="2">兩者可達相同效果。</font> 
      <br>
      <br>
      suse:/tmp #<font color="#FFFF00"><strong> setfacl -d -m g:grp01:rx defaultdir</strong></font> 
      <br>
      <font color="#FFFF00"><font color="#FFFFFF"><font color="#00FFFF"># </font></font></font><font color="#00FFFF" size="2"> 
      設定此目錄的預設 named group 權限。<br>
      </font><br>
      suse:/tmp #<font color="#FFFF00"><strong> setfacl -m u:barry:rx defaultdir</strong></font><br>
      suse:/tmp # <font color="#FFFF00"><strong>setfacl -m g:grp01:rx defaultdir</strong></font> 
      <br>
      <font color="#FFFFFF"><font color="#FFFF00"><font color="#FFFFFF"><font color="#00FFFF"># 
      </font></font></font></font><font color="#00FFFF" size="2">這是開放使用者 barry 
      及 grp01 群組對 defaultdir 目錄的存取權限。</font><br>
      <br>
      suse:/tmp # <font color="#FFFF00"><strong>getfacl defaultdir</strong></font><br>
      <font face="細明體"># file: defaultdir<br>
      # owner: root<br>
      # group: root<br>
      user::rwx<br>
      user:barry:r-x<br>
      group::rwx<br>
      group:grp01:r-x<br>
      mask::rwx<br>
      other::---<br>
      default:user::rwx<br>
      </font> <font color="#FFFF00" face="細明體">default:user:barry:rwx</font><font face="細明體"><br>
      default:group::rwx<br>
      </font> <font color="#FFFF00" face="細明體">default:group:grp01:r-x</font><font face="細明體"><br>
      default:mask::rwx<br>
      default:other::---</font><br>
      <font color="#FFFFFF"><font color="#FFFF00"><font color="#FFFFFF"><font color="#00FFFF"># 
      </font></font></font></font><font color="#00FFFF" size="2">default 開頭的那幾行，就是 
      default ACL 的紀錄囉。</font><br>
      <br>
      <font color="#FFFFFF"><font color="#FFFF00"><font color="#FFFFFF"><font color="#00FFFF"># 
      </font></font></font></font><font color="#00FFFF" size="2">開始做個測試：</font><br>
      suse:/tmp # <strong><font color="#FFFF00">touch defaultdir/file</font></strong><br>
      suse:/tmp # <font color="#FFFF00"><strong>getfacl defaultdir/file</strong></font><br>
      <font face="細明體"># file: defaultdir/file<br>
      # owner: root<br>
      # group: root<br>
      user::rw-<br>
      user:barry:rwx　　　#effective:rw-<br>
      group::rwx　　　　　#effective:rw-<br>
      group:grp01:r-x　　 #effective:r--<br>
      mask::rw-<br>
      other::--- </font><br>
      <font color="#FFFFFF"><font color="#FFFF00"><font color="#FFFFFF"><font color="#00FFFF"># 
      </font></font></font></font><font color="#00FFFF" size="2">檢查看看 file 是否有繼承 
      defaultdir 的預設 ACL 設定，應該沒啥問題吧。</font></font></td>
  </tr>
</table>
<p align="left">&nbsp; </p>
<p align="center"><font color="#000000"><em>copyright &copy; 2006 by barry ( 柏青哥 
  )</em></font> </p>
</body>
</html>
